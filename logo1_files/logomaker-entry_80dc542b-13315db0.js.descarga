(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{10:function(t,e,n){var i,r,o,s=e,a=n(0),h=n(1),u=n(4),l=n(9),c=n(37),f=n(304),p=n(15),d=n(28);s.TheoRect=(i=function(t,e,n,i){this.minX=c.MathUtils.minDouble(t,n),this.minY=c.MathUtils.minDouble(e,i),this.maxX=c.MathUtils.maxDouble(t,n),this.maxY=c.MathUtils.maxDouble(e,i),u.CoreObject.call(this)},r={},a.defineClass({name:"TheoRect",ctor:i,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new i(0,0,0,0)),r.Zero}},Infinite:{get:function(){return void 0===r.Infinite&&(r.Infinite=new i(-1/0,-1/0,1/0,1/0)),r.Infinite}},ONE_BY_ONE:{get:function(){return void 0===r.ONE_BY_ONE&&(r.ONE_BY_ONE=new i(0,0,1,1)),r.ONE_BY_ONE}},fromXYWH:function(t,e,n,r){return new i(t,e,t+n,e+r)},fromXYXY:function(t,e,n,r){return new i(t,e,n,r)},fromXXYY:function(t,e,n,r){return new i(t,n,e,r)},fromPoints:function(t,e){return new i(t.x,t.y,e.x,e.y)},fromSize:function(t){return i.fromXYWH(0,0,t.width,t.height)},boundsOfPoints:function(t){var e=null;if(0==t.length);else if(1==t.length)e=new i(t[0].x,t[0].y,t[0].x,t[0].y);else{for(var n=0,r=0,o=0,s=0,h=!0,u=a.iter(t);!u.done;u.next()){var l=u.value;h?(n=l.x,o=l.x,r=l.y,s=l.y,h=!1):(n=c.MathUtils.minDouble(l.x,n),r=c.MathUtils.minDouble(l.y,r),o=c.MathUtils.maxDouble(l.x,o),s=c.MathUtils.maxDouble(l.y,s))}e=new i(n,r,o,s)}return e},unionOfRects:function(t){for(var e=null,n=a.iter(t);!n.done;n.next()){var r=n.value;e=i.unionOf(e,r)}return e},unionOf:function(t,e){return null==t?e:null==e?t:new i(c.MathUtils.minDouble(t.minX,e.minX),c.MathUtils.minDouble(t.minY,e.minY),c.MathUtils.maxDouble(t.maxX,e.maxX),c.MathUtils.maxDouble(t.maxY,e.maxY))},fromString:function(t){var e=a.clone(t.split(","));return 4==e.length?i.fromXXYY(a.toDouble(e[0]),a.toDouble(e[1]),a.toDouble(e[2]),a.toDouble(e[3])):null},fromArray:function(t){if(4!=t.length)return h.CoreAssert.fail("TheoRect.fromArray: Array does not have 4 elements"),null;var e=a.as(t[0],"Double"),n=a.as(t[1],"Double"),r=a.as(t[2],"Double"),o=a.as(t[3],"Double");return null==e||null==n||null==r||null==o?(h.CoreAssert.fail("Rect.fromArray: Array is not 4 doubles"),null):new i(e,n,r,o)},decodeJson:function(t){return null==t?null:a.is(t,["Array","Any"])?i.fromArray(t):a.is(t,"String")?i.fromString(t):(h.CoreAssert.fail("TheoRect.decodeJson: Not an array or a string"),null)},RectanglesIntersect:function(t,e,n,i,r){return s.RectanglesIntersect_(t,e,n,i,r)},PointInCommon_:function(t,e,n,i){for(var r=[],o=a.iter(a.range(0,5,!1));!o.done;o.next())r.push(new p.TheoPoint(0,0));return s.RectanglesIntersect_(t,e,n,r,i)},InteriorPointInCommon:function(t,e,n){return i.PointInCommon_(t,e,n,function(t,e){return t<e})},PointInCommon:function(t,e,n){return i.PointInCommon_(t,e,n,function(t,e){return t<=e})},JustTouch:function(t,e,n,i){return s.JustTouch_(t,e,n,i)},MakeIntersectOrAbut:function(t,e,n){return s.MakeIntersect_(t,e,n,0,function(t,e){return t<=e})},MakeInteriorsIntersect:function(t,e,n){return s.MakeIntersect_(t,e,n,5,function(t,e){return t<e})}},props:{evalUUVV:function(t,e,n,r){return i.fromPoints(this.evalXY(t,n),this.evalXY(e,r))},width:{get:function(){return this.maxX-this.minX}},height:{get:function(){return this.maxY-this.minY}},size:{get:function(){return new d.TheoSize(this.width,this.height)}},containsPoint:function(t){return t.x>=this.minX&&t.y>=this.minY&&t.x<=this.maxX&&t.y<=this.maxY},eval:function(t){return this.evalXY(t.x,t.y)},evalPts:function(t){for(var e=[],n=a.iter(t);!n.done;n.next()){var i=n.value;e.push(this.evalXY(i.x,i.y))}return e},evalXY:function(t,e){return new p.TheoPoint((1-t)*this.minX+t*this.maxX,(1-e)*this.minY+e*this.maxY)},locatePoint:function(t){return this.locate(t.x,t.y)},locate:function(t,e){return new p.TheoPoint((t-this.minX)/(this.maxX-this.minX),(e-this.minY)/(this.maxY-this.minY))},evalRect:function(t){var e=this.evalXY(t.minX,t.minY),n=this.evalXY(t.maxX,t.maxY);return new i(e.x,e.y,n.x,n.y)},area:{get:function(){return(this.maxX-this.minX)*(this.maxY-this.minY)}},aspectRatio:{get:function(){return this.width/this.height}},similarity:function(t){var e=this.aspectRatio,n=t.aspectRatio,i=Math.atan(e)/Math.PI,r=Math.atan(n)/Math.PI;return Math.abs(i-r)},midX:{get:function(){return(this.minX+this.maxX)/2}},midY:{get:function(){return(this.minY+this.maxY)/2}},origin:{get:function(){return new p.TheoPoint(this.minX,this.minY)}},center:{get:function(){return this.evalXY(.5,.5)}},equal:function(t){return this.minX==t.minX&&this.maxX==t.maxX&&this.minY==t.minY&&this.maxY==t.maxY},equalWithAccuracy:function(t,e){return Math.abs(this.minX-t.minX)<e&&Math.abs(this.maxX-t.maxX)<e&&Math.abs(this.minY-t.minY)<e&&Math.abs(this.maxY-t.maxY)<e},fitAspectRatioWithin:function(t){var e=null;return e=this.aspectRatio<t?new d.TheoSize(this.width,this.width/t):new d.TheoSize(t*this.height,this.height),h.CoreAssert.isTrue(e.width<=this.width+.01),h.CoreAssert.isTrue(e.height<=this.height+.01),e},expandToFit:function(t){return this.containsPoint(t)?this:new i(c.MathUtils.minDouble(t.x,this.minX),c.MathUtils.minDouble(t.y,this.minY),c.MathUtils.maxDouble(t.x,this.maxX),c.MathUtils.maxDouble(t.y,this.maxY))},contains:function(t){var e=this.intersectionWith(t);return null!=e&&e.equalWithAccuracy(t,.001)},intersects:function(t){return c.MathUtils.maxDouble(t.minX,this.minX)<c.MathUtils.minDouble(t.maxX,this.maxX)&&c.MathUtils.maxDouble(t.minY,this.minY)<c.MathUtils.minDouble(t.maxY,this.maxY)},intersectionWith:function(t){return this.intersects(t)?new i(c.MathUtils.maxDouble(t.minX,this.minX),c.MathUtils.maxDouble(t.minY,this.minY),c.MathUtils.minDouble(t.maxX,this.maxX),c.MathUtils.minDouble(t.maxY,this.maxY)):null},unionWith:function(t){return i.unionOf(this,t)},verticalLine:function(t){return new f.TheoLine(this.evalXY(t,0),this.evalXY(t,1))},horizontalLine:function(t){return new f.TheoLine(this.evalXY(0,t),this.evalXY(1,t))},interpolateWith:function(t,e){return new i(this.minX*(1-e)+t.minX*e,this.minY*(1-e)+t.minY*e,this.maxX*(1-e)+t.maxX*e,this.maxY*(1-e)+t.maxY*e)},L1Distance:function(t){var e=-1*c.MathUtils.minDouble(t.maxX-this.minX,this.maxX-t.minX),n=-1*c.MathUtils.minDouble(t.maxY-this.minY,this.maxY-t.minY);return c.MathUtils.maxDouble(0,c.MathUtils.maxDouble(e,n))},xDistance:function(t,e){void 0===e&&(e=!0);var n=-1*c.MathUtils.minDouble(t.maxX-this.minX,this.maxX-t.minX);return e?c.MathUtils.maxDouble(0,n):n},yDistance:function(t,e){void 0===e&&(e=!0);var n=-1*c.MathUtils.minDouble(t.maxY-this.minY,this.maxY-t.minY);return e?c.MathUtils.maxDouble(0,n):n},transform:function(t){return t.transformRect(this)},points:{get:function(){return[new p.TheoPoint(this.minX,this.minY),new p.TheoPoint(this.minX,this.maxY),new p.TheoPoint(this.maxX,this.minY),new p.TheoPoint(this.maxX,this.maxY)]}},interpolate:function(t,e){function n(t,e,n){return t+(e-t)*n}return new i(n(this.minX,t.minX,e),n(this.minY,t.minY,e),n(this.maxX,t.maxX,e),n(this.maxY,t.maxY,e))},rounded:function(){return new i(Math.round(this.minX),Math.round(this.minY),Math.round(this.maxX),Math.round(this.maxY))},floored:function(){return new i(Math.floor(this.minX),Math.floor(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))},insetXY:function(t,e){return new i(this.minX+t,this.minY+e,this.maxX-t,this.maxY-e)},insetRel:function(t,e,n,r){return i.fromXXYY(this.minX+this.width*t,this.maxX-this.width*e,this.minY+this.height*n,this.maxY-this.height*r)},scaleXY:function(t,e,n){void 0===n&&(n=new p.TheoPoint(.5,.5));var r=i.fromXYWH(this.minX,this.minY,this.width*t,this.height*e);return r.transform(l.Matrix2D.translation(this.eval(n).subtract(r.eval(n))))},scale:function(t,e){return void 0===e&&(e=new p.TheoPoint(.5,.5)),this.scaleXY(t,t,e)},outsetXY:function(t,e){return new i(this.minX-t,this.minY-e,this.maxX+t,this.maxY+e)},offset:function(t){return new i(this.minX+t.x,this.minY+t.y,this.maxX+t.x,this.maxY+t.y)},offsetXY:function(t,e){return new i(this.minX+t,this.minY+e,this.maxX+t,this.maxY+e)},multiplyXY:function(t,e){return i.fromXYWH(this.minX*t,this.minY*e,this.width*t,this.height*e)},split:function(t,e,n){void 0===n&&(n=null);var r=[],o=0,s=0,u=0;if(null!=n){for(var l=a.iter(n);!l.done;l.next())u+=l.value;if(t!=n.length)return h.CoreAssert.fail("num regions must match weight vector"),r}for(var c=e?this.width/a.toDouble(t):this.width,f=e?this.height:this.height/a.toDouble(t),p=a.iter(a.range(0,t,!1));!p.done;p.next()){var d,m=p.value;(d=n)&&(c=e?this.width*(d[m]/u):this.width,f=e?this.height:this.height*(d[m]/u)),e?r.push(new i(this.minX+o,this.minY,this.minX+o+c,this.maxY)):r.push(new i(this.minX,this.minY+s,this.maxX,this.minY+s+f)),o+=c,s+=f}return r},asString:{get:function(){return" x: "+a.toString(Math.round(100*this.minX)/100)+" "+a.toString(Math.round(100*this.maxX)/100)+", y:"+a.toString(Math.round(100*this.minY)/100)+" "+a.toString(Math.round(100*this.maxY)/100)}},asIntString:{get:function(){return" x: "+a.toString(Math.round(this.minX))+" "+a.toString(Math.round(this.maxX))+", y:"+a.toString(Math.round(this.minY))+" "+a.toString(Math.round(this.maxY))}},description:{get:function(){return this.asString}},encode:function(){return h.CoreAssert.fail("TheoRect: Use encodeJson(), not encode()"),[]},encodeJson:function(){return h.CoreAssert.isFalse(isNaN(this.minX),"Can't persist NaN minX value"),h.CoreAssert.isFalse(isNaN(this.minY),"Can't persist NaN minY value"),h.CoreAssert.isFalse(isNaN(this.maxX),"Can't persist NaN maxX value"),h.CoreAssert.isFalse(isNaN(this.maxY),"Can't persist NaN maxY value"),a.as([this.minX,this.minY,this.maxX,this.maxY],"AnyObject")},maximumSpan:function(t){var e=this,n=function(n,i){return t.transformLinear(e.evalXY(n,i))},i=0,r=function(t,e){var r=n(t,e),o=n(1-t,1-e),s=function(t,e){var s,a,h=(s=n(t,e),a=o,new f.TheoLine(s,a)),u=h.locate(r);if(-1e-7<u&&u<1+1e-7){var l=h.eval(u),c=p._minus_TheoPoint_TheoPoint(l,r).length(),d=p._minus_TheoPoint_TheoPoint(l,o).length();i=Math.max(i,c,d)}};s(t,1-e),s(1-t,e)};return r(0,0),r(1,0),i}}}),i),s.RectanglesIntersect_=function(t,e,n,i,r){h.CoreAssert.isTrue(t.minX<=t.maxX&&t.minY<=t.maxY&&n.minX<=n.maxX&&n.minY<=n.maxY);var o=function(n,i){return e.transformPoint(t.evalXY(n,i))},u=0,l=0;function c(t,e){var n=s.rect_contains_point(e,t,u,l,r),i=n.result,o=n.horz,a=n.vert;return u=o,l=a,i}if(c(o(.5,.5),n))return!0;if(u=0,l=0,i[0]=o(0,0),c(i[0],n))return!0;if(i[2]=o(1,1),c(i[2],n))return!0;if(e.preservesBoxes)return!!s.rects_intersect(new s.TheoRect(i[0].x,i[0].y,i[2].x,i[2].y),n,r)||(i[1]=o(1,0),i[3]=o(0,1),i[4]=i[0],!1);if(i[1]=o(1,0),c(i[1],n))return!0;if(i[3]=o(0,1),c(i[3],n))return!0;if(i[4]=i[0],4==u||-4==u||4==l||-4==l)return!1;h.CoreAssert.isTrue(0!=e.determinant);var d=e.inverse,m=function(t,e){return d.transformPoint(n.evalXY(t,e))};if(c(d.transformPoint(n.center),t))return!0;var T=[new p.TheoPoint(0,0),new p.TheoPoint(0,0),new p.TheoPoint(0,0),new p.TheoPoint(0,0),new p.TheoPoint(0,0)];if(T[0]=m(0,0),c(T[0],t))return!0;if(T[1]=m(1,0),c(T[1],t))return!0;if(T[2]=m(1,1),c(T[2],t))return!0;if(T[3]=m(0,1),c(T[3],t))return!0;T[4]=T[0];var P=[new p.TheoPoint(0,0),new p.TheoPoint(0,0),new p.TheoPoint(0,0),new p.TheoPoint(0,0),new p.TheoPoint(0,0)];P[0]=t.evalXY(0,0),P[1]=t.evalXY(1,0),P[2]=t.evalXY(1,1),P[3]=t.evalXY(0,1),P[4]=P[0];for(var _=a.iter(a.range(0,4,!1));!_.done;_.next())for(var g=_.value,v=a.iter(a.range(0,4,!1));!v.done;v.next()){var x=v.value,R=s.segment_intersection(T[g],T[g+1],P[x+1],P[x]),y=R[0],C=R[1];if(isNaN(y)){var b=function(t,e,n){return new f.TheoLine(t,e).locate(n)};if(y=b(T[g],T[g+1],P[x]),r(0,y)&&r(y,1))return!0;if(y=b(T[g],T[g+1],P[x+1]),r(0,y)&&r(y,1))return!0;if(y=b(P[x],P[x+1],T[g]),r(0,y)&&r(y,1))return!0;if(y=b(P[x],P[x+1],T[g+1]),r(0,y)&&r(y,1))return!0}else if(r(0,y)&&r(y,1)&&r(0,C)&&r(C,1))return!0}return!1},s.rect_contains_point=function(t,e,n,i,r){var o=n,s=i,a=!1;if(r(t.minX,e.x)?r(e.x,t.maxX)?a=!0:o+=1:o-=1,r(t.minY,e.y)){if(r(e.y,t.maxY))return{result:a,horz:o,vert:s};s+=1}else s-=1;return{result:!1,horz:o,vert:s}},s.rects_intersect=function(t,e,n){return n(e.minX,t.maxX)&&n(t.minX,e.maxX)&&n(t.minY,e.maxY)&&n(e.minY,t.maxY)},s.rect_contains_rect=function(t,e,n){return n(t.minY,e.minY)&&n(e.maxY,t.maxY)&&n(t.minX,e.minX)&&n(e.maxX,t.maxX)},s.subnormal_skipping_nextafter=function(t,e){return t},s.local_next_after=function(t,e,n){void 0===n&&(n=1);for(var i=t,r=n;r>0;)i=s.subnormal_skipping_nextafter(i,e),r-=1;return i},s.rectangle_inset=function(t,e){for(var n=t.minX,i=t.maxX,r=t.minY,o=t.maxY,a=e;a>0;)n=s.local_next_after(n,i,1),i=s.local_next_after(i,n,1),r=s.local_next_after(r,o,1),o=s.local_next_after(o,r,1),a-=1;return new s.TheoRect(n,r,i,o)},s.rectangle_outset=function(t,e){var n=s.local_next_after(t.minX,-1/0,e),i=s.local_next_after(t.minY,-1/0,e),r=s.local_next_after(t.maxX,1/0,e),o=s.local_next_after(t.maxY,1/0,e);return new s.TheoRect(n,i,r,o)},s.segment_intersection=function(t,e,n,i){var r,o,s=e.subtract(t),a=i.subtract(n),u=t.subtract(n),l=a.crossProduct(s),c=u.crossProduct(a),f=u.crossProduct(s);return 0==l?0==c?(h.CoreAssert.isTrue(0==f),r=NaN,o=NaN):s.dotProduct(a)>0?(r=1/0,o=1/0):(r=-1/0,o=-1/0):(r=c/l,o=f/l),[r,o]},s.JustTouch_=function(t,e,n,i){var r=function(t,e,n,i){for(var r,o=1/0,u=new p.TheoPoint(0,0),d=[new p.TheoPoint(0,0),new p.TheoPoint(1,0),new p.TheoPoint(1,1),new p.TheoPoint(0,1)].map(a.bind(t,"eval"),this).map(a.bind(e,"transformPoint"),this),m=[new p.TheoPoint(0,0),new p.TheoPoint(1,0),new p.TheoPoint(1,1),new p.TheoPoint(0,1),new p.TheoPoint(0,0)].map(a.bind(n,"eval"),this).map(a.bind(i,"transformPoint"),this),T=[],P=a.iter(a.range(0,5,!1));!P.done;P.next())T.push(new p.TheoPoint(0,0));for(var _=a.iter(d);!_.done;_.next())for(var g=_.value,v=a.iter(a.range(0,4,!1));!v.done;v.next()){var x=v.value,R=new f.TheoLine(m[x],m[x+1]);!function(r){var a=g,h=p._minus_TheoPoint_TheoPoint(R.eval(r),a),l=function(t){return t.evalUUVV(1e-9,1-1e-9,1e-9,1-1e-9)};if(!s.RectanglesIntersect_(l(t),e.translate(h).concat(i.inverse),l(n),T,function(t,e){return t<=e})){var c=h.dotProduct(h);c<o&&(o=c,u=h)}}((r=R.locate(g),c.MathUtils.minDouble(c.MathUtils.maxDouble(0,r),1)))}return h.CoreAssert.isTrue(o<1/0),l.Matrix2D.translation(u)},o=function(t){return t.tx*t.tx+t.ty*t.ty},u=r(t,e,n,i),d=r(n,i,t,e).inverse;return o(u)<o(d)?u:d},s.MutableRect=(o=function(t,e,n,i){this.minX=t,this.minY=e,this.maxX=n,this.maxY=i},a.defineClass({name:"MutableRect",ctor:o,statics:{fromTheoRect:function(t){return new o(t.minX,t.minY,t.maxX,t.maxY)}},props:{width:{get:function(){return this.maxX-this.minX}},height:{get:function(){return this.maxY-this.minY}},midX:{get:function(){return(this.minX+this.maxX)/2}},midY:{get:function(){return(this.minY+this.maxY)/2}},eval:function(t){return this.evalUV(t.x,t.y)},evalUV:function(t,e){return new p.TheoPoint((1-t)*this.minX+t*this.maxX,(1-e)*this.minY+e*this.maxY)},asTheoRect:{get:function(){return new s.TheoRect(this.minX,this.minY,this.maxX,this.maxY)}},clone:function(){return new o(this.minX,this.minY,this.maxX,this.maxY)}}}),o),s.MakeIntersect_=function(t,e,n,i,r){for(var o=n,u=[],l=a.iter(a.range(0,5,!1));!l.done;l.next())u.push(new p.TheoPoint(0,0));if(s.TheoRect.RectanglesIntersect(t,e,o,u,r))return o;var d=e.transformRect(t),m=a.clone(new s.MutableRect(o.minX,o.minY,o.maxX,o.maxY));r(m.minX,d.maxX)||(m.minX=d.maxX,m.minX=s.local_next_after(m.minX,-1/0,i)),r(d.minX,m.maxX)||(m.maxX=d.minX,m.maxX=s.local_next_after(m.maxX,1/0,i)),r(m.minY,d.maxY)||(m.minY=d.maxY,m.minY=s.local_next_after(m.minY,-1/0,i)),r(d.minY,m.maxY)||(m.maxY=d.minY,m.maxY=s.local_next_after(m.maxY,1/0,i));var T=function(t){return t.evalUUVV(-1e-9,1+1e-9,-1e-9,1+1e-9)};if(s.TheoRect.PointInCommon_(t,e,T(m.asTheoRect),r))return m.asTheoRect;h.CoreAssert.isTrue(d.midX!=m.midX),h.CoreAssert.isTrue(d.midY!=m.midY),o=m.asTheoRect;for(var P=function(t,e){return new p.TheoPoint(t,e)},_=function(n){return e.transformPoint(t.eval(n))},g=function(t){return o.eval(t)},v=function(t){return c.MathUtils.minDouble(c.MathUtils.maxDouble(0,t),1)},x=[P(0,0),P(1,0),P(1,1),P(0,1),P(0,0)],R=function(t,e){for(var n=1/0,i=[P(0,0),P(0,0)],r=a.iter(a.range(0,4,!1));!r.done;r.next())for(var o=r.value,s=g(x[o]),u=a.iter(a.range(0,4,!1));!u.done;u.next()){var l=u.value,c=new f.TheoLine(_(x[l]),_(x[l+1])),d=v(c.locate(s)),m=p._minus_TheoPoint_TheoPoint(c.eval(d),s),T=m.dotProduct(m);T<n&&(n=T,i=[x[o],x[l]])}return h.CoreAssert.isTrue(n<1/0),i}(),y=R[0],C=R[1],b=g(y),w=P(1,1).subtract(y),Y=g(w),O=g(P(y.x,w.y)),E=g(P(w.x,y.y)),A=1/0,N=b,S=a.iter(a.range(0,4,!1));!S.done;S.next()){var D=S.value;if(x[D]!=P(1,1).subtract(C)){var X=new f.TheoLine(_(x[D]),_(x[D+1])),M=function(t){var e=s.segment_intersection(t,b,X.p1,X.p2),n=e[0],i=e[1];if(n>=1&&i>=0&&i<=1){var r=X.eval(v(i)),o=s.TheoRect.fromPoints(r,Y).area;o<A&&(A=o,N=r)}};M(O),M(E)}}if(i>0){var I=s.local_next_after(N.x,0==w.x?1/0:-1/0,i),k=s.local_next_after(N.y,0==w.y?1/0:-1/0,i);N=new p.TheoPoint(I,k)}var L=s.TheoRect.fromPoints(Y,N);return h.CoreAssert.isTrue(s.rect_contains_rect(T(L),o,function(t,e){return t<=e})),L}},114:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(22);r.PROPERTY_SPARK_ELEMENTID="sparkElementID",r.PROPERTY_SPARK_ROLES="sparkRoles",r.SHADE_ROLE_PREFIX="shade-",r.TheoColor=(i=function(){},o.defineClass({name:"TheoColor",ctor:i,superName:"CoreObject",statics:{SPARK_COLOR_ROLE_PRIMARY:{get:function(){return"base-color"}},SPARK_COLOR_ROLE_SECONDARY:{get:function(){return"color"}},SPARK_COLOR_ROLE_SHADE0:{get:function(){return"shade-0"}},SPARK_COLOR_ROLE_SHADE1:{get:function(){return"shade-1"}},SPARK_COLOR_ROLE_SHADE2:{get:function(){return"shade-2"}},SPARK_COLOR_ROLE_SHADE3:{get:function(){return"shade-3"}},SPARK_COLOR_ROLE_SHADE4:{get:function(){return"shade-4"}},SPARK_COLOR_ROLE_SHADE5:{get:function(){return"shade-5"}},SPARK_COLOR_ROLE_SHADE6:{get:function(){return"shade-6"}},decodeJson:function(t){if(null==t)return null;var e=o.as(t,["Dictionary","String","Any"]);if(null==e)return s.CoreAssert.fail("SolidColor.decodeJson: object passed isn't a dictionary"),null;var n=a.SolidColor.decodeJson(t);if(null!=n){var h=o.as(e[r.PROPERTY_SPARK_ELEMENTID],"String"),u=o.clone(o.as(e[r.PROPERTY_SPARK_ROLES],["Array","String"]));return i.init_5344(n,h,o.clone(u))}return null}},props:{init_5344:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.rgbColor=t,this.sparkElementID=e,this.sparkRoles=o.clone(n)},init_bb45:function(t){var e=new a.SolidColor(t.red/255,t.green/255,t.blue/255,t.alpha);this.rgbColor=e,this.sparkElementID=t.id,this.sparkRoles=o.clone(t.acRoles)},getBrandkitShadeRole:function(){if(null==this.sparkRoles)return null;for(var t=o.iter(this.sparkRoles);!t.done;t.next()){var e=t.value;switch(e){case"shade-0":case"shade-1":case"shade-2":case"shade-3":case"shade-4":case"shade-5":case"shade-6":return e;default:continue}}return null},isBrandkitPrimaryColor:function(){if(null==this.sparkRoles)return!1;for(var t=o.iter(this.sparkRoles);!t.done;t.next())switch(t.value){case"base-color":return!0;default:continue}return!1},isBrandkitSecondaryColor:function(){if(null==this.sparkRoles)return!1;for(var t=o.iter(this.sparkRoles);!t.done;t.next())switch(t.value){case"color":return!0;default:continue}return!1},isBrandkitShade:function(){if(null==this.sparkRoles)return!1;for(var t=o.iter(this.sparkRoles);!t.done;t.next())switch(t.value){case"shade-0":case"shade-1":case"shade-2":case"shade-3":case"shade-4":case"shade-5":case"shade-6":return!0;default:continue}return!1},isBrandkitColor:function(){return null!=this.sparkRoles||null!=this.sparkElementID},encodeJson:function(){var t=this.rgbColor.encodeJson();return null!=this.sparkElementID&&(t[r.PROPERTY_SPARK_ELEMENTID]=this.sparkElementID),null!=this.sparkRoles&&(t[r.PROPERTY_SPARK_ROLES]=o.clone(this.sparkRoles)),t},asString:{get:function(){var t;return"Color: "+this.rgbColor.asString+", id: "+((t=this.sparkElementID)||null!=t?t:"")}},isEqual:function(t){var e;return!!(e=o.as(t,i))&&o.eq(a._equality_SolidColor_SolidColor,e.rgbColor,this.rgbColor)&&e.sparkElementID==this.sparkElementID}}}),i),r._equality_TheoColor_TheoColor=function(t,e){return t.isEqual(e)}},125:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(4),h=n(15);r.TimingFunctionType=o.defineEnum("TimingFunctionType",{Linear:"Linear",EaseIn:"EaseIn",EaseOut:"EaseOut",EaseInOut:"EaseInOut",EaseOutExpo:"EaseOutExpo",Step:"Step",Step0:"Step0",Step1:"Step1"}),r.TheoTimingFunction=(i=function(t){this.timingType_=t,this.lookup_={},t==r.TimingFunctionType.Linear?this.points=[new h.TheoPoint(0,0),new h.TheoPoint(1,1)]:t==r.TimingFunctionType.Step||t==r.TimingFunctionType.Step0||t==r.TimingFunctionType.Step1?this.points=[new h.TheoPoint(.5,0)]:t==r.TimingFunctionType.EaseIn?this.points=[new h.TheoPoint(.42,0),new h.TheoPoint(1,1)]:t==r.TimingFunctionType.EaseOut?this.points=[new h.TheoPoint(0,0),new h.TheoPoint(.58,1)]:t==r.TimingFunctionType.EaseOutExpo?this.points=[new h.TheoPoint(.215,.61),new h.TheoPoint(.355,1)]:t==r.TimingFunctionType.EaseInOut?this.points=[new h.TheoPoint(.42,0),new h.TheoPoint(.58,1)]:(this.points=[],s.CoreAssert.fail("Invalid timing function")),a.CoreObject.call(this)},o.defineClass({name:"TheoTimingFunction",ctor:i,superName:"CoreObject",props:{evalT:function(t){var e=this.points[0].multiply(3*(1-t)*(1-t)*t),n=this.points[1].multiply(3*(1-t)*t*t),i=new h.TheoPoint(1,1).multiply(t*t*t);return e.add(n).add(i)},evalX:function(t,e){if(void 0===e&&(e=.001),t<0||t>1)return s.CoreAssert.fail("TheoRect.fromArray: Array does not have 4 elements"),t;if(this.timingType_==r.TimingFunctionType.Step)return this.points[0].x>t?0:1;if(this.timingType_==r.TimingFunctionType.Step0)return 0==this.points[0].x?0:1;if(this.timingType_==r.TimingFunctionType.Step1)return 1==this.points[0].x?1:0;var n;if(null!=(n=this.lookup_[t]))return n;var i=0,o=1,a=.5,h=this.evalT(i);if(Math.abs(h.x-t)<e)return this.lookup_[t]=h.y,h.y;var u=this.evalT(o);if(Math.abs(u.x-t)<e)return this.lookup_[t]=u.y,u.y;for(var l=this.evalT(a);Math.abs(l.x-t)>e;)t>l.x?i=a:o=a,a=(i+o)/2,l=this.evalT(a);return this.lookup_[t]=l.y,l.y}}}),i)},15:function(t,e,n){var i,r,o=e,s=n(0),a=n(1),h=n(4);o.TheoPoint=(i=function(t,e){this.x=t,this.y=e,h.CoreObject.call(this)},r={},s.defineClass({name:"TheoPoint",ctor:i,superName:"CoreObject",statics:{ZERO:{get:function(){return void 0===r.ZERO&&(r.ZERO=new i(0,0)),r.ZERO}},INVALID:{get:function(){return void 0===r.INVALID&&(r.INVALID=new i(NaN,NaN)),r.INVALID}},decodeJson:function(t){if(null==t)return null;var e=s.as(t,["Array","Any"]);if(null==e||2!=e.length)return a.CoreAssert.fail("TheoPoint.decodeJson: data is not an array with 2 elements"),null;var n=s.as(e[0],"Double"),r=s.as(e[1],"Double");return null==n||null==r?(a.CoreAssert.fail("Point.decodeJson: data is not an array with 2 numbers"),null):new i(n,r)}},props:{finite:{get:function(){return isFinite(this.x)&&isFinite(this.y)}},isValidPoint:{get:function(){return!isNaN(this.x)&&!isNaN(this.y)}},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyPoint:function(t){return new i(this.x*t.x,this.y*t.y)},divide:function(t){return new i(1*this.x/t,1*this.y/t)},dividePoint:function(t){return new i(this.x/t.x,this.y/t.y)},isEqual:function(t){var e;return!!(e=s.as(t,i))&&this.equal(e)},equal:function(t){return this.x==t.x&&this.y==t.y},add:function(t){return new i(this.x+t.x,this.y+t.y)},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},distanceTo:function(t){var e=this.subtract(t);return Math.sqrt(e.dotProduct(e))},dotProduct:function(t){return this.x*t.x+this.y*t.y},crossProduct:function(t){return this.x*t.y-this.y*t.x},length:function(){return this.distanceTo(i.ZERO)},invert:function(){return new i(-this.x,-this.y)},interpolate:function(t,e){return new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},encode:function(){return a.CoreAssert.fail("TheoPoint: Use encodeJson(), not encode()"),[]},description:{get:function(){return"("+this.x+", "+this.y+")"}}}}),i),o._minus_TheoPoint_TheoPoint=function(t,e){return t.subtract(e)},o._plus_TheoPoint_TheoPoint=function(t,e){return t.add(e)},o._negate_TheoPoint=function(t){return t.invert()},o._asterisk_Double_TheoPoint=function(t,e){return e.multiply(t)},o._slash_TheoPoint_Double=function(t,e){return t.divide(e)}},19:function(t,e,n){var i,r,o=e,s=n(0),a=n(1),h=n(234),u=n(79),l=n(4),c=n(22);o.ColorRole=s.defineEnum("ColorRole",{None:0,FieldPrimary:1,FieldSecondary:2,Border:3}),o.ColorTableOwner=s.defineProtocol("ColorTableOwner",{colorTableSupportsRole:"(ColorRole) -> Boolean",colorTableBeforeChanged:"() -> Void",colorTableAfterChanged:"() -> Void"}),o.ColorTableEntry=(i=function(t,e,n){this.colorID=t,this.color=e},s.defineClass({name:"ColorTableEntry",ctor:i}),i),o.ColorTable=(r=function(){this.lookup_={}},s.defineClass({name:"ColorTable",ctor:r,superName:"CoreObject",statics:{PROPERTY_ENTRIES:"entries",PROPERTY_ENTRY_ROLE:"role",PROPERTY_ENTRY_COLORID:"color-id",PROPERTY_ENTRY_COLOR:"color",PROPERTY_ENTRY_THEME_INDEX:"theme-index",NAME_FIELD_PRIMARY:"field-primary",NAME_FIELD_SECONDARY:"field-secondary",NAME_BORDER:"border",createWithOneSolidColor:function(t){var e=r.init_d41d();return e.setColor(o.ColorRole.FieldPrimary,t),e},createDefault:function(){var t=r.init_d41d();return t.setColorId(o.ColorRole.FieldPrimary,u.ColorLibraryController.BLACK_KEY),t},roleToString:function(t){switch(t){case 1:return r.NAME_FIELD_PRIMARY;case 2:return r.NAME_FIELD_SECONDARY;case 3:return r.NAME_BORDER;default:return""}},stringToRole:function(t){switch(t){case"field-primary":return o.ColorRole.FieldPrimary;case"field-secondary":return o.ColorRole.FieldSecondary;case"border":return o.ColorRole.Border;default:return o.ColorRole.None}},encodeRole:function(t){return t==o.ColorRole.None?null:r.roleToString(t)},decodeRole:function(t){return null==t?o.ColorRole.None:null!=(e=s.as(t,"String"))?r.stringToRole(e):(a.CoreAssert.warning("ColorTable.decodeRole: input is not a string"),o.ColorRole.None);var e},decodeJson:function(t){if(null==t)return null;var e,n,i=null;if(e=s.as(t,["Dictionary","String","Any"]))if(i=r.init_d41d(),n=s.as(e[r.PROPERTY_ENTRIES],["Array",["Dictionary","String","Any"]]))for(var h=s.iter(n);!h.done;h.next()){var u,l,f,p=h.value,d=r.decodeRole(s.as(p[r.PROPERTY_ENTRY_ROLE],"AnyObject"));d!=o.ColorRole.None?(null!=(u=s.as(p[r.PROPERTY_ENTRY_COLORID],"String"))?i.setColorIDs([{key:d,value:u}]):(l=c.SolidColor.decodeJson(s.as(p[r.PROPERTY_ENTRY_COLOR],"AnyObject")))?i.setColor(d,l):a.CoreAssert.warning("ColorTable.decodeJson: couldn't decode color"),null!=(f=s.as(p[r.PROPERTY_ENTRY_THEME_INDEX],"Int"))&&i.setThemeIndex(d,f)):a.CoreAssert.warning("ColorTable.decodeJson: couldn't decode role")}else a.CoreAssert.warning("ColorTable.decodeJson: entries not defined or not a dict");else a.CoreAssert.fail("ColorTable.decodeJson: expected a dictionary");return i},_implements:function(t){return"TheoMessageSubscriber"==t}},props:{init_d41d:function(){},init_25f6:function(t){l.CoreObject.call(this),this.setColorIDs(s.clone(t))},owner:{get:function(){return this.owner_},set:function(t){this.owner_=t}},library:{get:function(){return this.library_},set:function(t){var e=this;this.library_=t,s.opt(this.librarySubscription_,function(t){return t.unsubscribe()}),this.librarySubscription_=s.opt(this.library_,function(t){return t.subscribe(e,h.ColorLibraryChangedMessage.TYPE)})}},setColorLibraryWithoutSubscribing:function(t){this.library_=t,a.CoreAssert.isTrue(null==this.librarySubscription_)},onMessage:function(t){var e;if(e=s.as(t,h.ColorLibraryChangedMessage)){for(var n=!1,i=s.iter(this.lookup_,!0);!i.done;i.next()){var r=i.value;if(null!=r.colorID&&(n=e.affectedColorIDs.includes(r.colorID)))break}n&&(e.isBefore?s.opt(this.owner_,function(t){return t.colorTableBeforeChanged()}):s.opt(this.owner_,function(t){return t.colorTableAfterChanged()}))}},hasReferencedColorsFromColorLibrary:function(){var t,e=o.ColorRole.FieldPrimary;return!(!(t=this.lookup_[e])||null==t.colorID)},color:function(t){var e,n;return(e=this.lookup_[t])?null!=(n=e.colorID)?s.opt(s.opt(this.library_,function(t){return t.color(n)}),function(t){return t.rgbColor}):e.color:null},theoColor:function(t){var e,n;return(e=this.lookup_[t])?null!=(n=e.colorID)?s.opt(this.library_,function(t){return t.color(n)}):(a.CoreAssert.isTrue(!1,"Can't look up a theo color this way"),null):null},colorID:function(t){return s.opt(this.lookup_[t],function(t){return t.colorID})},themeIndex:function(t){return s.opt(this.lookup_[t],function(t){return t.themeIndex})},supportsRole:function(t){return null==this.owner||this.owner.colorTableSupportsRole(t)},fieldPrimary:{get:function(){return this.color(o.ColorRole.FieldPrimary)},set:function(t){this.setColor(o.ColorRole.FieldPrimary,t)}},fieldSecondary:{get:function(){return this.color(o.ColorRole.FieldSecondary)},set:function(t){this.setColor(o.ColorRole.FieldSecondary,t)}},border:{get:function(){return this.color(o.ColorRole.Border)},set:function(t){this.setColor(o.ColorRole.Border,t)}},forEachColor:function(t){for(var e=this.library,n=s.iter(this.lookup_,!0);!n.done;n.next()){var i,r=n.key,o=n.value;null!=(i=o.colorID)?t(r,i,s.opt(s.opt(e,function(t){return t.color(i)}),function(t){return t.rgbColor})):t(r,null,o.color)}},asString:{get:function(){for(var t="",e=s.iter(this.lookup_,!0);!e.done;e.next()){var n,i=e.key,r=e.value,a=r.color;null!=(n=r.colorID)&&(a=s.opt(s.opt(this.library,function(t){return t.color(n)}),function(t){return t.rgbColor}));var h="";null!=a&&(h+="Role: "+i+"\n",h+="Color: "+a.asString+"\n"),i==o.ColorRole.FieldPrimary?t=h+t:t+=h}return t}},equalTo:function(t){if(this.count!=t.count)return!1;for(var e=s.iter(this.lookup_,!0);!e.done;e.next()){var n,i=e.key,r=e.value;if(!(n=t.lookup_[i]))return!1;if(null!=n.colorID){if(n.colorID!=r.colorID)return!1}else if(!s.eq(c._equality_SolidColor_SolidColor,n.color,r.color))return!1;if(n.themeIndex!=r.themeIndex)return!1}return!0},isInDefaultState:{get:function(){return 0==s.count(this.lookup_)}},count:{get:function(){return s.count(this.lookup_)}},clone:function(){var t=r.init_d41d();return t.match(this),t},match:function(t){s.opt(this.owner,function(t){return t.colorTableBeforeChanged()}),this.lookup_={};for(var e=s.iter(t.lookup_,!0);!e.done;e.next()){var n=e.key,i=e.value;this.lookup_[n]=new o.ColorTableEntry(i.colorID,i.color,i.themeIndex)}s.opt(this.owner,function(t){return t.colorTableAfterChanged()})},setColorId:function(t,e){this.setColorIDs([{key:t,value:e}])},setColorIDs:function(t){for(var e=!1,n=s.iter(t);!n.done;n.next()){var i=n.value,r=i.key,h=i.value,u=this.lookup_[r];null==h?null!=u&&(e||(s.opt(this.owner,function(t){return t.colorTableBeforeChanged()}),e=!0),s.removeKey(this.lookup_,r)):this.supportsRole(r)?null!=u&&u.colorID==h||(e||(s.opt(this.owner,function(t){return t.colorTableBeforeChanged()}),e=!0),null==u?this.lookup_[r]=new o.ColorTableEntry(h,null,null):(u.colorID=h,u.color=null)):a.CoreAssert.warning("Attempt to set a color role on a table that doesn't support that role.")}e&&s.opt(this.owner,function(t){return t.colorTableAfterChanged()})},setColor:function(t,e){var n=this.lookup_[t];null==e?null!=n&&(s.opt(this.owner,function(t){return t.colorTableBeforeChanged()}),s.removeKey(this.lookup_,t),s.opt(this.owner,function(t){return t.colorTableAfterChanged()})):this.supportsRole(t)?null!=(n=this.lookup_[t])&&s.eq(c._equality_SolidColor_SolidColor,n.color,e)||(s.opt(this.owner,function(t){return t.colorTableBeforeChanged()}),null==n?this.lookup_[t]=new o.ColorTableEntry(null,e,null):(n.colorID=null,n.color=e),s.opt(this.owner,function(t){return t.colorTableAfterChanged()})):a.CoreAssert.warning("Attempt to set a color role on a table that doesn't support that role.")},setBlendedColor:function(t,e,n,i){if(e.isEqual(n))this.setColor(t,e);else{var r=e.blend(n,i);this.setColor(t,r)}},setThemeIndex:function(t,e){var n;this.supportsRole(t)?(n=this.lookup_[t])?n.themeIndex=e:this.lookup_[t]=new o.ColorTableEntry(null,null,e):a.CoreAssert.warning("Attempt to set a theme index on a table that doesn't support that role.")},setColorAndIndex:function(t,e,n){this.setColor(t,e),this.setThemeIndex(t,n)},encodeJson:function(){for(var t={},e=[],n=s.iter(this.lookup_,!0);!n.done;n.next()){var i=n.key,o=n.value,a={};a[r.PROPERTY_ENTRY_ROLE]=r.encodeRole(i),null!=o.color&&(a[r.PROPERTY_ENTRY_COLOR]=o.color.encodeJson()),null!=o.colorID&&(a[r.PROPERTY_ENTRY_COLORID]=o.colorID),null!=o.themeIndex&&(a[r.PROPERTY_ENTRY_THEME_INDEX]=o.themeIndex),e.push(a)}return t[r.PROPERTY_ENTRIES]=e,t}}}),r)},205:function(t,e,n){var i,r,o,s,a=e,h=n(0),u=n(1),l=n(4),c=n(19),f=n(328),p=n(22),d=n(81),m=n(10);a.TheoArtworkRenderer=h.defineProtocol("TheoArtworkRenderer",{beginGroup:"() -> Void",endGroup:"() -> Void",beginClipGroup:"(TheoPath) -> Void",endClipGroup:"() -> Void",fill:"(ColorRole, SolidColor) -> Void",stroke:"(ColorRole, SolidColor, Double) -> Void"}),a.PROPERTY_UID="immutable-id",a.PROPERTY_TYPE="type",a.PROPERTY_PATH="path",a.PROPERTY_PATHS="paths",a.PROPERTY_FILLCOLORROLE="fill-color-role",a.PROPERTY_STROKECOLORROLE="stroke-color-role",a.PROPERTY_FILLCOLOR="fill-color",a.PROPERTY_STROKECOLOR="stroke-color",a.PROPERTY_STROKEWIDTH="stroke-width",a.PROPERTY_NODES="stroke-width",a.PROPERTY_OVERRIDE_BOUNDS="override-bounds",a.TheoArtworkNode=(i=function(t){this.type=t,l.CoreObject.call(this)},h.defineClass({name:"TheoArtworkNode",ctor:i,superName:"CoreObject",statics:{decodeJson:function(t){return null==t?null:(e=h.as(t,["Dictionary","String","Any"]))&&null!=(n=h.as(e[a.PROPERTY_TYPE],"String"))?(n==a.TheoArtworkShape.TYPE?i=new a.TheoArtworkShape:n==a.TheoArtworkGroup.TYPE?i=new a.TheoArtworkGroup:n==a.TheoArtworkClipGroup.TYPE&&(i=new a.TheoArtworkClipGroup),null!=i&&i.decodeJsonSelf(e),i):null;var e,n,i}},props:{bounds:{get:function(){return null}},render:function(t){},forEachChild:function(t){},decodeJsonSelf:function(t){this.uid=h.as(t[a.PROPERTY_UID],"String")},encodeJson:function(){var t={};return t[a.PROPERTY_TYPE]=this.type,null!=this.uid&&(t[a.PROPERTY_UID]=this.uid),t},getHash:function(){return"getHash(TODO)"},clone:function(){return new i("invalid clone")},applySlicing:function(t,e,n,i,r){return this}}}),i),a.TheoArtworkShape=(r=function(){this.paths_=[],this.fillColorRole_=c.ColorRole.None,this.strokeColorRole_=c.ColorRole.None,this.fillColor_=null,this.strokeColor_=null,this.strokeWidth_=0,this.overrideBounds_=null,a.TheoArtworkNode.call(this,r.TYPE)},h.defineClass({name:"TheoArtworkShape",ctor:r,superName:"TheoArtworkNode",statics:{TYPE:{get:function(){return"shape"}},fromPath:function(t){var e=new r;return e.paths=[t],e.fillColorRole=c.ColorRole.FieldPrimary,e},decodeJson:function(t){var e;return null==t||((e=h.as(t,["Dictionary","String","Any"]))?(new r).decodeJsonSelf(e):u.CoreAssert.fail("TheoArtworkShape.decodeJson: data not a dictionary")),null}},props:{fillColorRole:{get:function(){return this.fillColorRole_},set:function(t){this.fillColorRole_=t}},fillColor:{get:function(){return this.fillColor_},set:function(t){this.fillColor_=t}},strokeColorRole:{get:function(){return this.strokeColorRole_},set:function(t){this.strokeColorRole_=t}},strokeColor:{get:function(){return this.strokeColor_},set:function(t){this.strokeColor_=t}},strokeWidth:{get:function(){return this.strokeWidth_},set:function(t){this.strokeWidth_=t}},paths:{get:function(){return this.paths_},set:function(t){this.paths_=h.clone(t)}},overrideBounds:{get:function(){return this.overrideBounds_},set:function(t){this.overrideBounds_=t}},bounds:{get:function(){if(null!=this.overrideBounds_)return this.overrideBounds_;if(0==this.paths_.length)return m.TheoRect.Zero;for(var t=this.paths_[0].bounds,e=h.iter(this.paths_);!e.done;e.next()){var n=e.value;t=t.unionWith(n.bounds)}return t}},applySlicing:function(t,e,n,i,r){var o=this.clone();if(e!=t&&this.paths_.length>0){for(var s=!0,a=this.paths_[0].pathFillType,u=this.paths_[0].pathStrokeWeight,l=this.paths_[0].pathEndcapType,c=this.paths_[0].pathJoinType,p=this.paths_[0].pathMiterLimit,m=h.iter(this.paths_);!m.done;m.next())if((x=m.value).pathFillType!=a||x.pathStrokeWeight!=u||x.pathEndcapType!=l||x.pathJoinType!=c||x.pathMiterLimit!=p){s=!1;break}if(s){for(var T=d.TheoArbitraryPath.ArbitraryPathWithOptions(a,l,c,u*i,p),P=new f.NineSlicingFilter(T,n||t,t,e,i,r),_=h.iter(this.paths_);!_.done;_.next())(x=_.value).render(P);o.paths=[T.simplestForm]}else{for(var g=[],v=h.iter(this.paths_);!v.done;v.next()){var x=v.value;T=d.TheoArbitraryPath.ArbitraryPathWithOptions(x.pathFillType,x.pathEndcapType,x.pathJoinType,x.pathStrokeWeight*i,x.pathMiterLimit),P=new f.NineSlicingFilter(T,n||t,t,e,i,r),x.render(P),g.push(T.simplestForm)}o.paths=h.clone(g)}}return o},render:function(t){for(var e=h.iter(this.paths_);!e.done;e.next()){var n=e.value;if(n.render(t),n.pathFillType!=d.TheoPath.PATHFILL_NONE)t.fill(this.fillColorRole_!=c.ColorRole.None?this.fillColorRole_:c.ColorRole.FieldPrimary,this.fillColor_);else if(n.pathStrokeWeight>0){var i=null!=this.strokeColor_?this.strokeColor_:this.fillColor_,r=this.strokeColorRole_!=c.ColorRole.None?this.strokeColorRole_:c.ColorRole.FieldPrimary;t.stroke(r,i,n.pathStrokeWeight)}}},decodeJsonSelf:function(t){var e,n,i;if(n=h.as(t[a.PROPERTY_PATHS],["Array",["Dictionary","String","Any"]])){this.paths_.splice(0);for(var r=h.iter(n);!r.done;r.next()){var o,s=r.value;(o=d.TheoPath.decodeJson(s))?this.paths_.push(o):u.CoreAssert.fail("TheoArtworkShape.decodeJsonSelf: failed to decode a path")}}else(i=d.TheoPath.decodeJson(h.as(t[a.PROPERTY_PATH],"AnyObject")))&&(this.paths_.splice(0),this.paths_.push(i));this.fillColorRole_=c.ColorTable.decodeRole(h.as(t[a.PROPERTY_FILLCOLOR],"AnyObject")),this.strokeColorRole_=c.ColorTable.decodeRole(h.as(t[a.PROPERTY_STROKECOLOR],"AnyObject")),this.fillColor_=p.SolidColor.decodeJson(h.as(t[a.PROPERTY_FILLCOLOR],"AnyObject")),this.strokeColor_=p.SolidColor.decodeJson(h.as(t[a.PROPERTY_STROKECOLOR],"AnyObject")),this.strokeWidth_=(e=h.as(t[a.PROPERTY_STROKEWIDTH],"Double"))||null!=e?e:0,this.overrideBounds_=m.TheoRect.decodeJson(h.as(t[a.PROPERTY_OVERRIDE_BOUNDS],"AnyObject"))},encodeJson:function(){for(var t=a.TheoArtworkNode.prototype.encodeJson.call(this),e=[],n=h.iter(this.paths_);!n.done;n.next()){var i=n.value;e.push(i.encodeJson())}return t[a.PROPERTY_PATHS]=e,this.fillColorRole_!=c.ColorRole.None&&(t[a.PROPERTY_FILLCOLORROLE]=c.ColorTable.encodeRole(this.fillColorRole_)),this.strokeColorRole_!=c.ColorRole.None&&(t[a.PROPERTY_STROKECOLORROLE]=c.ColorTable.encodeRole(this.strokeColorRole_)),null!=this.fillColor_&&(t[a.PROPERTY_FILLCOLOR]=this.fillColor_.encodeJson()),null!=this.strokeColor_&&(t[a.PROPERTY_STROKECOLOR]=this.strokeColor_.encodeJson()),this.strokeWidth_>0&&(t[a.PROPERTY_STROKEWIDTH]=this.strokeWidth),null!=this.overrideBounds_&&(t[a.PROPERTY_OVERRIDE_BOUNDS]=this.overrideBounds_.encodeJson()),t},clone:function(){var t=new r;return t.paths=h.clone(this.paths_),t.fillColorRole=this.fillColorRole_,t.strokeColorRole=this.strokeColorRole_,t.fillColor=this.fillColor_,t.strokeColor=this.strokeColor_,t.strokeWidth=this.strokeWidth,t.overrideBounds=this.overrideBounds,t}}}),r),a.TheoArtworkGroup=(o=function(t){this.children_=[],void 0===t&&(t=o.TYPE),a.TheoArtworkNode.call(this,t)},h.defineClass({name:"TheoArtworkGroup",ctor:o,superName:"TheoArtworkNode",statics:{TYPE:{get:function(){return"group"}},decodeJson:function(t){var e;return null==t||((e=h.as(t,["Dictionary","String","Any"]))?(new o).decodeJsonSelf(e):u.CoreAssert.fail("TheoArtworkGroup: data not a dictionary")),null}},props:{appendChild:function(t){this.children_.push(t),this.bounds_=null},insertChild:function(t,e){this.children_.splice(e,0,t),this.bounds_=null},removeChild:function(t){h.remove(this.children_,t),this.bounds_=null},clear:function(){this.children_.splice(0),this.bounds_=null},childCount:{get:function(){return this.children_.length}},childAt:function(t){return this.children_[t]},applySlicing:function(t,e,n,i,r){for(var s=new o,a=h.iter(this.children_);!a.done;a.next()){var u=a.value;s.children_.push(u.applySlicing(t,e,n,i,r))}return s},forEachChild:function(t){for(var e=h.iter(this.children_);!e.done;e.next())t(e.value)},bounds:{get:function(){if(null==this.bounds_)for(var t=h.iter(this.children_);!t.done;t.next()){var e;(e=t.value.bounds)&&(this.bounds_=null==this.bounds_?e:this.bounds_.unionWith(e))}return this.bounds_}},render:function(t){t.beginGroup();for(var e=h.iter(this.children_);!e.done;e.next())e.value.render(t);t.endGroup()},decodeJsonSelf:function(t){var e;if(this.children_.splice(0),e=h.as(t[a.PROPERTY_NODES],["Array","Any"]))for(var n=h.iter(e);!n.done;n.next()){var i,r=n.value;(i=a.TheoArtworkNode.decodeJson(h.as(r,"AnyObject")))&&this.children_.push(i)}},encodeJson:function(){var t=a.TheoArtworkNode.prototype.encodeJson.call(this),e=[];t[a.PROPERTY_NODES]=e;for(var n=h.iter(this.children_);!n.done;n.next()){var i=n.value;e.push(i.encodeJson())}return t},clone:function(){for(var t=new o,e=h.iter(this.children_);!e.done;e.next()){var n=e.value;t.children_.push(n.clone())}return t}}}),o),a.TheoArtworkClipGroup=(s=function(){this.path_=d.TheoPath.EMPTY,a.TheoArtworkGroup.call(this,s.TYPE)},h.defineClass({name:"TheoArtworkClipGroup",ctor:s,superName:"TheoArtworkGroup",statics:{TYPE:{get:function(){return"clip-group"}},decodeJson:function(t){var e;if(null==t);else if(e=h.as(t,["Dictionary","String","Any"])){var n,i,r=new s;if((n=d.TheoPath.decodeJson(h.as(e[a.PROPERTY_PATH],"AnyObject")))&&(r.path=n),i=h.as(e[a.PROPERTY_NODES],["Array","Any"]))for(var o=h.iter(i);!o.done;o.next()){var l,c=o.value;(l=a.TheoArtworkNode.decodeJson(h.as(c,"AnyObject")))&&r.appendChild(l)}}else u.CoreAssert.fail("TheoArtworkClipGroup: data not a dictionary");return null}},props:{path:{get:function(){return this.path_},set:function(t){this.path_=t}},applySlicing:function(t,e,n,i,r){var o=new s;if(e!=t){var a=d.TheoArbitraryPath.init_d41d(),h=new f.NineSlicingFilter(a,n||t,t,e,i,r);this.path_.render(h),o.path=a.simplestForm}return this.forEachChild(function(s){return o.appendChild(s.applySlicing(t,e,n,i,r))}),o},bounds:{get:function(){return this.path_.bounds}},render:function(t){t.beginClipGroup(this.path_),this.forEachChild(function(e){return e.render(t)}),t.endClipGroup()},decodeJsonSelf:function(t){var e;a.TheoArtworkGroup.prototype.decodeJsonSelf.call(this,t),(e=d.TheoPath.decodeJson(h.as(t[a.PROPERTY_PATH],"AnyObject")))&&(this.path_=e)},encodeJson:function(){var t=a.TheoArtworkGroup.prototype.encodeJson.call(this);t[a.PROPERTY_PATH]=this.path_.encodeJson();var e=[];return t[a.PROPERTY_NODES]=e,this.forEachChild(function(t){return e.push(t.encodeJson())}),t},clone:function(){var t=new s;return t.path=this.path_,this.forEachChild(function(e){return t.appendChild(e.clone())}),t}}}),s)},22:function(t,e,n){var i,r,o=e,s=n(0),a=n(1),h=n(4),u=n(235),l=n(302),c=n(37),f=n(303);o.SolidColor=(i=function(t,e,n,i){a.CoreAssert.isTrue(t>=-.01&&t<=1.01),a.CoreAssert.isTrue(e>=-.01&&e<=1.01),a.CoreAssert.isTrue(n>=-.01&&n<=1.01),a.CoreAssert.isTrue(i>=0&&i<=1),this.red=t,this.green=e,this.blue=n,this.alpha=i,h.CoreObject.call(this)},r={},s.defineClass({name:"SolidColor",ctor:i,superName:"CoreObject",statics:{BLACK:{get:function(){return void 0===r.BLACK&&(r.BLACK=new i(0,0,0,1)),r.BLACK}},WHITE:{get:function(){return void 0===r.WHITE&&(r.WHITE=new i(1,1,1,1)),r.WHITE}},ALIGNMENT_FORMA:{get:function(){return void 0===r.ALIGNMENT_FORMA&&(r.ALIGNMENT_FORMA=new i(0,1,1,1)),r.ALIGNMENT_FORMA}},ALIGNMENT_ROOT:{get:function(){return void 0===r.ALIGNMENT_ROOT&&(r.ALIGNMENT_ROOT=new i(1,0,1,1)),r.ALIGNMENT_ROOT}},ALIGNMENT_ROTATION:{get:function(){return void 0===r.ALIGNMENT_ROTATION&&(r.ALIGNMENT_ROTATION=new i(1,78/255,79/255,1)),r.ALIGNMENT_ROTATION}},fromAlphaOverride:function(t,e){return new i(t.red,t.green,t.blue,e)},decodeJson:function(t){if(null==t)return null;var e=s.as(t,["Dictionary","String","Any"]);if(null==e)return a.CoreAssert.fail("SolidColor.decodeJson: object passed isn't a dictionary"),null;var n=s.as(e.red,"Double"),r=s.as(e.green,"Double"),o=s.as(e.blue,"Double"),h=s.as(e.alpha,"Double");return null==n||null==r||null==o||null==h?(a.CoreAssert.fail("SolidColor.decodeJson: object passed is missing one or more red/green/blue/alpha parameters"),null):new i(n,r,o,h)}},props:{blend:function(t,e){return new i(t.red*e+this.red*(1-e),t.green*e+this.green*(1-e),t.blue*e+this.blue*(1-e),this.alpha)},interpolate:function(t,e){return new i(t.red*e+this.red*(1-e),t.green*e+this.green*(1-e),t.blue*e+this.blue*(1-e),t.alpha*e+this.alpha*(1-e))},withAlphaOf:function(t){return t==this.alpha?this:new i(this.red,this.green,this.blue,t)},darkenForTint:function(){var t=this.asLAB;return new l.LABColor(Math.max(5,t.l-25),t.a,t.b,this.alpha).asRGB},lightenForTint:function(){var t=this.asLAB;return new l.LABColor(Math.min(95,t.l+25),t.a,t.b,this.alpha).asRGB},distanceTo:function(t){return this.asLAB.distanceTo(t.asLAB)},rgbDistanceTo:function(t){return c.MathUtils.absDouble(this.red-t.red)+c.MathUtils.absDouble(this.green-t.green)+c.MathUtils.absDouble(this.blue-t.blue)},asLAB:{get:function(){return null==this.lab_&&(this.lab_=l.LABColor.fromRGB(this),null==this.lab_&&(a.CoreAssert.fail("LABColor.fromRGB returns nil"),this.lab_=l.LABColor.fromRGB(i.BLACK))),this.lab_}},lightness:{get:function(){return this.asLAB.l}},contrasts:function(t,e){void 0===e&&(e=!0);var n=this.lightness;this.alpha<1&&(n=t.blend(this,this.alpha).lightness);var i=40;return e||(i=n<50?20:10),c.MathUtils.absDouble(n-t.lightness)>i},lightnessDifference:function(t){var e=this.lightness;return this.alpha<1&&(e=t.blend(this,this.alpha).lightness),c.MathUtils.absDouble(e-t.lightness)},perceptualDifference:function(t){var e=this;return this.alpha<1&&(e=t.blend(this,this.alpha)),e.distanceTo(t)},contrastWithColor:function(t){var e=t.lightness,n=e<60?95:e-40,i=this.asLAB;return new l.LABColor(n,i.a,i.b,this.alpha).asRGB},contrastWithSelf:function(){var t=this.lightness<55?100:this.lightness-50,e=this.asLAB;return new l.LABColor(t,e.a,e.b,this.alpha).asRGB},asHSB:{get:function(){return null==this.hsb_&&(this.hsb_=u.HSBColor.fromRGB(this)),this.hsb_}},asXYZ:{get:function(){return f.XYZColor.fromRGB(this)}},isEqual:function(t){var e;return!!(e=s.as(t,i))&&(c.MathUtils.absDouble(e.red-this.red)<1e-4&&c.MathUtils.absDouble(e.green-this.green)<1e-4&&c.MathUtils.absDouble(e.blue-this.blue)<1e-4&&c.MathUtils.absDouble(e.alpha-this.alpha)<1e-4)},hash:{get:function(){return null==this.hash_&&(this.hash_=s.toInt(255*this.red+.5)+s.toInt(255*this.green+.5)<<8+s.toInt(255*this.blue+.5)<<16+s.toInt(255*this.alpha+.5)<<24),this.hash_}},encode:function(){return a.CoreAssert.fail("SolidColor: Use encodeJson(), not encode()"),[]},encodeJson:function(){var t={};return t.red=this.red,t.green=this.green,t.blue=this.blue,t.alpha=this.alpha,t},print:function(){return s.toString("r: %.3f g %.3f b %.3f a: %.3f",255*this.red,255*this.green,255*this.blue,255*this.alpha)},asString:{get:function(){return this.print()}},hex:{get:function(){return s.toString("%02X%02X%02X%02X",s.toInt(255*this.red),s.toInt(255*this.green),s.toInt(255*this.blue),s.toInt(255*this.alpha))}},rgbHex:{get:function(){return s.toString("%02X%02X%02X",s.toInt(255*this.red),s.toInt(255*this.green),s.toInt(255*this.blue))}},rgbString:{get:function(){return s.toString("%03d%03d%03d",s.toInt(255*this.red),s.toInt(255*this.green),s.toInt(255*this.blue))}}}}),i),o._equality_SolidColor_SolidColor=function(t,e){return t.isEqual(e)}},234:function(t,e,n){var i,r,o=e,s=n(0),a=n(114),h=n(50),u=n(90);o.ColorLibrary=(i=function(){this.lookup_={},u.TheoPublishingObject.call(this)},s.defineClass({name:"ColorLibrary",ctor:i,superName:"TheoPublishingObject",statics:{PROPERTY_ENTRIES:"entries",PROPERTY_ENTRY_COLORID:"id",PROPERTY_ENTRY_COLOR:"color",PROPERTY_PALETTE_ID:"palette:id",_implements:function(t){return"TheoMessagePublisher"==t}},props:{hasEntries:function(t){for(var e=!0,n=s.iter(t);!n.done;n.next()){var i=n.value;if(null==s.indexForKey(this.lookup_,i)){e=!1;break}}return e},getIdForEntry:function(t){for(var e,n=s.iter(this.lookup_);!n.done;n.next()){var i=n.key,r=n.value;if(s.eq(a._equality_TheoColor_TheoColor,t,r)){e=i;break}}return e},color:function(t){return this.lookup_[t]},paletteID:{get:function(){return this.paletteID_},set:function(t){this.paletteID_=t}},setColor:function(t,e){this.setColors(s.dict([t,e]))},setColors:function(t){for(var e=!1,n=s.keys(t),i=s.iter(t);!i.done;i.next()){var r=i.key,h=i.value,u=this.lookup_[r];null==h&&null!=u?(e||(this.publish(new o.ColorLibraryChangedMessage(this,!0,s.clone(n))),e=!0),s.removeKey(this.lookup_,r)):null==h||null!=u&&s.eq(a._equality_TheoColor_TheoColor,h,u)||(e||(this.publish(new o.ColorLibraryChangedMessage(this,!0,s.clone(n))),e=!0),this.lookup_[r]=h)}e&&this.publish(new o.ColorLibraryChangedMessage(this,!1,s.clone(n)))},colorCount:{get:function(){return s.count(this.lookup_)}},forEachColor:function(t){for(var e=s.iter(this.lookup_);!e.done;e.next())t(e.key,e.value)},encodeJson:function(){var t={},e=[];t[i.PROPERTY_ENTRIES]=e,null!=this.paletteID_&&(t[i.PROPERTY_PALETTE_ID]=this.paletteID_);for(var n=s.iter(this.lookup_);!n.done;n.next()){var r=n.key,o=n.value,a={};a[i.PROPERTY_ENTRY_COLORID]=r,a[i.PROPERTY_ENTRY_COLOR]=o.encodeJson(),e.push(a)}return t},decodeAndSetJson:function(t){for(var e=s.iter(s.keys(this.lookup_));!e.done;e.next()){var n=e.value;s.removeKey(this.lookup_,n)}var r,o,h={};if((r=s.as(t,["Dictionary","String","Any"]))&&(this.paletteID=s.as(r[i.PROPERTY_PALETTE_ID],"String"),o=s.as(r[i.PROPERTY_ENTRIES],["Array",["Dictionary","String","Any"]])))for(var u=s.iter(o);!u.done;u.next()){var l,c,f=u.value;null!=(l=s.as(f[i.PROPERTY_ENTRY_COLORID],"String"))&&(c=a.TheoColor.decodeJson(s.as(f[i.PROPERTY_ENTRY_COLOR],"AnyObject")))&&(h[l]=c)}this.setColors(s.clone(h))}}}),i),o.ColorLibraryChangedMessage=(r=function(t,e,n){this.isBefore=e,this.isAfter=!e,this.affectedColorIDs=s.clone(n),h.TheoMessage.call(this,r.TYPE,t)},s.defineClass({name:"ColorLibraryChangedMessage",ctor:r,superName:"TheoMessage",statics:{TYPE:"ColorLibraryChangedMessage"}}),r)},235:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(22);r.HSBColor=(i=function(t,e,n,i){s.CoreAssert.isFalse(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)),s.CoreAssert.isTrue(t>=0&&t<=1),s.CoreAssert.isTrue(e>=0&&e<=1),s.CoreAssert.isTrue(n>=0&&n<=1),s.CoreAssert.isTrue(i>=0&&i<=1),this.h=t,this.s=e,this.b=n,this.alpha=i},o.defineClass({name:"HSBColor",ctor:i,superName:"CoreObject",statics:{fromRGB:function(t){var e=Math.max(t.red,Math.max(t.green,t.blue)),n=e-Math.min(t.red,Math.min(t.green,t.blue));if(0==n)return new i(0,0,e,t.alpha);var r=0;return(r=t.red==e?(t.green-t.blue)/n:t.green==e?2+(t.blue-t.red)/n:4+(t.red-t.green)/n)<0?r=(60*r+360)%360/360:r/=6,new i(r,n/e,e,Math.min(Math.max(t.alpha,0),1))}},props:{hueDistance:function(t){var e=Math.min(t.h,this.h),n=Math.max(t.h,this.h);return Math.min(n-e,e+1-n)},asRGB:{get:function(){var t=o.toInt(Math.floor(6*this.h)),e=6*this.h-o.toDouble(t),n=this.b*(1-this.s),i=this.b*(1-e*this.s),r=this.b*(1-(1-e)*this.s);switch(t%6){case 0:return new a.SolidColor(this.b,r,n,this.alpha);case 1:return new a.SolidColor(i,this.b,n,this.alpha);case 2:return new a.SolidColor(n,this.b,r,this.alpha);case 3:return new a.SolidColor(n,i,this.b,this.alpha);case 4:return new a.SolidColor(r,n,this.b,this.alpha);case 5:return new a.SolidColor(this.b,n,i,this.alpha);default:return new a.SolidColor(0,0,0,0)}}}}}),i)},28:function(t,e,n){var i,r,o=e,s=n(0),a=n(1),h=n(4),u=n(15),l=n(10);o.TheoSize=(i=function(t,e){a.CoreAssert.isFalse(isNaN(t)||isNaN(e)),this.width=t,this.height=e,h.CoreObject.call(this)},r={},s.defineClass({name:"TheoSize",ctor:i,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new i(0,0)),r.Zero}},decodeJson:function(t){return null==t?null:(e=s.as(t,["Array","Double"]))?2!=e.length?(a.CoreAssert.fail("TheoSize.decodeJson: data is not an array with 2 elements"),null):new i(e[0],e[1]):(a.CoreAssert.fail("TheoSize.decodeJson: data is not an array"),null);var e},difference:function(t,e){return new i(t.width-e.width,t.height-e.height)}},props:{multiply:function(t){return new i(this.width*t,this.height*t)},hypotenuse:{get:function(){return Math.sqrt(this.width*this.width+this.height*this.height)}},area:{get:function(){return this.width*this.height}},myAspectRatioClosestCorner:function(t){var e=this.width*this.width+this.height*this.height,n=(this.width*t.width+this.height*t.height)/e;return new i(n*this.width,n*this.height)},myAspectRatioMatchArea:function(t){var e=Math.sqrt(t.width*this.width*(t.height/this.height)),n=Math.sqrt(t.height*this.height*(t.width/this.width));return new i(e,n)},myAspectRatioMatchPerimeter:function(t){var e=(t.width+t.height)/(this.width+this.height);return new i(e*this.width,e*this.height)},equal:function(t){return this.width==t.width&&this.height==t.height},aspectRatio:{get:function(){return 0==this.height?1:this.width/this.height}},angle:{get:function(){return Math.atan(this.aspectRatio)/Math.PI}},similarity:function(t){return l.TheoRect.fromSize(this).similarity(l.TheoRect.fromSize(t))},encode:function(){return a.CoreAssert.fail("TheoSize: Use encodeJson(), not encode()"),[]},encodeJson:function(){return s.as([this.width,this.height],"AnyObject")},print:function(){return this.asString},description:{get:function(){return this.asString}},asString:{get:function(){return s.toString("width: %g height %g",this.width,this.height)}},asPoint:{get:function(){return new u.TheoPoint(this.width,this.height)}}}}),i)},302:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(4),h=n(303);r.LABColor=(i=function(t,e,n,i){s.CoreAssert.isFalse(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)),s.CoreAssert.isTrue(t>=-.1&&t<=101),s.CoreAssert.isTrue(e>=-129&&e<=129),s.CoreAssert.isTrue(n>=-129&&n<=129),s.CoreAssert.isTrue(i>=0&&i<=1),this.l=t,this.a=e,this.b=n,this.alpha=i,a.CoreObject.call(this)},o.defineClass({name:"LABColor",ctor:i,superName:"CoreObject",statics:{fromRGB:function(t){return i.fromXYZ(h.XYZColor.fromRGB(t),h.XYZColor.D65XYZ)},fromXYZ:function(t,e){function n(t){return t>.008856?Math.pow(t,1/3):7.787*t+.13793}var r=n(t.x/e.x),o=n(t.y/e.y),s=n(t.z/e.z);return new i(Math.min(Math.max(116*o-16,0),100),500*(r-o),200*(o-s),Math.min(Math.max(t.alpha,0),1))}},props:{distanceTo:function(t){var e=this.l-t.l,n=this.a-t.a,i=this.b-t.b;return Math.sqrt(e*e+n*n+i*i)},hueDistance:function(t){var e=this.hue,n=t.hue,i=Math.min(e/360,n/360),r=Math.max(e/360,n/360);return Math.min(r-i,i+1-r)},hue:{get:function(){return 180*Math.atan2(this.b,this.a)/3.14159265+180}},asXYZ:{get:function(){return null==this.xyz_&&(this.xyz_=this.toXYZ(h.XYZColor.D65XYZ)),this.xyz_}},asRGB:{get:function(){if(null==this.rgb_){var t=this.asXYZ;this.rgb_=t.asRGB}return this.rgb_}},print:function(){return o.toString("l: %.3f a %.3f b %.3f a: %.3f",this.l,this.a,this.b,this.alpha)},toXYZ:function(t){var e=(this.l+16)/116,n=Math.pow(e,3),i=this.a/500+e,r=Math.pow(i,3),o=e-this.b/200,s=Math.pow(o,3),a=r>.008856?r:(i-.13793)/7.787,u=n>.008856?n:(e-.13793)/7.787,l=s>.008856?s:(o-.13793)/7.787;return new h.XYZColor(a*t.x,u*t.y,l*t.z,this.alpha)}}}),i)},304:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(4),h=n(15);r.TheoLine=(i=function(t,e){void 0===e&&(e=null),this.p1=t,this.p2=e||t,a.CoreObject.call(this)},o.defineClass({name:"TheoLine",ctor:i,superName:"CoreObject",props:{midpoint:function(){return this.eval(.5)},angleWith:function(t){var e=this.p2.subtract(this.p1),n=t.p2.subtract(t.p1),i=Math.atan2(e.crossProduct(n),e.dotProduct(n));return s.CoreAssert.isFalse(isNaN(i)),i},length:{get:function(){return this.p2.subtract(this.p1).length()}},distanceToPoint:function(t){return this.projectionOffset(t).length()},projectionOffset:function(t){return this.projectedPoint(t).subtract(t)},projectedPoint:function(t){return this.eval(this.locate(t))},transform:function(t){var e=o.clone(t.transformPoints([this.p1,this.p2]));return new i(e[0],e[1])},projectedPosition:function(t){var e=this.projectedPoint(t);return Math.max((e.x-this.p2.x)/(this.p1.x-this.p2.x+1e-4),(e.y-this.p2.y)/(this.p1.y-this.p2.y+1e-4))},unionWith:function(t){var e=this.locate(t.p1),n=this.locate(t.p2),r=Math.min(0,e,n),o=Math.max(1,e,n);return new i(this.eval(r),this.eval(o))},intersection:function(t){var e=(this.p1.x-this.p2.x)*(t.p1.y-t.p2.y)-(this.p1.y-this.p2.y)*(t.p1.x-t.p2.x);if(0!=e){var n=(this.p1.x*this.p2.y-this.p1.y*this.p2.x)*(t.p1.x-t.p2.x)-(this.p1.x-this.p2.x)*(t.p1.x*t.p2.y-t.p1.y*t.p2.x),i=(this.p1.x*this.p2.y-this.p1.y*this.p2.x)*(t.p1.y-t.p2.y)-(this.p1.y-this.p2.y)*(t.p1.x*t.p2.y-t.p1.y*t.p2.x);return new h.TheoPoint(n/e,i/e)}return null},extendByFactor:function(t){return new i(this.eval(-t),this.eval(1+t))},extendByFixedLength:function(t){var e=t/this.length;return new i(this.eval(-e),this.eval(1+e))},extendRayByFixedLength:function(t){var e=t/this.length;return new i(this.p1,this.eval(1+e))},eval:function(t){return new h.TheoPoint(this.p1.x*(1-t)+this.p2.x*t,this.p1.y*(1-t)+this.p2.y*t)},locate:function(t){var e=this.p2.subtract(this.p1),n=t.subtract(this.p1);return e.dotProduct(n)/e.dotProduct(e)},asString:{get:function(){return o.toString("p1:%g %g, p2:%g %g",this.p1.x,this.p1.y,this.p2.x,this.p2.y)}},description:{get:function(){return o.toString("(%g,%g)..(%g,%g)",this.p1.x,this.p1.y,this.p2.x,this.p2.y)}},equalTo:function(t){return this.p1.equal(t.p1)&&this.p2.equal(t.p2)}}}),i),r._equality_TheoLine_TheoLine=function(t,e){return t.equalTo(e)}},328:function(t,e,n){var i,r,o,s,a,h=e,u=n(0),l=n(10);h.PathSlicingFilter=(i=function(t){this.sink=t},u.defineClass({name:"PathSlicingFilter",ctor:i,superName:"CoreObject",statics:{_implements:function(t){return"TheoPathRenderer"==t}},props:{transformX:function(t){return t},transformY:function(t){return t},rectangle:function(t,e,n,i){this.sink.rectangle(this.transformX(t),this.transformY(e),this.transformX(n),this.transformY(i))},ellipse:function(t,e,n,i){this.sink.ellipse(this.transformX(t),this.transformY(e),this.transformX(n),this.transformY(i))},newPath:function(t,e,n,i,r){this.sink.newPath(t,e,n,i,r)},moveTo:function(t,e){this.sink.moveTo(this.transformX(t),this.transformY(e))},lineTo:function(t,e){this.sink.lineTo(this.transformX(t),this.transformY(e))},cubicBezier:function(t,e,n,i,r,o){this.sink.cubicBezier(this.transformX(t),this.transformY(e),this.transformX(n),this.transformY(i),this.transformX(r),this.transformY(o))},quadraticBezier:function(t,e,n,i){this.sink.quadraticBezier(this.transformX(t),this.transformY(e),this.transformX(n),this.transformY(i))},closePath:function(){this.sink.closePath()}}}),i),h.DoubleRange=(r=function(t,e){this.lower=t,this.upper=e},u.defineClass({name:"DoubleRange",ctor:r}),r),h.NineSlicingOuterRange=(o=function(t,e){this.range=t,this.prescribedPrescale=e},u.defineClass({name:"NineSlicingOuterRange",ctor:o}),o),h.NineSlicingOuterBounds=(s=function(t,e){this.bounds=t,this.prescribedPrescale=e},u.defineClass({name:"NineSlicingOuterBounds",ctor:s}),s),h.NineSlicingFilter=(a=function(t,e,n,i,r,o){this.guides=e,this.preScale=r,this.forward=o,this.originX=i.minX-n.minX,this.originY=i.minY-n.minY,this.translateX=i.width/r-n.width,this.translateY=i.height/r-n.height,this.ratioX=1+this.translateX/e.width,this.ratioY=1+this.translateY/e.height,h.PathSlicingFilter.call(this,t)},u.defineClass({name:"NineSlicingFilter",ctor:a,superName:"PathSlicingFilter",statics:{requiredPrescaleForMapping:function(t,e,n){return e.lower<=t.lower&&e.upper<=t.lower||e.lower>=t.upper&&e.upper>=t.upper?(n.upper-n.lower)/(e.upper-e.lower):null},calculateOuterRangeForMapping:function(t,e,n,i,r){var o=0,s=0,a=(t.upper-e.upper)*n,u=(e.lower-t.lower)*n;if(i.upper>=e.upper&&(s=r.upper+(t.upper-i.upper)*n),i.lower<=e.lower)o=r.lower-(i.lower-t.lower)*n,i.upper<=e.lower?s=o+u+a:i.upper<e.upper&&(s=o+u+(r.upper-(o+u))*(e.upper-e.lower)/(i.upper-e.lower)+a);else if(i.lower<e.upper)if(i.upper<e.upper){var l=(r.upper-r.lower)/(i.upper-i.lower);o=r.lower-l*(i.lower-e.lower)-u,s=r.upper+l*(e.upper-i.upper)+a}else o=s-a-(s-a-r.lower)*(e.upper-e.lower)/(e.upper-i.lower)-u;else o=s-u-a;return new h.DoubleRange(o,s)},justOutsetTenPercent:!1,calculateOuterBoundsForMapping:function(t,e,n,i,r){var o,s,u;if(a.justOutsetTenPercent)return new h.NineSlicingOuterBounds(new l.TheoRect(r.minX-.1*r.width,r.minY-.1*r.width,r.maxX+.1*r.width,r.maxY+.1*r.width),null);var c=new h.DoubleRange(e.minX,e.maxX),f=new h.DoubleRange(e.minY,e.maxY),p=new h.DoubleRange(i.minX,i.maxX),d=new h.DoubleRange(i.minY,i.maxY),m=new h.DoubleRange(r.minX,r.maxX),T=new h.DoubleRange(r.minY,r.maxY),P=(o=a.requiredPrescaleForMapping(c,p,m))||null!=o?o:a.requiredPrescaleForMapping(f,d,T),_=a.calculateOuterRangeForMapping(new h.DoubleRange(t.minX,t.maxX),c,(s=P)||null!=s?s:n,p,m),g=a.calculateOuterRangeForMapping(new h.DoubleRange(t.minY,t.maxY),f,(u=P)||null!=u?u:n,d,T);return new h.NineSlicingOuterBounds(new l.TheoRect(_.lower,g.lower,_.upper,g.upper),P)},_implements:function(t){return"TheoPathRenderer"==t}},props:{transformX:function(t){if(this.forward){var e=0;return e=t<=this.guides.minX?t:t>=this.guides.maxX?t+this.translateX:this.guides.minX+(t-this.guides.minX)*this.ratioX,this.originX+e*this.preScale}var n=(t-this.originX)/this.preScale;return n<=this.guides.minX?n:n>=this.guides.maxX+this.translateX?n-this.translateX:this.guides.minX+(n-this.guides.minX)/this.ratioX},transformY:function(t){if(this.forward){var e=0;return e=t<=this.guides.minY?t:t>=this.guides.maxY?t+this.translateY:this.guides.minY+(t-this.guides.minY)*this.ratioY,this.originY+e*this.preScale}var n=(t-this.originY)/this.preScale;return n<=this.guides.minY?n:n>=this.guides.maxY+this.translateY?n-this.translateY:this.guides.minY+(n-this.guides.minY)/this.ratioY}}}),a)},412:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(22);r.PROPERTY_COVERAGE="coverage",r.ImageColorData=(i=function(t,e){this.rgbColor=t,this.coverage=e},o.defineClass({name:"ImageColorData",ctor:i,superName:"CoreObject",statics:{decodeJson:function(t){if(null==t)return null;var e=o.as(t,["Dictionary","String","Any"]);if(null==e)return s.CoreAssert.fail("SolidColor.decodeJson: object passed isn't a dictionary"),null;var n,h=a.SolidColor.decodeJson(t);return null!=h&&null!=(n=o.as(e[r.PROPERTY_COVERAGE],"Double"))?new i(h,n):null}},props:{encodeJson:function(){var t=this.rgbColor.encodeJson();return t[r.PROPERTY_COVERAGE]=this.coverage,t}}}),i)},48:function(t,e,n){var i,r,o=e,s=n(0),a=n(1),h=n(4);o.TheoTime=(i=function(t,e){this.value=t,this.timescale=e,h.CoreObject.call(this)},r={},s.defineClass({name:"TheoTime",ctor:i,superName:"CoreObject",statics:{Zero:{get:function(){return void 0===r.Zero&&(r.Zero=new i(0,30)),r.Zero}},One:{get:function(){return void 0===r.One&&(r.One=new i(1,30)),r.One}},fromSecondsAsMs:function(t){return i.fromSeconds(t,1e3)},fromSeconds:function(t,e){return void 0===e&&(e=i.Zero.timescale),new i(s.toInt(t*s.toDouble(e)),e)},decodeJson:function(t){return null==t?null:(e=s.as(t,["Array","Int"]))?2!=e.length?(a.CoreAssert.fail("TheoTime: data is not an array with 2 elements"),null):new i(e[0],e[1]):(a.CoreAssert.fail("TheoTime: data is not an array"),null);var e}},props:{clone:function(){return new i(this.value,this.timescale)},seconds:{get:function(){return s.toDouble(this.value)/s.toDouble(this.timescale)}},equals:function(t){return this.value==t.value&&this.timescale==t.timescale},add:function(t){return t.timescale==this.timescale?new i(this.value+t.value,this.timescale):new i(this.value+s.toInt(s.toDouble(this.timescale)*t.seconds),this.timescale)},addSeconds:function(t){return new i(this.value+s.toInt(s.toDouble(this.timescale)*t),this.timescale)},addVal:function(t){return new i(this.value+t,this.timescale)},subtract:function(t){if(t.timescale==this.timescale)return a.CoreAssert.isTrue(this.value>=t.value,"current time is greater"),new i(this.value-t.value,this.timescale);var e=s.toInt(s.toDouble(this.timescale)*t.seconds);return a.CoreAssert.isTrue(this.value>=e,"current time is greater"),new i(this.value-e,this.timescale)},multiply:function(t){return new i(s.toInt(s.toDouble(this.value)*t),this.timescale)},encodeJson:function(){return s.as([this.value,this.timescale],"AnyObject")}}}),i)},665:function(t,e,n){n(0)},666:function(t,e,n){n(0)},81:function(t,e,n){var i,r,o,s,a,h,u,l,c,f,p,d,m,T,P=e,_=n(0),g=n(1),v=n(4),x=n(8),R=n(9),y=n(15),C=n(10);P.TheoPathRenderer=_.defineProtocol("TheoPathRenderer",{rectangle:"(Double, Double, Double, Double) -> Void",ellipse:"(Double, Double, Double, Double) -> Void",newPath:"(String, String, String, Double, Double) -> Void",moveTo:"(Double, Double) -> Void",lineTo:"(Double, Double) -> Void",cubicBezier:"(Double, Double, Double, Double, Double, Double) -> Void",quadraticBezier:"(Double, Double, Double, Double) -> Void",closePath:"() -> Void"}),P.PROPERTY_TYPE="type",P.PROPERTY_FILLRULE="fillRule",P.PROPERTY_STROKEWEIGHT="strokeWeight",P.PROPERTY_JOINTYPE="joinType",P.PROPERTY_ENDTYPE="endType",P.PROPERTY_MITERLIMIT="miterLimit",P.PROPERTY_COORDS="coords",P.TheoPath=(i=function(t){this.pathFillType=i.PATHFILL_NONZERO,this.pathEndcapType=i.PATHEND_BUTT,this.pathJoinType=i.PATHJOIN_MITER,this.pathStrokeWeight=0,this.pathMiterLimit=4,this.type=t,v.CoreObject.call(this)},r={},_.defineClass({name:"TheoPath",ctor:i,superName:"CoreObject",statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new P.TheoEmptyPath),r.EMPTY},set:function(t){r.EMPTY=t}},PATHFILL_NONE:"none",PATHFILL_NONZERO:"nonzero",PATHFILL_EVENODD:"evenodd",PATHEND_BUTT:"butt",PATHEND_ROUND:"round",PATHEND_SQUARE:"square",PATHJOIN_MITER:"miter",PATHJOIN_ROUND:"round",PATHJOIN_BEVEL:"bevel",decodeJson:function(t){var e,n,r,o,s,a,h;if(null==t);else if(h=_.as(t,["Dictionary","String","Any"])){var u;if(null!=(u=_.as(h[P.PROPERTY_TYPE],"String"))){if(u==P.TheoEmptyPath.TYPE?a=i.EMPTY:u==P.TheoRectanglePath.TYPE?a=P.TheoRectanglePath.decodeJsonDict(h):u==P.TheoEllipsePath.TYPE?a=P.TheoEllipsePath.decodeJsonDict(h):u==P.TheoArbitraryPath.TYPE?a=P.TheoArbitraryPath.decodeJsonDict(h):g.CoreAssert.fail("Unrecognized type "+u),null!=a){var l=(e=_.as(h[P.PROPERTY_FILLRULE],"String"))||null!=e?e:i.PATHFILL_NONZERO;a.pathFillType=l;var c=(n=_.as(h[P.PROPERTY_JOINTYPE],"String"))||null!=n?n:i.PATHJOIN_MITER;a.pathJoinType=c;var f=(r=_.as(h[P.PROPERTY_ENDTYPE],"String"))||null!=r?r:i.PATHEND_BUTT;a.pathEndcapType=f;var p=(o=_.as(h[P.PROPERTY_STROKEWEIGHT],"Double"))||null!=o?o:0;a.pathStrokeWeight=p;var d=(s=_.as(h[P.PROPERTY_MITERLIMIT],"Double"))||null!=s?s:4;a.pathMiterLimit=d}}else g.CoreAssert.fail("No type field")}else g.CoreAssert.fail("Not a dictionary");return a}},props:{bounds:{get:function(){return null}},render:function(t){},encodeJson:function(){var t={};return t[P.PROPERTY_TYPE]=this.type,t[P.PROPERTY_FILLRULE]=this.pathFillType,t[P.PROPERTY_JOINTYPE]=this.pathJoinType,t[P.PROPERTY_ENDTYPE]=this.pathEndcapType,g.CoreAssert.isFalse(isNaN(this.pathStrokeWeight),"Can't persist NaN pathStrokeWeight value"),t[P.PROPERTY_STROKEWEIGHT]=this.pathStrokeWeight,g.CoreAssert.isFalse(isNaN(this.pathMiterLimit),"Can't persist NaN pathMiterLimit value"),t[P.PROPERTY_MITERLIMIT]=this.pathMiterLimit,t},appearanceHash:{get:function(){return"todo"}}}}),i),P.TheoEmptyPath=(o=function(){P.TheoPath.call(this,o.TYPE)},_.defineClass({name:"TheoEmptyPath",ctor:o,superName:"TheoPath",statics:{TYPE:{get:function(){return"empty"}}},props:{render:function(t){},appearanceHash:{get:function(){var t;return(t=_.opt(x.Host.crypto,function(t){return t.md5("(empty)")}))||null!=t?t:"(empty)"}}}}),o),P.TheoRectanglePath=function(){var t=function(e){this.rect=e,P.TheoPath.call(this,t.TYPE)},e={};return _.defineClass({name:"TheoRectanglePath",ctor:t,superName:"TheoPath",statics:{TYPE:{get:function(){return"rect"}},ONE_BY_ONE:{get:function(){return void 0===e.ONE_BY_ONE&&(e.ONE_BY_ONE=new t(C.TheoRect.ONE_BY_ONE)),e.ONE_BY_ONE}},decodeJsonDict:function(e){var n;return(n=C.TheoRect.decodeJson(_.as(e[P.PROPERTY_COORDS],"AnyObject")))?new t(n):null}},props:{bounds:{get:function(){return this.rect}},render:function(t){t.rectangle(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeJson:function(){var t=P.TheoPath.prototype.encodeJson.call(this);return t[P.PROPERTY_COORDS]=this.rect.encodeJson(),t},appearanceHash:{get:function(){var t,e="(rect:"+this.rect.asString+")";return(t=_.opt(x.Host.crypto,function(t){return t.md5(e)}))||null!=t?t:e}}}}),t}(),P.TheoEllipsePath=function(){var t=function(e){this.rect=e,P.TheoPath.call(this,t.TYPE)},e={};return _.defineClass({name:"TheoEllipsePath",ctor:t,superName:"TheoPath",statics:{TYPE:"ellipse",ONE_BY_ONE:{get:function(){return void 0===e.ONE_BY_ONE&&(e.ONE_BY_ONE=new t(C.TheoRect.ONE_BY_ONE)),e.ONE_BY_ONE}},decodeJsonDict:function(e){var n;return(n=C.TheoRect.decodeJson(_.as(e[P.PROPERTY_COORDS],"AnyObject")))?new t(n):null}},props:{bounds:{get:function(){return this.rect}},render:function(t){t.ellipse(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeJson:function(){var t=P.TheoPath.prototype.encodeJson.call(this);return t[P.PROPERTY_COORDS]=this.rect.encodeJson(),t},appearanceHash:{get:function(){var t,e="(ellipse:"+this.rect.asString+")";return(t=_.opt(x.Host.crypto,function(t){return t.md5(e)}))||null!=t?t:e}}}}),t}(),P.DecodeState=(s=function(t,e){this.arr=t,this.index=e},_.defineClass({name:"DecodeState",ctor:s}),s),P.TheoPathOperation=(a=function(t){this.type=t},_.defineClass({name:"TheoPathOperation",ctor:a,statics:{decodeFromArray:function(t){return null}},props:{bounds:{get:function(){return null}},boundsFrom:function(t){return this.bounds},trailingPoint:function(){return y.TheoPoint.INVALID},render:function(t){},encodeToArray:function(t){t.push(this.type)},asString:{get:function(){return g.CoreAssert.fail("unimplemented in subclass"),"subclass, implement me"}}}}),a),P.TheoPathOpMoveTo=(h=function(t){this.point=t,P.TheoPathOperation.call(this,h.TYPE)},_.defineClass({name:"TheoPathOpMoveTo",ctor:h,superName:"TheoPathOperation",statics:{TYPE:"M",decodeFromArray:function(t){var e=new h(new y.TheoPoint(t.arr[t.index],t.arr[t.index+1]));return t.index+=2,e}},props:{bounds:{get:function(){return C.TheoRect.fromXYWH(this.point.x,this.point.y,0,0)}},trailingPoint:function(){return this.point},render:function(t){t.moveTo(this.point.x,this.point.y)},encodeToArray:function(t){P.TheoPathOperation.prototype.encodeToArray.call(this,t),g.CoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value"),g.CoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value"),t.push(this.point.x),t.push(this.point.y)},asString:{get:function(){return"M "+this.point.x+" "+this.point.y}}}}),h),P.TheoPathOpLineTo=(u=function(t){this.point=t,P.TheoPathOperation.call(this,u.TYPE)},_.defineClass({name:"TheoPathOpLineTo",ctor:u,superName:"TheoPathOperation",statics:{TYPE:"L",decodeFromArray:function(t){var e=new u(new y.TheoPoint(t.arr[t.index],t.arr[t.index+1]));return t.index+=2,e}},props:{bounds:{get:function(){return C.TheoRect.fromXYWH(this.point.x,this.point.y,0,0)}},boundsFrom:function(t){return C.TheoRect.boundsOfPoints([t,this.point])},trailingPoint:function(){return this.point},render:function(t){t.lineTo(this.point.x,this.point.y)},encodeToArray:function(t){P.TheoPathOperation.prototype.encodeToArray.call(this,t),g.CoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value"),g.CoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value"),t.push(this.point.x),t.push(this.point.y)},asString:{get:function(){return"L "+this.point.x+" "+this.point.y}}}}),u),P.TheoPathOpCubicBezier=(l=function(t,e,n){this.pt1=t,this.pt2=e,this.point=n,P.TheoPathOperation.call(this,l.TYPE)},_.defineClass({name:"TheoPathOpCubicBezier",ctor:l,superName:"TheoPathOperation",statics:{TYPE:"C",decodeFromArray:function(t){var e=new l(new y.TheoPoint(t.arr[t.index],t.arr[t.index+1]),new y.TheoPoint(t.arr[t.index+2],t.arr[t.index+3]),new y.TheoPoint(t.arr[t.index+4],t.arr[t.index+5]));return t.index+=6,e}},props:{bounds:{get:function(){return C.TheoRect.boundsOfPoints([this.pt1,this.pt2,this.point])}},boundsFrom:function(t){var e=[t,this.point],n=_.clone(this.CubicCriticalTimes(t,this.pt1,this.pt2,this.point));return _.first(n).x>0&&_.first(n).x<1&&e.push(this.evaluateAtTime(_.first(n).x,t,this.pt1,this.pt2,this.point)),_.first(n).y>0&&_.first(n).y<1&&e.push(this.evaluateAtTime(_.first(n).y,t,this.pt1,this.pt2,this.point)),_.last(n).x>0&&_.last(n).x<1&&e.push(this.evaluateAtTime(_.last(n).x,t,this.pt1,this.pt2,this.point)),_.last(n).y>0&&_.last(n).y<1&&e.push(this.evaluateAtTime(_.last(n).y,t,this.pt1,this.pt2,this.point)),C.TheoRect.boundsOfPoints(_.clone(e))},trailingPoint:function(){return this.point},sqrtPoint:function(t){return new y.TheoPoint(Math.sqrt(t.x),Math.sqrt(t.y))},CubicCriticalTimes:function(t,e,n,i){var r=y._minus_TheoPoint_TheoPoint(e,t),o=y._minus_TheoPoint_TheoPoint(n,e),s=y._minus_TheoPoint_TheoPoint(i,n),a=y._minus_TheoPoint_TheoPoint(o,r),h=y._minus_TheoPoint_TheoPoint(s,o),u=y._minus_TheoPoint_TheoPoint(h,a),l=y._minus_TheoPoint_TheoPoint(a.multiplyPoint(a),r.multiplyPoint(u));function c(t){return Math.abs(t)<=1e-6?0:t}l=new y.TheoPoint(c(l.x),c(l.y)),a=new y.TheoPoint(c(a.x),c(a.y)),u=new y.TheoPoint(c(u.x),c(u.y));var f=this.sqrtPoint(l),p=[y._plus_TheoPoint_TheoPoint(y._negate_TheoPoint(a),f).dividePoint(u),y._minus_TheoPoint_TheoPoint(y._negate_TheoPoint(a),f).dividePoint(u)],d=y._negate_TheoPoint(r.dividePoint(a).divide(2));return 0==u.x&&0!=a.x&&(a.x>0?p[0]=new y.TheoPoint(d.x,_.first(p).y):p[1]=new y.TheoPoint(d.x,_.last(p).y)),0==u.y&&0!=a.y&&(a.y>0?p[0]=new y.TheoPoint(_.first(p).x,d.y):p[1]=new y.TheoPoint(_.last(p).x,d.y)),p},evaluateAtTime:function(t,e,n,i,r){return y._plus_TheoPoint_TheoPoint(y._plus_TheoPoint_TheoPoint(y._plus_TheoPoint_TheoPoint(e.multiply((1-t)*(1-t)*(1-t)),n.multiply(3*t*(1-t)*(1-t))),i.multiply(3*t*t*(1-t))),r.multiply(t*t*t))},render:function(t){t.cubicBezier(this.pt1.x,this.pt1.y,this.pt2.x,this.pt2.y,this.point.x,this.point.y)},encodeToArray:function(t){P.TheoPathOperation.prototype.encodeToArray.call(this,t),g.CoreAssert.isFalse(isNaN(this.pt1.x),"Can't persist NaN pt1.x value"),g.CoreAssert.isFalse(isNaN(this.pt1.y),"Can't persist NaN pt1.y value"),g.CoreAssert.isFalse(isNaN(this.pt2.x),"Can't persist NaN pt2.x value"),g.CoreAssert.isFalse(isNaN(this.pt2.y),"Can't persist NaN pt2.y value"),g.CoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value"),g.CoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value"),t.push(this.pt1.x),t.push(this.pt1.y),t.push(this.pt2.x),t.push(this.pt2.y),t.push(this.point.x),t.push(this.point.y)},asString:{get:function(){return"C "+_.toString(this.pt1.x)+" "+_.toString(this.pt1.y)+" "+_.toString(this.pt2.x)+" "+_.toString(this.pt2.y)+" "+_.toString(this.point.x)+" "+_.toString(this.point.y)}}}}),l),P.TheoPathOpQuadraticBezier=(c=function(t,e){this.pt1=t,this.point=e,P.TheoPathOperation.call(this,c.TYPE)},_.defineClass({name:"TheoPathOpQuadraticBezier",ctor:c,superName:"TheoPathOperation",statics:{TYPE:"Q",decodeFromArray:function(t){var e=new c(new y.TheoPoint(t.arr[t.index],t.arr[t.index+1]),new y.TheoPoint(t.arr[t.index+2],t.arr[t.index+3]));return t.index+=4,e}},props:{bounds:{get:function(){return C.TheoRect.boundsOfPoints([this.pt1,this.point])}},boundsFrom:function(t){var e=[t,this.point],n=this.QuadraticCriticalTime(t,this.pt1,this.point);return n.x>0&&n.x<1&&e.push(this.evaluateAtTime(n.x,t,this.pt1,this.point)),n.y>0&&n.y<1&&e.push(this.evaluateAtTime(n.y,t,this.pt1,this.point)),C.TheoRect.boundsOfPoints(_.clone(e))},trailingPoint:function(){return this.point},QuadraticCriticalTime:function(t,e,n){var i=y._minus_TheoPoint_TheoPoint(e,t),r=y._minus_TheoPoint_TheoPoint(n,e),o=y._minus_TheoPoint_TheoPoint(r,i);return y._negate_TheoPoint(i.dividePoint(o))},evaluateAtTime:function(t,e,n,i){return y._plus_TheoPoint_TheoPoint(y._plus_TheoPoint_TheoPoint(e.multiply((1-t)*(1-t)),n.multiply(2*t*(1-t))),i.multiply(t*t))},render:function(t){t.quadraticBezier(this.pt1.x,this.pt1.y,this.point.x,this.point.y)},encodeToArray:function(t){P.TheoPathOperation.prototype.encodeToArray.call(this,t),g.CoreAssert.isFalse(isNaN(this.pt1.x),"Can't persist NaN pt1.x value"),g.CoreAssert.isFalse(isNaN(this.pt1.y),"Can't persist NaN pt1.y value"),g.CoreAssert.isFalse(isNaN(this.point.x),"Can't persist NaN point.x value"),g.CoreAssert.isFalse(isNaN(this.point.y),"Can't persist NaN point.y value"),t.push(this.pt1.x),t.push(this.pt1.y),t.push(this.point.x),t.push(this.point.y)},asString:{get:function(){return"Q "+_.toString(this.pt1.x)+" "+_.toString(this.pt1.y)+" "+_.toString(this.point.x)+" "+_.toString(this.point.y)}}}}),c),P.TheoPathOpRectangle=(f=function(t){this.rect=t,P.TheoPathOperation.call(this,f.TYPE)},_.defineClass({name:"TheoPathOpRectangle",ctor:f,superName:"TheoPathOperation",statics:{TYPE:"R",decodeFromArray:function(t){if(t.arr.length>=t.index+4){var e=_.as(t.arr[t.index],"Double"),n=_.as(t.arr[t.index+1],"Double"),i=_.as(t.arr[t.index+2],"Double"),r=_.as(t.arr[t.index+3],"Double");return t.index+=4,null==e&&(e=0),null==i&&(i=100),null==n&&(n=0),null==r&&(r=100),new f(new C.TheoRect(e,n,i,r))}return null}},props:{bounds:{get:function(){return this.rect}},render:function(t){t.rectangle(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeToArray:function(t){P.TheoPathOperation.prototype.encodeToArray.call(this,t),g.CoreAssert.isFalse(isNaN(this.rect.minX),"Can't persist NaN rect.minX value"),g.CoreAssert.isFalse(isNaN(this.rect.minY),"Can't persist NaN rect.minY value"),g.CoreAssert.isFalse(isNaN(this.rect.maxX),"Can't persist NaN rect.maxX value"),g.CoreAssert.isFalse(isNaN(this.rect.maxY),"Can't persist NaN rect.maxY value"),t.push(this.rect.minX),t.push(this.rect.minY),t.push(this.rect.maxX),t.push(this.rect.maxY)},asString:{get:function(){return"R "+_.toString(this.rect.minX)+" "+_.toString(this.rect.minY)+" "+_.toString(this.rect.maxX)+" "+_.toString(this.rect.maxY)}}}}),f),P.TheoPathOpEllipse=(p=function(t){this.rect=t,P.TheoPathOperation.call(this,p.TYPE)},_.defineClass({name:"TheoPathOpEllipse",ctor:p,superName:"TheoPathOperation",statics:{TYPE:"E",decodeFromArray:function(t){var e=new p(new C.TheoRect(t.arr[t.index],t.arr[t.index+1],t.arr[t.index+2],t.arr[t.index+3]));return t.index+=4,e}},props:{bounds:{get:function(){return this.rect}},render:function(t){t.ellipse(this.rect.minX,this.rect.minY,this.rect.maxX,this.rect.maxY)},encodeToArray:function(t){P.TheoPathOperation.prototype.encodeToArray.call(this,t),g.CoreAssert.isFalse(isNaN(this.rect.minX),"Can't persist NaN rect.minX value"),g.CoreAssert.isFalse(isNaN(this.rect.minY),"Can't persist NaN rect.minY value"),g.CoreAssert.isFalse(isNaN(this.rect.maxX),"Can't persist NaN rect.maxX value"),g.CoreAssert.isFalse(isNaN(this.rect.maxY),"Can't persist NaN rect.maxY value"),t.push(this.rect.minX),t.push(this.rect.minY),t.push(this.rect.maxX),t.push(this.rect.maxY)},asString:{get:function(){return"E "+_.toString(this.rect.minX)+" "+_.toString(this.rect.minY)+" "+_.toString(this.rect.maxX)+" "+_.toString(this.rect.maxY)}}}}),p),P.TheoPathOpClosePath=(d=function(){P.TheoPathOperation.call(this,d.TYPE)},_.defineClass({name:"TheoPathOpClosePath",ctor:d,superName:"TheoPathOperation",statics:{TYPE:"Z",decodeFromArray:function(t){return new d}},props:{trailingPoint:function(){return y.TheoPoint.INVALID},render:function(t){t.closePath()},asString:{get:function(){return"Z"}}}}),d),P.PROPERTY_OPERATIONS="ops",P.AppendPathRenderer=(m=function(t,e){this.sink=t,this.transform=e},_.defineClass({name:"AppendPathRenderer",ctor:m,superName:"CoreObject",statics:{_implements:function(t){return"TheoPathRenderer"==t}},props:{rectangle:function(t,e,n,i){var r=this.transform.transformPoint(new y.TheoPoint(t,e));this.sink.moveTo(r.x,r.y),r=this.transform.transformPoint(new y.TheoPoint(n,e)),this.sink.lineTo(r.x,r.y),r=this.transform.transformPoint(new y.TheoPoint(n,i)),this.sink.lineTo(r.x,r.y),r=this.transform.transformPoint(new y.TheoPoint(t,i)),this.sink.lineTo(r.x,r.y),this.sink.closePath()},ellipse:function(t,e,n,i){var r=(n-t)/2,o=(i-e)/2,s=new y.TheoPoint((t+n)/2,(e+i)/2);function a(t,e){return new y.TheoPoint(t,e)}var h=4*(Math.sqrt(2)-1)/3,u=[a(1,0),a(1,h),a(h,1),a(0,1),a(-h,1),a(-1,h),a(-1,0),a(-1,-h),a(-h,-1),a(0,-1),a(h,-1),a(1,-h),a(1,0)],l=R.Matrix2D.scalingXY(r,o).translate(s).concat(this.transform);u=_.clone(l.transformPoints(_.clone(u))),this.sink.moveTo(u[0].x,u[0].y);for(var c=_.iter(_.stride(1,13,3));!c.done;c.next()){var f=c.value;this.sink.cubicBezier(u[f+0].x,u[f+0].y,u[f+1].x,u[f+1].y,u[f+2].x,u[f+2].y)}this.sink.closePath()},newPath:function(t,e,n,i,r){this.sink.newPath(t,e,n,i,r)},moveTo:function(t,e){var n=this.transform.transformPoint(new y.TheoPoint(t,e));this.sink.moveTo(n.x,n.y)},lineTo:function(t,e){var n=this.transform.transformPoint(new y.TheoPoint(t,e));this.sink.lineTo(n.x,n.y)},cubicBezier:function(t,e,n,i,r,o){var s=this.transform.transformPoint(new y.TheoPoint(t,e)),a=this.transform.transformPoint(new y.TheoPoint(n,i)),h=this.transform.transformPoint(new y.TheoPoint(r,o));this.sink.cubicBezier(s.x,s.y,a.x,a.y,h.x,h.y)},quadraticBezier:function(t,e,n,i){var r=this.transform.transformPoint(new y.TheoPoint(t,e)),o=this.transform.transformPoint(new y.TheoPoint(n,i));this.sink.quadraticBezier(r.x,r.y,o.x,o.y)},closePath:function(){this.sink.closePath()}}}),m),P.TheoArbitraryPath=(T=function(){this.ops_=[]},_.defineClass({name:"TheoArbitraryPath",ctor:T,superName:"TheoPath",statics:{TYPE:{get:function(){return"arbitrary"}},ArbitraryPathFromPath:function(t,e){var n=T.init_31cf(t.pathFillType,t.pathEndcapType,t.pathJoinType,t.pathStrokeWeight,t.pathMiterLimit);return n.addPath(t,e),n},ArbitraryPathWithOptions:function(t,e,n,i,r){return T.init_31cf(t,e,n,i,r)},decodeJsonDict:function(t){var e;if(e=_.as(t[P.PROPERTY_OPERATIONS],["Array","Any"])){for(var n=T.init_d41d(),i=new P.DecodeState(e,0);i.index<e.length;){var r;if(null!=(r=_.as(e[i.index],"String")))if(i.index+=1,r==P.TheoPathOpMoveTo.TYPE)n.ops_.push(P.TheoPathOpMoveTo.decodeFromArray(i));else if(r==P.TheoPathOpLineTo.TYPE)n.ops_.push(P.TheoPathOpLineTo.decodeFromArray(i));else if(r==P.TheoPathOpRectangle.TYPE){var o;(o=P.TheoPathOpRectangle.decodeFromArray(i))&&n.ops_.push(o)}else r==P.TheoPathOpEllipse.TYPE?n.ops_.push(P.TheoPathOpEllipse.decodeFromArray(i)):r==P.TheoPathOpCubicBezier.TYPE?n.ops_.push(P.TheoPathOpCubicBezier.decodeFromArray(i)):r==P.TheoPathOpQuadraticBezier.TYPE?n.ops_.push(P.TheoPathOpQuadraticBezier.decodeFromArray(i)):r==P.TheoPathOpClosePath.TYPE&&n.ops_.push(P.TheoPathOpClosePath.decodeFromArray(i));else i.index+=1,g.CoreAssert.fail("unexpected non-string in ops chain")}return n}return null},_implements:function(t){return"TheoPathRenderer"==t}},props:{init_d41d:function(){P.TheoPath.call(this,T.TYPE)},init_31cf:function(t,e,n,i,r){P.TheoPath.call(this,T.TYPE),this.pathFillType=t,this.pathEndcapType=e,this.pathJoinType=n,this.pathStrokeWeight=i,this.pathMiterLimit=r},bounds:{get:function(){if(null==this.bounds_){for(var t=y.TheoPoint.INVALID,e=_.iter(this.ops_);!e.done;e.next()){var n,i=e.value;(n=i.boundsFrom(t))&&(this.bounds_=n.unionWith(this.bounds_),t=i.trailingPoint())}if(null!=this.bounds_&&this.pathFillType==P.TheoPath.PATHFILL_NONE&&this.pathStrokeWeight>0){var r=-1*this.pathStrokeWeight/2;this.bounds_=this.bounds_.insetXY(r,r)}}return this.bounds_}},clear:function(){this.ops_.splice(0)},newPath:function(t,e,n,i,r){},isOnlyMoves:function(){for(var t=_.iter(this.ops_);!t.done;t.next())if(t.value.type!=P.TheoPathOpMoveTo.TYPE)return!1;return!0},rectangle:function(t,e,n,i){this.ops_.push(new P.TheoPathOpRectangle(new C.TheoRect(t,e,n,i)))},roundedRectangle:function(t,e,n,i,r,o){var s=4*(Math.sqrt(2)-1)/3,a=s*r,h=s*o;this.moveTo(t+r,e),this.lineTo(n-r,e);var u=n-r+a,l=e+o-h;this.cubicBezier(u,e,n,l,n,e+o),this.lineTo(n,i-o);var c=i-o+h,f=n-r+a;this.cubicBezier(n,c,f,i,n-r,i),this.lineTo(t+r,i);var p=t+r-a,d=i-o+h;this.cubicBezier(p,i,t,d,t,i-o),this.lineTo(t,e+o);var m=e+o-h,T=t+r-a;this.cubicBezier(t,m,T,e,t+r,e),this.closePath()},ellipse:function(t,e,n,i){this.ops_.push(new P.TheoPathOpEllipse(new C.TheoRect(t,e,n,i)))},moveTo:function(t,e){this.ops_.push(new P.TheoPathOpMoveTo(new y.TheoPoint(t,e)))},lineTo:function(t,e){this.ops_.push(new P.TheoPathOpLineTo(new y.TheoPoint(t,e)))},addLines:function(t){if(t.length>0){this.ops_.push(new P.TheoPathOpMoveTo(t[0]));var e=t.concat();e.shift();for(var n=_.iter(e);!n.done;n.next()){var i=n.value;this.ops_.push(new P.TheoPathOpLineTo(i))}}},cubicBezier:function(t,e,n,i,r,o){this.ops_.push(new P.TheoPathOpCubicBezier(new y.TheoPoint(t,e),new y.TheoPoint(n,i),new y.TheoPoint(r,o)))},quadraticBezier:function(t,e,n,i){this.ops_.push(new P.TheoPathOpQuadraticBezier(new y.TheoPoint(t,e),new y.TheoPoint(n,i)))},closePath:function(){this.ops_.push(new P.TheoPathOpClosePath)},addPath:function(t,e){t.render(new P.AppendPathRenderer(this,e))},simplestForm:{get:function(){var t,e,n=this;if(null==this.simplestForm_&&(1==this.ops_.length?(t=_.as(this.ops_[0],P.TheoPathOpRectangle))?this.simplestForm_=new P.TheoRectanglePath(t.rect):(e=_.as(this.ops_[0],P.TheoPathOpEllipse))&&(this.simplestForm_=new P.TheoEllipsePath(e.rect)):0==this.ops_.length&&(this.simplestForm_=P.TheoPath.EMPTY),null==this.simplestForm_))return this;return _.opt(this.simplestForm_,function(t){return t.pathFillType=n.pathFillType}),_.opt(this.simplestForm_,function(t){return t.pathStrokeWeight=n.pathStrokeWeight}),_.opt(this.simplestForm_,function(t){return t.pathEndcapType=n.pathEndcapType}),_.opt(this.simplestForm_,function(t){return t.pathJoinType=n.pathJoinType}),_.opt(this.simplestForm_,function(t){return t.pathMiterLimit=n.pathMiterLimit}),this.simplestForm_}},render:function(t){t.newPath(this.pathFillType,this.pathEndcapType,this.pathJoinType,this.pathStrokeWeight,this.pathMiterLimit),this.ops_.forEach(function(e){return e.render(t)})},encodeJson:function(){var t=P.TheoPath.prototype.encodeJson.call(this),e=[];t[P.PROPERTY_OPERATIONS]=e;for(var n=_.iter(this.ops_);!n.done;n.next())n.value.encodeToArray(e);return t},appearanceHash:{get:function(){var t,e="(arbitrary:"+this.ops_.map(function(t){return t.asString},this).join(";")+")";return(t=_.opt(x.Host.crypto,function(t){return t.md5(e)}))||null!=t?t:e}}}}),T)},9:function(t,e,n){var i,r,o,s,a=e,h=n(0),u=n(1),l=n(4),c=n(26),f=n(15),p=n(10);a.flip_affects_only_yscale=!1,a.TransformValuesOrdering=h.defineEnum("TransformValuesOrdering",{SKRT:0,RKST:1}),a.TransformValues=(i=function(t,e,n,i,r,o,s,a){this.ordering=t,this.xscale=e,this.yscale=n,this.skew=i,this.rotCosine=r,this.rotSine=o,this.tx=s,this.ty=a,l.CoreObject.call(this)},h.defineClass({name:"TransformValues",ctor:i,superName:"CoreObject",props:{description:{get:function(){var t=Math.acos(-1);return"sx: "+this.xscale+", sy: "+this.yscale+", angle: "+180*Math.atan2(this.rotSine,this.rotCosine)/t+" degs, skew: "+this.skew+", tx: "+this.tx+", ty: "+this.ty}}}}),i),a.ExtractedScale=(r=function(t,e){this.matrix=t,this.scale=e,l.CoreObject.call(this)},h.defineClass({name:"ExtractedScale",ctor:r,superName:"CoreObject"}),r),a.Matrix2D=(o=function(t,e,n,i,r,o){this.transformValuesRKST_=null,this.transformValues_=null,this.extractedScale_=null,this.inverse_=null,u.CoreAssert.isFalse(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)),u.CoreAssert.isFalse(h.isInfinite(t)||h.isInfinite(e)||h.isInfinite(n)||h.isInfinite(i)||h.isInfinite(r)||h.isInfinite(o)),this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=o,this.isIdentity=1==t&&0==e&&0==n&&1==i&&0==r&&0==o,l.CoreObject.call(this),0==this.determinant&&u.CoreAssert.warning("Creating a singular Matrix2D")},s={},h.defineClass({name:"Matrix2D",ctor:o,superName:"CoreObject",statics:{Identity:{get:function(){return void 0===s.Identity&&(s.Identity=new o(1,0,0,1,0,0)),s.Identity}},concat2:function(t,e){return new o(t.a*e.a+t.b*e.c,t.a*e.b+t.b*e.d,t.c*e.a+t.d*e.c,t.c*e.b+t.d*e.d,t.tx*e.a+t.ty*e.c+e.tx,t.tx*e.b+t.ty*e.d+e.ty)},scalingXYfromPoint:function(t,e,n){return o.translation(t.multiply(-1)).scaleXY(e,n).translate(t)},translation:function(t){return o.translationXY(t.x,t.y)},translationXY:function(t,e){return new o(1,0,0,1,t,e)},scaling:function(t){return o.scalingXY(t.x,t.y)},scalingXY:function(t,e){return new o(t,0,0,e,0,0)},uniformScaling:function(t){return new o(t,0,0,t,0,0)},rotation:function(t,e){var n=t,i=e,r=n*n+e*e;return 1!=r&&(n/=r=Math.sqrt(r),i/=r),new o(n,i,-i,n,0,0)},skewing:function(t){return new o(1,0,t,1,0,0)},fromArray:function(t){if(6!=t.length)return u.CoreAssert.fail("Matrix2D.decodeJson: Array doesn't have 6 elements."),o.Identity;var e=h.as(t[0],"Double"),n=h.as(t[1],"Double"),i=h.as(t[2],"Double"),r=h.as(t[3],"Double"),s=h.as(t[4],"Double"),a=h.as(t[5],"Double");return null==e||null==n||null==i||null==r||null==s||null==a?(u.CoreAssert.fail("Matrix2D.decodeJson: Array doesn't have 6 numeric elements."),o.Identity):new o(e,n,i,r,s,a)},decodeJson:function(t){var e;return(e=h.as(t,["Array","Any"]))?o.fromArray(h.clone(e)):o.Identity},calculateResizeTransform:function(t,e,n,i){var r=o.translation(f._negate_TheoPoint(t.eval(n)));if(i!=c.FitType.None){var s=e.width/t.width,h=e.height/t.height;i==c.FitType.ProportionalFit?h=s=Math.min(s,h):i==c.FitType.ProportionalFill&&(h=s=Math.max(s,h)),r=a._asterisk_Matrix2D_Matrix2D(r,o.scalingXY(s,h))}return r=a._asterisk_Matrix2D_Matrix2D(r,o.translation(e.eval(n)))}},props:{equal:function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},finite:{get:function(){return isFinite(this.a)&&isFinite(this.b)&&isFinite(this.c)&&isFinite(this.d)&&isFinite(this.tx)&&isFinite(this.ty)}},determinant:{get:function(){return this.a*this.d-this.b*this.c}},preservesBoxes:{get:function(){return 0==this.b&&0==this.c||0==this.a&&0==this.d}},transformValues:{get:function(){return null==this.transformValues_&&(this.transformValues_=this.calculateTransformValuesSKRT()),this.transformValues_}},transformValuesRKST:{get:function(){return null==this.transformValuesRKST_&&(this.transformValuesRKST_=this.calculateTransformValuesRKST()),this.transformValuesRKST_}},extractedScale:{get:function(){return null==this.extractedScale_&&(this.extractedScale_=this.calculateExtractedScale()),this.extractedScale_}},precat:function(t){return o.concat2(t,this)},concat:function(t){return o.concat2(this,t)},translate:function(t){return this.concat(o.translation(t))},translateXY:function(t,e){return this.concat(o.translationXY(t,e))},scaleXY:function(t,e){return this.concat(o.scalingXY(t,e))},scaleXYfromPoint:function(t,e,n){return this.concat(o.scalingXYfromPoint(t,e,n))},rotate:function(t,e){return this.concat(o.rotation(t,e))},rotateTo:function(t,e){var n=t,i=e,r=t*t+e*e;1!=r&&(n/=r=Math.sqrt(r),i/=r);var s=this.transformValues,a=s.rotCosine,h=s.rotSine;return this.concat(new o(a,-h,h,a,0,0)).concat(new o(n,i,-i,n,0,0))},scaleTo:function(t,e){var n=this.transformValues,i=n.rotCosine,r=n.rotSine,s=this.concat(new o(i,-r,r,i,0,0));return s=(s=s.concat(new o(1,0,-n.skew,1,0,0))).concat(new o(1/n.xscale,0,0,1/n.yscale,0,0)),s=(s=(s=(s=new o(1,0,0,1,s.tx,s.ty)).concat(new o(t,0,0,e,0,0))).concat(new o(1,0,n.skew,1,0,0))).concat(new o(i,r,-r,i,0,0))},skewTo:function(t){var e=this.transformValues,n=e.rotCosine,i=e.rotSine,r=this.concat(new o(n,-i,i,n,0,0));return r=r.concat(new o(1,0,-e.skew,1,0,0)),r=(r=(r=new o(r.a,0,0,r.d,r.tx,r.ty)).concat(new o(1,0,t,1,0,0))).concat(new o(n,i,-i,n,0,0))},translateTo:function(t,e){return new o(this.a,this.b,this.c,this.d,t,e)},inverse:{get:function(){return null==this.inverse_&&(this.inverse_=this.calculateInverse()),this.inverse_}},transformPoint:function(t){return new f.TheoPoint(t.x*this.a+t.y*this.c+this.tx,t.x*this.b+t.y*this.d+this.ty)},transformLinear:function(t){return new f.TheoPoint(t.x*this.a+t.y*this.c,t.x*this.b+t.y*this.d)},transformRect:function(t){if(this.isIdentity)return t;var e=t.minX*this.a+t.minY*this.c+this.tx,n=t.minX*this.b+t.minY*this.d+this.ty,i=t.maxX*this.a+t.minY*this.c+this.tx,r=t.maxX*this.b+t.minY*this.d+this.ty,o=t.minX*this.a+t.maxY*this.c+this.tx,s=t.minX*this.b+t.maxY*this.d+this.ty,a=t.maxX*this.a+t.maxY*this.c+this.tx,h=t.maxX*this.b+t.maxY*this.d+this.ty;return new p.TheoRect(Math.min(Math.min(Math.min(e,i),o),a),Math.min(Math.min(Math.min(n,r),s),h),Math.max(Math.max(Math.max(e,i),o),a),Math.max(Math.max(Math.max(n,r),s),h))},transformPoints:function(t){for(var e=[],n=h.iter(t);!n.done;n.next()){var i=n.value;e.push(this.transformPoint(i))}return e},interpolateWith:function(t,e){return new o(this.a*(1-e)+t.a*e,this.b*(1-e)+t.b*e,this.c*(1-e)+t.c*e,this.d*(1-e)+t.d*e,this.tx*(1-e)+t.tx*e,this.ty*(1-e)+t.ty*e)},asArray:{get:function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}},encode:function(){return u.CoreAssert.fail("Matrix2D: Use encodeJson(), not encode()"),[]},encodeJson:function(){return u.CoreAssert.isFalse(isNaN(this.a),"Can't persist NaN a value"),u.CoreAssert.isFalse(isNaN(this.b),"Can't persist NaN b value"),u.CoreAssert.isFalse(isNaN(this.c),"Can't persist NaN c value"),u.CoreAssert.isFalse(isNaN(this.d),"Can't persist NaN d value"),u.CoreAssert.isFalse(isNaN(this.tx),"Can't persist NaN tx value"),u.CoreAssert.isFalse(isNaN(this.ty),"Can't persist NaN ty value"),h.as([this.a,this.b,this.c,this.d,this.tx,this.ty],"AnyObject")},calculateTransformValuesSKRT:function(){var t=0,e=0,n=0,i=0,r=0,o=this.a*this.a+this.b*this.b;i=0==this.b?Math.abs(this.a):0==this.a?Math.abs(this.b):1==o?1:Math.sqrt(o);var s=this.a*this.d-this.b*this.c;return u.CoreAssert.isTrue(0==s||s<0||s>0),!a.flip_affects_only_yscale&&s<0&&this.a<0&&(i=-i),0==s?(t=0,0!=i||(0==this.c&&0==this.d?(e=1,n=0,i=0,r=0):(i=0,0==this.c?(r=this.d,e=1,n=0):0==this.d?(r=this.c,e=0,n=-1):(r=Math.sqrt(this.c*this.c+this.d*this.d),e=this.d/r,n=-this.c/r)))):(t=(this.a*this.c+this.b*this.d)/s,e=this.a/i,n=this.b/i,1==e?n=0:1==n?e=0:-1==e?n=0:-1==n?e=0:0==n?e=e>0?1:-1:0==e&&(n=n>0?1:-1),r=o==s?i:o==-s?-i:0==this.b?this.a/i*this.d:0==this.a?-this.b/i*this.c:s/i),new a.TransformValues(a.TransformValuesOrdering.SKRT,i,r,t,e,n,this.tx,this.ty)},calculateTransformValuesRKST:function(){var t=0,e=0,n=0,i=0,r=0,o=this.b*this.b+this.d*this.d;r=0==this.b?Math.abs(this.d):0==this.d?Math.abs(this.b):1==o?1:Math.sqrt(o);var s=this.a*this.d-this.b*this.c;return u.CoreAssert.isTrue(0==s||s<0||s>0),s<0&&this.d<0&&(r=-r),0==s?(t=0,0!=r||(0==this.c&&0==this.d?(e=1,n=0,i=0,r=0):(i=0,0==this.c?(r=this.d,e=1,n=0):0==this.d?(r=this.c,e=0,n=-1):(r=Math.sqrt(this.c*this.c+this.d*this.d),e=this.d/r,n=-this.c/r)))):(t=(this.a*this.b+this.c*this.d)/s,e=this.d/r,n=this.b/r,1==e?n=0:1==n?e=0:-1==e?n=0:-1==n?e=0:0==n?e=e>0?1:-1:0==n&&(n=n>0?1:-1),i=o==s?r:o==-s?-r:0==this.b?this.d/r*this.a:0==this.d?-this.b/r*this.c:s/r),new a.TransformValues(a.TransformValuesOrdering.RKST,i,r,t,e,n,this.tx,this.ty)},calculateExtractedScale:function(){var t=this.transformValues,e=1,n=1,i=t.xscale,r=t.yscale;i<0&&(e=-1,i=-i),r<0&&(n=-1,r=-r);var s=this;return 1==i&&1==r||(s=new o(e,0,0,n,0,0).concat(new o(1,0,t.skew,1,0,0)).concat(new o(t.rotCosine,t.rotSine,-t.rotSine,t.rotCosine,0,0)).concat(o.translationXY(t.tx,t.ty))),new a.ExtractedScale(s,new f.TheoPoint(i,r))},calculateInverse:function(){var t=this.determinant;if(0==t)return null;var e=1/t;return new o(e*this.d,e*-this.b,e*-this.c,e*this.a,e*(this.c*this.ty-this.d*this.tx),e*(this.b*this.tx-this.a*this.ty))},asString:{get:function(){return"a: "+this.a+",b: "+this.b+",c: "+this.c+",d: "+this.d+",tx: "+this.tx+",ty: "+this.ty}},description:{get:function(){var t=this.transformValues;return"["+h.toDouble(this.a)+" "+h.toDouble(this.b)+" "+h.toDouble(this.c)+" "+h.toDouble(this.d)+" "+h.toDouble(this.tx)+" "+h.toDouble(this.ty)+"]sx: "+h.toDouble(t.xscale)+", sy: "+h.toDouble(t.yscale)+", angle: "+h.toDouble(180*Math.atan2(t.rotSine,t.rotCosine)/Math.acos(-1))+", skew: "+h.toDouble(t.skew)}}}}),o),a._equality_Matrix2D_Matrix2D=function(t,e){return t.equal(e)},a._asterisk_Matrix2D_Matrix2D=function(t,e){return a.Matrix2D.concat2(t,e)},a._asterisk_TheoRect_Matrix2D=function(t,e){return e.transformRect(t)},a._asterisk_TheoPoint_Matrix2D=function(t,e){return e.transformPoint(t)}},94:function(t,e,n){var i,r=e,o=n(0),s=n(1),a=n(4),h=n(28);r.TheoMatrix=(i=function(t){if(this.m=o.clone(t),t.length>0){0==t[0].length?(this.cols=0,this.rows=0):(this.cols=t[0].length,this.rows=t.length);for(var e=o.iter(t);!e.done;e.next()){var n=e.value;s.CoreAssert.isTrue(this.cols==n.length,"row lengths do not match")}}else this.rows=0,this.cols=0;a.CoreObject.call(this)},o.defineClass({name:"TheoMatrix",ctor:i,superName:"CoreObject",statics:{E_DOUBLE:2.718281828459045,empty:function(){return new i([[]])},zeros:function(t,e){for(var n=[],r=o.iter(o.range(0,t,!1));!r.done;r.next()){for(var s=[],a=o.iter(o.range(0,e,!1));!a.done;a.next())s.push(0);n.push(o.clone(s))}return new i(o.clone(n))},ones:function(t,e){for(var n=[],r=o.iter(o.range(0,t,!1));!r.done;r.next()){for(var s=[],a=o.iter(o.range(0,e,!1));!a.done;a.next())s.push(1);n.push(o.clone(s))}return new i(o.clone(n))},decodeJson:function(t){return null==t?null:(e=o.as(t,["Array","Any"]))?new i(o.clone(e)):null;var e},createMatrixFromList:function(t,e,n){s.CoreAssert.isTrue(t.length==e*n);for(var r=[],a=o.iter(o.range(0,n,!1));!a.done;a.next()){for(var h=a.value,u=[],l=o.iter(o.range(0,e,!1));!l.done;l.next()){var c=l.value;u.push(t[h*e+c])}r.push(o.clone(u))}return new i(o.clone(r))}},props:{value:function(t,e){return t<this.rows&&e<this.cols?this.m[t][e]:(s.CoreAssert.fail("out of bounds"),0)},setValue:function(t,e,n){t<this.rows&&e<this.cols?this.m[t][e]=n:s.CoreAssert.fail("out of bounds")},setRowValue:function(t,e){if(t<this.rows)for(var n=o.iter(o.range(0,this.cols,!1));!n.done;n.next()){var i=n.value;this.m[t][i]=e}else s.CoreAssert.fail("out of bounds")},setColValue:function(t,e){if(t<this.cols)for(var n=o.iter(o.range(0,this.rows,!1));!n.done;n.next()){var i=n.value;this.m[i][t]=e}else s.CoreAssert.fail("out of bounds")},sum:function(){return this.isEmpty()?null:this.sumDim(1).sumDim(0).value(0,0)},maxElement:function(){return this.isEmpty()?null:o.max(this.asFlatArray)},minElement:function(){return this.isEmpty()?null:o.min(this.asFlatArray)},sumRows:function(){return this.sumDim(0)},sumColumns:function(){return this.sumDim(1)},size:{get:function(){return new h.TheoSize(o.toDouble(this.cols),o.toDouble(this.rows))}},width:{get:function(){return this.cols}},height:{get:function(){return this.rows}},numElements:{get:function(){return this.cols*this.rows}},sumRegion:function(t){if(!(t.minX>=0&&t.minY>=0&&o.toInt(t.maxX)<this.cols&&o.toInt(t.maxY)<this.rows))return s.CoreAssert.fail("out of bounds"),0;for(var e=o.toInt(t.minX),n=o.toInt(t.minY),i=o.toInt(t.maxX),r=o.toInt(t.maxY),a=0,h=o.iter(o.range(e,i,!1));!h.done;h.next())for(var u=h.value,l=o.iter(o.range(n,r,!1));!l.done;l.next()){var c=l.value;a+=this.m[c][u]}return a},sumDim:function(t){if(void 0===t&&(t=null),null==t)return this.sumRows().sumColumns();if(1==t){for(var e=[],n=o.iter(this.m);!n.done;n.next()){var r=n.value;e.push([r.reduce(function(t,e){return t+e},0)])}return new i(o.clone(e))}if(0==t){e=[];for(var a=o.iter(o.range(0,this.cols,!1));!a.done;a.next()){for(var h=a.value,u=0,l=o.iter(o.range(0,this.rows,!1));!l.done;l.next()){var c=l.value;u+=this.m[c][h]}e.push(u)}return new i([e])}return s.CoreAssert.fail("Only 2 dimensional matrices are supported at the moment"),i.empty()},isEmpty:function(){return 0==this.rows&&0==this.cols},matrixMultiply:function(t){var e=[];if(this.cols!=t.rows)return s.CoreAssert.fail("matrices do not have correct dimensions"),i.empty();for(var n=o.iter(o.range(0,this.rows,!1));!n.done;n.next()){for(var r=n.value,a=[],h=o.iter(o.range(0,t.cols,!1));!h.done;h.next()){for(var u=h.value,l=0,c=o.iter(o.range(0,t.rows,!1));!c.done;c.next()){var f=c.value;l+=this.m[r][f]*t.value(f,u)}a.push(l)}e.push(o.clone(a))}var p=new i(o.clone(e));return s.CoreAssert.isTrue(p.rows==this.rows,"rows do not match"),s.CoreAssert.isTrue(p.cols==t.cols,"cols do not match"),p},multiply:function(t){for(var e=[],n=o.iter(o.range(0,this.rows,!1));!n.done;n.next()){for(var r=n.value,s=this.m[r].concat(),a=o.iter(o.range(0,this.cols,!1));!a.done;a.next()){var h=a.value;s[h]=s[h]*t.value(1==t.rows?0:r,h)}e.push(o.clone(s))}return new i(o.clone(e))},multiplyConstant:function(t){var e=this,n=this.m.map(function(n){return n.map(function(e){return e*t},e)},this);return new i(o.clone(n))},divide:function(t){var e=this,n=t.m.map(function(t){return t.map(function(t){return 1/t},e)},this);return this.multiply(new i(o.clone(n)))},exp:function(){var t=this,e=this.m.map(function(e){return e.map(function(t){return Math.pow(i.E_DOUBLE,t)},t)},this);return new i(o.clone(e))},squared:function(){var t=this,e=this.m.map(function(e){return e.map(function(t){return t*t},t)},this);return new i(o.clone(e))},squareRoot:function(){var t=this,e=this.m.map(function(e){return e.map(function(t){return Math.sqrt(t)},t)},this);return new i(o.clone(e))},matrixLog:function(){var t=this,e=this.m.map(function(e){return e.map(function(t){return Math.log(t)},t)},this);return new i(o.clone(e))},sigmoid:function(){var t=this,e=this.m.map(function(e){return e.map(function(t){return 1/(1+Math.pow(i.E_DOUBLE,-1*t))},t)},this);return new i(o.clone(e))},relu:function(){var t=this,e=this.m.map(function(e){return e.map(function(t){return Math.max(0,t)},t)},this);return new i(o.clone(e))},add:function(t){for(var e=[],n=o.iter(o.range(0,this.rows,!1));!n.done;n.next()){for(var r=n.value,s=this.m[r].concat(),a=o.iter(o.range(0,this.cols,!1));!a.done;a.next()){var h=a.value;s[h]+=t.value(1==t.rows?0:r,h)}e.push(o.clone(s))}return new i(o.clone(e))},addConstant:function(t){var e=this,n=this.m.map(function(n){return n.map(function(e){return e+t},e)},this);return new i(o.clone(n))},subtract:function(t){return this.add(t.multiplyConstant(-1))},transpose:function(){for(var t=[],e=o.iter(o.range(0,this.cols,!1));!e.done;e.next()){for(var n=e.value,r=[],s=o.iter(o.range(0,this.rows,!1));!s.done;s.next()){var a=s.value;r.push(this.m[a][n])}t.push(o.clone(r))}return new i(o.clone(t))},concatenateRows:function(t){return s.CoreAssert.fail("not implemented yet"),i.empty()},concatenateColumns:function(t){return s.CoreAssert.fail("not implemented yet"),i.empty()},asArray:{get:function(){return this.m}},asFlatArray:{get:function(){return this.m.reduce(function(t,e){return t.concat(e)},[])}},encodeJson:function(){return o.as(this.m,"AnyObject")}}}),i)}}]);
//# sourceMappingURL=logomaker-entry_80dc542b-13315db0.js.map