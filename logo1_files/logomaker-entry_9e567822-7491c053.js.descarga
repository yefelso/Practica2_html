(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{105:function(e,t,n){var o,r,i=t,a=n(0),s=n(4),c=n(11),u=n(43),l=n(17),d=n(57),p=n(58),m=n(347),f=n(14),h=n(10),P=n(73);i.TextLine=(o=function(){this.words=[],this.shadows=[],this.bounds=h.TheoRect.Zero,this.isKnockout=!1},a.defineClass({name:"TextLine",ctor:o}),o),i.MotionUtils=(r=function(){s.CoreObject.call(this)},a.defineClass({name:"MotionUtils",ctor:r,superName:"CoreObject",statics:{SAME_LINE_THRESHOLD:20,sortTextLines:function(e){var t=a.clone(e);return a.sortInPlace(t,function(e,t){return e.bounds.minY<t.bounds.minY}),t},findTextLines2:function(e){var t=m.TextFacade.getTextLook(e),n=[];if(l.LockupStyle.isKnockoutLook(t)){var o=e.boundsInCoordSpace(e.totalPlacement),s=new i.TextLine;s.words.push(e),s.isKnockout=!0,s.bounds=o||h.TheoRect.Zero,n.push(s)}else{var u={};e.visitAll(c.FormaTraversal.PreOrder,function(e){var t;if(t=a.as(e,p.TextForma)){for(var n=!1,o=Math.floor(t.baselineBoundsInCoordSpace(t.placement).maxY),s=a.iter(u,!0);!s.done;s.next()){var c=s.key;if(Math.abs(c-o)<r.SAME_LINE_THRESHOLD){n=!0,o=c;break}}var l=t.boundsInCoordSpace(t.totalPlacement);if(n)u[o].bounds=u[o].bounds.unionWith(l),u[o].words.push(t);else{var d=new i.TextLine;d.words.push(t),d.bounds=l||h.TheoRect.Zero,u[o]=d}}});for(var d=a.sort(a.keys(u,"numeric")),f=a.iter(d);!f.done;f.next()){var P=f.value;n.push(u[P])}}return n},findTextLines:function(e){var t=m.TextFacade.getTextLook(e),n=[];if(l.LockupStyle.isKnockoutLook(t)&&t!=l.LockupTextLook.KnockoutOnly){var o=[];o.push(e),n.push(a.clone(o))}else{var r={};e.visitAll(c.FormaTraversal.PreOrder,function(e){var t;(t=a.as(e,p.TextForma))&&(null==r[t.rowIndex]?r[t.rowIndex]=[a.as(e,c.Forma)]:r[t.rowIndex].push(e))});for(var i=a.sort(a.keys(r,"numeric")),s=a.iter(i);!s.done;s.next()){var u=s.value;n.push(a.clone(r[u]))}}return n},getTitleLockups:function(e){if(0==e.length)return[];for(var t=a.clone(e),n={},o=a.iter(t);!o.done;o.next()){var r=o.value,i=(new d.RoleSuggester).getRole(r).role;n[r.formaID]=i}a.sortInPlace(t,function(e,t){return e.controller.currentHeightScale>t.controller.currentHeightScale});var s,c=t.shift(),u=[c],l=[];if(s=a.as(c.controller,f.TypeLockupController))for(var p=a.iter(t);!p.done;p.next()){var m;if(r=p.value,m=a.as(r.controller,f.TypeLockupController)){var h=m.getCurrentFontSize(),P=s.getCurrentFontSize();Math.abs(h-P)/Math.min(h,P)<.05?u.push(r):l.push(r)}}return[u,l]},getGifDur:function(e){var t,n,o=0;return e.isSticker()&&(n=a.as(e,P.VideoForma))&&(o=(t=a.opt(n.videoContentNode,function(e){return e.duration.seconds}))||null!=t?t:0),o},determineLoopDur:function(e,t){var n=r.getGifDur(e);if(n>0){var o=t/n;n*=Math.ceil(o)}return n},createOpacityStyle:function(e,t){var n;if(n=e.controller){var o=a.as(n,u.GroupController);a.opt(o,function(e){return e.beginBlockedUpdate()});var r=e.style.clone();n.applyOpacity(t);var i,s=e.style.clone();return(i=a.as(s,l.LockupStyle))&&(i.textOpacity=t,i.backingOpacity=t),e.applyStyle(r),a.opt(o,function(e){return e.endBlockedUpdate()}),s}var c=e.style.clone();return c.opacity=t,c},getCurrentAnimationStyle:function(e){return a.opt(a.opt(e,function(e){return e.firstPage.root.animation}),function(e){return e.animationStyle})},invalidateAnimation:function(e){a.opt(e.firstPage.root.animation,function(e){return e.invalidate()})},isCurrentAnimationValid:function(e){var t;return!!(t=a.opt(e,function(e){return e.firstPage.root.animation}))&&t.valid&&!t.animationStyle.modifiesFormaTree}}}),r)},152:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(4),c=n(413),u=n(416),l=n(8),d=n(417),p=n(309);r.DocumentPersistenceFactory=(o=function(){s.CoreObject.call(this)},i.defineClass({name:"DocumentPersistenceFactory",ctor:o,superName:"CoreObject",statics:{THEO_PROPERTY_NAMESPACE:"theo#",namespacedPropertyName:function(e){return e.includes("#")?e:o.THEO_PROPERTY_NAMESPACE+e},usesJsonDocumentEncoding:function(e){return!!e.getComponentWithAbsolutePath(p.JSON_CONTENT_PATH_DCX2D)},encoderFor:function(e){return l.Host.persistUtils.useJsonDocumentEncoding()?(a.CoreAssert.info("Using JSONDocumentEncoder"),new p.JSONDocumentEncoder(e)):(a.CoreAssert.info("Using DCXDocumentEncoder"),new u.DCXDocumentEncoder(e))},decoderFor:function(e){return o.usesJsonDocumentEncoding(e)?(a.CoreAssert.info("Using JSONDocumentDecoder"),new d.JSONDocumentDecoder(e)):(a.CoreAssert.info("Using DCXDocumentDecoder"),new c.DCXDocumentDecoder(e))}}}),o)},160:function(e,t,n){var o,r=t,i=n(0),a=n(8),s=n(94);r.MLPModel=(o=function(e,t,n,o,r,a,s,c){this.featureScalingMean=e,this.featureScalingStd=t,this.coefficients=i.clone(n),this.intercepts=i.clone(o),this.shapes=i.clone(r||[]),this.fonts=i.clone(a||[]),this.layouts=i.clone(s||[]),this.roles=i.clone(c||[]),this.fontMap={},this.finalSoftmax=!0},i.defineClass({name:"MLPModel",ctor:o,statics:{cache:{},loadNNModel:function(e){if(null==o.cache[e]){var t,n=null;if(t=i.opt(a.Host.learning,function(t){return t.loadNNJSON(e)})){var r,c=new s.TheoMatrix([t.featureScalingMean]),u=new s.TheoMatrix([t.featureScalingStd]);if(r=i.as(t.model,["Dictionary","String","Any"])){for(var l=i.clone(r.coefs),d=[],p=i.iter(l);!p.done;p.next()){var m=p.value;d.push(new s.TheoMatrix(i.clone(m)).transpose())}for(var f=i.clone(r.intercepts),h=[],P=i.iter(f);!P.done;P.next()){var g=P.value;h.push(new s.TheoMatrix([g]).transpose())}for(var M={},T=i.iter(["shapes","fonts","layouts","roles"]);!T.done;T.next()){var _=T.value;null!=r[_]?M[_]=i.clone(r[_]):M[_]=[]}n=new o(c,u,i.clone(d),i.clone(h),i.clone(M.shapes),i.clone(M.fonts),i.clone(M.layouts),i.clone(M.roles))}}o.cache[e]=n}return o.cache[e]}},props:{data:function(){for(var e=[],t=[],n=i.iter(this.coefficients);!n.done;n.next()){var o=n.value;e.push(i.clone(o.transpose().asArray))}for(var r=i.iter(this.intercepts);!r.done;r.next()){var a=r.value;t.push(i.clone(a.transpose().asFlatArray))}return i.clone(i.as({model:{coefs:e,intercepts:t,shapes:this.shapes,fonts:this.fonts,layouts:this.layouts,roles:this.roles},featureScalingMean:this.featureScalingMean.asFlatArray,featureScalingStd:this.featureScalingStd.asFlatArray},["Dictionary","String","Any"]))}}}),o)},192:function(e,t,n){var o=t,r=n(0);o.IExportDataObject=r.defineProtocol("IExportDataObject",{setPath:"(String) -> Void",setName:"(String) -> Void",setType:"(String) -> Void",setProperty:"(String, AnyObject) -> Void",setOptionalStringProperty:"(String, String) -> Void",setStringProperty:"(String, String) -> Void",setNumberProperty:"(String, Double) -> Void",setIntProperty:"(String, Integer) -> Void",setBooleanProperty:"(String, Boolean) -> Void",setOptionalBooleanProperty:"(String, Boolean) -> Void",appendMetadata:"(String) -> IExportDataObject",appendChild:"(String) -> IExportDataObject",appendComponent:"(String, String, String, String) -> Void"}),o.DocumentUnitsEnum=r.defineEnum("DocumentUnitsEnum",{PIXEL:"pixel",POINT:"point",INCH:"inch",MM:"mm",CM:"cm"}),o.IExportDataObjectDocument=r.defineProtocol("IExportDataObjectDocument",{setManifestFormatVersion:"(Integer) -> Void",setCompositeID:"(String) -> Void",setManifestProperty:"(String, AnyObject) -> Void",setDocumentSize:"(TheoSize, String) -> Void"})},199:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(94);r.NNMLPClassifier=(o=function(e,t,n){this._finalSoftmax=!0,void 0===n&&(n=!0),a.CoreAssert.isTrue(e.length==t.length),this._coefficients=i.clone(e),this._intercepts=i.clone(t);var o=e.length;this._classNum=e[o-1].rows,this._finalSoftmax=n,i.defctor(this)},i.defineClass({name:"NNMLPClassifier",ctor:o,props:{predict:function(e){return a.CoreAssert.isTrue(1==e.cols),i.clone(this.forwardPropagate(e)).AL},forwardPropagate:function(e){for(var t={},n=[],o=e,r=this.hiddenLayerNumber(),a=i.iter(i.range(0,r,!1));!a.done;a.next()){var s=a.value,c=o,u=this._coefficients[s],l=this._intercepts[s],d=i.clone(this.linearActivationForward(c,u,l,"relu"));o=d.A,n.push(i.clone(d.cache))}if(1!=this._classNum&&this._finalSoftmax){var p=i.clone(this.linearActivationForward(o,this._coefficients[r],this._intercepts[r],"softmax"));n.push(i.clone(p.cache)),t.AL=p.A,t.caches=i.clone(n)}else{var m=i.clone(this.linearActivationForward(o,this._coefficients[r],this._intercepts[r],"sigmoid"));n.push(i.clone(m.cache)),t.AL=m.A,t.caches=i.clone(n)}return t},backwardPropagate:function(e,t,n){var o={},r=[],c=[],u=[],l=n.length;a.CoreAssert.isTrue(e.cols==t.cols&&e.rows==t.rows);var d=i.clone(n[l-1]);if(1==this._classNum){var p=s.TheoMatrix.ones(t.rows,t.cols),m=t.divide(e).subtract(p.subtract(t).divide(p.subtract(e))).multiplyConstant(-1),f=i.clone(this.linearActivationBackward(m,i.clone(d),"sigmoid"));r.push(f.dAprev),c.push(f.dW),u.push(f.db)}else{var h=e.subtract(t),P=i.clone(this.linearActivationBackward(h,i.clone(d),"softmax"));r.push(P.dAprev),c.push(P.dW),u.push(P.db)}for(var g=i.iter(i.range(0,l-2,!0).reversed());!g.done;g.next()){var M=g.value;d=i.clone(n[M]);var T=i.clone(this.linearActivationBackward(r[r.length-1],i.clone(d),"relu"));r.push(T.dAprev),c.push(T.dW),u.push(T.db)}return o.dAs=i.reverse(r),o.dWs=i.reverse(c),o.dbs=i.reverse(u),o},computeCost:function(e,t){var n=t.cols;if(a.CoreAssert.isTrue(n>0),1==this._classNum){var o=s.TheoMatrix.ones(t.rows,t.cols),r=t.multiply(e.matrixLog()),c=o.subtract(t).multiply(o.subtract(e).matrixLog()),u=r.add(c);return i.toDouble(i.toInt(-1/n))*u.sumRows().value(0,0)}return t.transpose().matrixMultiply(e.matrixLog()).value(0,0)*(-1/i.toDouble(n))},linearForward:function(e,t,n){var o={};return o.Z=t.matrixMultiply(e).add(n),o.cache={A:e,W:t,b:n},o},linearActivationForward:function(e,t,n,o){var r={},a={},s=i.clone(this.linearForward(e,t,n)),c=s.Z;return a.linearCache=s.cache,a.activationCache=c,r.cache=i.clone(a),"sigmoid"==o?r.A=c.sigmoid():"relu"==o?r.A=c.relu():"softmax"==o&&(r.A=this.softmaxActivation(c)),r},hiddenLayerNumber:function(){return this._coefficients.length-1},linearBackward:function(e,t,n,o){var r={},s=t.cols,c=e.matrixMultiply(t.transpose()).multiplyConstant(i.toDouble(i.toInt(1/s))),u=e.sumColumns().multiplyConstant(i.toDouble(i.toInt(1/s))),l=n.transpose().matrixMultiply(e);return a.CoreAssert.isTrue(c.cols==n.cols&&c.rows==n.rows),a.CoreAssert.isTrue(u.cols==o.cols&&u.rows==o.rows),a.CoreAssert.isTrue(l.cols==t.cols&&l.rows==t.rows),r.dAprev=l,r.dW=c,r.db=u,r},linearActivationBackward:function(e,t,n){var o=i.clone(t.linearCache),r=o.A,a=o.W,s=o.b,c=t.activationCache,u={};if("sigmoid"==n){var l=this.sigmoidBackward(e,c);u=i.clone(this.linearBackward(l,r,a,s))}else"relu"==n?(l=this.reluBackward(e,c),u=i.clone(this.linearBackward(l,r,a,s))):"softmax"==n&&(l=e,u=i.clone(this.linearBackward(l,r,a,s)));return u},softmaxActivation:function(e){a.CoreAssert.isTrue(1==e.cols);var t=e.exp(),n=t.sum();return t.multiplyConstant(i.toDouble(1/n))},sigmoidBackward:function(e,t){var n=s.TheoMatrix.ones(t.rows,t.cols),o=t.sigmoid(),r=e.multiply(o).multiply(n.subtract(o));return a.CoreAssert.isTrue(r.cols==t.cols&&r.rows==t.rows),r},reluBackward:function(e,t){a.CoreAssert.isTrue(e.cols==t.cols&&e.rows==t.rows);for(var n=[],o=i.iter(i.range(0,e.rows,!1));!o.done;o.next()){for(var r=o.value,c=[],u=i.iter(i.range(0,e.cols,!1));!u.done;u.next()){var l=u.value;t.value(r,l)>=0?c.push(e.value(r,l)):c.push(0)}n.push(i.clone(c))}var d=new s.TheoMatrix(i.clone(n));return a.CoreAssert.isTrue(d.cols==t.cols&&d.rows==t.rows),d}}}),o)},203:function(e,t,n){var o=t,r=n(0);o.ANY_DOCUMENT=null,o.HostFontProviderProtocol=r.defineProtocol("HostFontProviderProtocol",{descriptorForPostScriptName:"(String, TheoDocument) -> FontDescriptor",loadFont:"(FontDescriptor, () -> Void, () -> Void) -> Void",getIncludedFonts:"(TheoDocument) -> OrderedFontSet",getSuggestableFonts:"(TheoDocument) -> OrderedFontSet"})},265:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(106),u=n(96),l=n(25),d=n(23),p=n(492),m=n(41),f=n(51),h=n(55),P=n(142),g=n(14),M=n(493);a.gvar(i,"_groupSingleton",function(){return new i.GroupFormaToPGMMapper}),a.gvar(i,"_typeLockupSingleton",function(){return new M.TypeLockupToPGMMapper}),a.gvar(i,"_gridSingleton",function(){return new p.GridToPGMMapper}),i.GroupFormaToPGMMapper=(o=function(){c.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"GroupFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=d.GroupForma.KIND),r.FORMA_KIND}},createMapper:function(e){var t;return(t=e.controller)?t instanceof g.TypeLockupController?i._typeLockupSingleton:t instanceof l.GridController?i._gridSingleton:(s.CoreAssert.fail("createMapper: couldn't map "+t.kind+" controller"),null):i._groupSingleton}},props:{makePGMRef:function(e,t,n){var o,r;return(o=a.as(e,d.GroupForma))&&(r=n.childReferences(o))?u.FormaToPGMUtils.applyCommonAnimations(t,e,new h.PGMReference(new P.PGMSimpleGroup(o.formaID,new f.PGMNodeMetadata(o.formaID,"group"),m.PGMAnimationList.EMPTY,a.clone(r)),o.placement)):(s.CoreAssert.fail("child reference generation failed"),null)}}}),o)},306:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(1),c=n(4),u=n(152),l=n(415);r.BaseNodeDecoder=(o=function(e){this.branch_=e,c.CoreObject.call(this)},i.defineClass({name:"BaseNodeDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{id:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_ID),"String")}},name:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_NAME),"String")}},type:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_TYPE),"String")}},path:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_PATH),"String")}},getPropertyOnNode:function(e){return s.CoreAssert.fail("must be overridden"),null},optionalStringProperty:function(e){return i.as(this.property(e),"String")},stringProperty:function(e,t){var n;return(n=i.as(this.property(e),"String"))||null!=n?n:t},numberProperty:function(e,t){var n;return(n=i.as(this.property(e),"Double"))||null!=n?n:t},intProperty:function(e,t){var n;return(n=i.as(this.property(e),"Int"))||null!=n?n:t},booleanProperty:function(e,t){var n;return(n=i.as(this.property(e),"Bool"))||null!=n?n:t},optionalBooleanProperty:function(e){return i.as(this.property(e),"Bool")},property:function(e){var t=u.DocumentPersistenceFactory.namespacedPropertyName(e);return i.as(this.getPropertyOnNode(t),"AnyObject")},metadata:function(e){var t=this.property(e);return i.is(t,["Dictionary","String","Any"])?new l.JSONMetadataDecoder(t):null},forEachChild:function(e){s.CoreAssert.fail("must be overridden")},forEachComponent:function(e){s.CoreAssert.fail("must be overridden")}}}),o)},307:function(e,t,n){var o,r=t,i=n(0),a=n(4),s=n(8);r.DCXComponentDecoder=(o=function(e,t){this.branch_=e,this.component_=t,a.CoreObject.call(this)},i.defineClass({name:"DCXComponentDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataComponent"==e}},props:{id:{get:function(){return this.component_.componentId}},name:{get:function(){return this.component_.name}},path:{get:function(){return this.component_.path}},mimeType:{get:function(){return this.component_.type}},etag:{get:function(){return this.component_.etag}},url:{get:function(){var e;return null!=(e=this.branch_.getPathForComponent(this.component_))?i.opt(s.Host.persistUtils,function(t){return t.fileUrlForPath(e)}):null}}}}),o)},308:function(e,t,n){var o,r=t,i=n(0),a=n(87);r.DCXNodeEncoder=(o=function(e,t){this.node_=t,a.BaseNodeEncoder.call(this,e,t)},i.defineClass({name:"DCXNodeEncoder",ctor:o,superName:"BaseNodeEncoder",statics:{_implements:function(e){return"IExportDataObjectDocument"==e||"IExportDataObject"==e}},props:{getPropertyOnNode:function(e){return i.as(this.node_.getValue(e),"AnyObject")},setPropertyOnNode:function(e,t){null!=t?this.node_.setValue(e,t):this.node_.removeValue(e)},createChildEncoder:function(e){var t=this.branch_.appendNode(e,null,this.node_);return new o(this.branch_,t)}}}),o)},309:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(1),c=n(152),u=n(8),l=n(310),d=n(115);r.PROPERTY_VALUE_CANVASES="canvases",r.PROPERTY_VALUE_CANVAS="canvas",r.PROPERTY_VALUE_CANVAS1_NAME="page-1",r.PROPERTY_VALUE_ARTBOARD="artboard",r.PROPERTY_VALUE_ARTBOARD1_NAME="artboard-1",i.gvar(r,"CANVASES_PATH",function(){return"/"+r.PROPERTY_VALUE_CANVASES}),i.gvar(r,"CANVAS1_PATH",function(){return r.CANVASES_PATH+"/"+r.PROPERTY_VALUE_CANVAS1_NAME}),i.gvar(r,"ARTBOARD1_PATH",function(){return r.CANVAS1_PATH+"/"+r.PROPERTY_VALUE_ARTBOARD1_NAME}),i.gvar(r,"JSON_CONTENT_PATH_DCX2D",function(){return r.ARTBOARD1_PATH+"/"+d.TheoDocument.COMPONENT_PATH_CONTENT}),r.PROPERTY_KEY_UNITS="units",r.PROPERTY_KEY_WIDTH="width",r.PROPERTY_KEY_HEIGHT="height",r.PROPERTY_KEY_X="x",r.PROPERTY_KEY_Y="y",r.JSONDocumentEncoder=(o=function(e){this.previouslyUsedJSONDocumentEncoding=c.DocumentPersistenceFactory.usesJsonDocumentEncoding(e),l.JSONNodeEncoder.call(this,e,{},null);var t=[d.TheoDocument.COMPONENT_RELATIONSHIP_DOM,d.TheoDocument.COMPONENT_RELATIONSHIP_METADATA,d.TheoDocument.COMPONENT_RELATIONSHIP_RENDITION,r.PROPERTY_VALUE_CANVASES];this.prepareCompositeForSave(i.clone(t)),this.componentNode_=this.getOrCreateArtboardNode()},i.defineClass({name:"JSONDocumentEncoder",ctor:o,superName:"JSONNodeEncoder",statics:{_implements:function(e){return"IExportDataObjectDocument"==e||"IExportDataObject"==e}},props:{getOrCreateArtboardNode:function(){var e=this.branch_.getNodeWithAbsolutePath(r.ARTBOARD1_PATH);if(null==e){var t=this.branch_.appendNode(null,r.PROPERTY_VALUE_CANVASES,null);i.opt(t,function(e){return e.setValue(a.PROPERTY_KEY_RELATIONSHIP,i.as(r.PROPERTY_VALUE_CANVASES,"AnyObject"))});var n=this.branch_.appendNode(null,r.PROPERTY_VALUE_CANVAS1_NAME,t);i.opt(n,function(e){return e.setValue(a.PROPERTY_KEY_RELATIONSHIP,i.as(r.PROPERTY_VALUE_CANVAS,"AnyObject"))}),e=this.branch_.appendNode(null,r.PROPERTY_VALUE_ARTBOARD1_NAME,n),i.opt(e,function(e){return e.setValue(a.PROPERTY_KEY_RELATIONSHIP,i.as(r.PROPERTY_VALUE_ARTBOARD,"AnyObject"))}),i.opt(e,function(e){return e.setValue(a.PROPERTY_KEY_NAME,i.as(r.PROPERTY_VALUE_ARTBOARD1_NAME,"AnyObject"))})}return e},getPropertyOnNode:function(e){return e==a.PROPERTY_KEY_ID?i.as(this.branch_.getValue(a.PROPERTY_KEY_ID),"AnyObject"):l.JSONNodeEncoder.prototype.getPropertyOnNode.call(this,e)},setPropertyOnNode:function(e,t){if(l.JSONNodeEncoder.prototype.setPropertyOnNode.call(this,e,t),!this.previouslyUsedJSONDocumentEncoding)switch(e){case"name":case"type":case"children":break;default:this.branch_.root.removeValue(e)}},setDocumentSize:function(e,t){var n,o;(n=this.branch_.getNodeWithAbsolutePath(r.CANVAS1_PATH))?n.setValue(r.PROPERTY_KEY_UNITS,i.as(t,"AnyObject")):s.CoreAssert.fail("expected to find a canvas node"),(o=this.branch_.getNodeWithAbsolutePath(r.ARTBOARD1_PATH))?(o.setValue(r.PROPERTY_KEY_X,i.as(0,"AnyObject")),o.setValue(r.PROPERTY_KEY_Y,i.as(0,"AnyObject")),o.setValue(r.PROPERTY_KEY_WIDTH,i.as(e.width,"AnyObject")),o.setValue(r.PROPERTY_KEY_HEIGHT,i.as(e.height,"AnyObject"))):s.CoreAssert.fail("expected to find an artboard node")},finish:function(){var e=this;l.JSONNodeEncoder.prototype.finish.call(this),this.discardStashedComponents();var t=i.opt(u.Host.persistUtils,function(t){return t.writeJsonContentToTempFile(i.as(e.jsonNode_,"AnyObject"))}),n=this.branch_.getComponentWithAbsolutePath(r.JSON_CONTENT_PATH_DCX2D);if(null!=n)this.branch_.updateComponent(n,t,!1);else{var o=this.getOrCreateArtboardNode();this.branch_.addComponent(d.TheoDocument.COMPONENT_NAME_DOM,null,d.TheoDocument.COMPONENT_MIME_TYPE_DOCUMENT_JSON,d.TheoDocument.COMPONENT_RELATIONSHIP_DOM,d.TheoDocument.COMPONENT_PATH_CONTENT,o,t,!1,null)}}}}),o)},310:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(1),c=n(308),u=n(152),l=n(11);r.PREFIX_COMPONENT="component:",r.PROPERTY_KEY_CHILDREN="children",r.PROPERTY_KEY_EXTERNAL_URL="external-url",r.JSONNodeEncoder=(o=function(e,t,n){this.manifestEncoder_=null,this.jsonNode_=t,this.parentEncoder_=n,a.BaseNodeEncoder.call(this,e,e.root)},i.defineClass({name:"JSONNodeEncoder",ctor:o,superName:"BaseNodeEncoder",statics:{_implements:function(e){return"IExportDataObjectDocument"==e||"IExportDataObject"==e}},props:{getPropertyOnNode:function(e){return this.jsonNode_[e]},setPropertyOnNode:function(e,t){null!=t?this.jsonNode_[e]=t:i.removeKey(this.jsonNode_,e)},createChildEncoder:function(e){var t={};t[a.PROPERTY_KEY_ID]=i.as(e,"AnyObject");var n=i.as(this.getPropertyOnNode(r.PROPERTY_KEY_CHILDREN),["Array","AnyObject"]);null==n&&(n=[]),n.push(t),this.setPropertyOnNode(r.PROPERTY_KEY_CHILDREN,n),s.CoreAssert.isTrue(this.getPropertyOnNode(r.PROPERTY_KEY_CHILDREN)===n);var c=new o(this.branch_,t,this);return s.CoreAssert.isTrue(i.as(c.jsonNode_,"AnyObject")===i.as(t,"AnyObject")),c},appendComponent:function(e,t,n,o){a.BaseNodeEncoder.prototype.appendComponent.call(this,e,t,n,o);var s=r.PREFIX_COMPONENT+e+"/"+t+"/"+i.replace(o,"/","+");this.setProperty(r.PROPERTY_KEY_EXTERNAL_URL,i.as(s,"AnyObject"))},getManifestEncoder:function(){if(null==this.manifestEncoder_){var e,t;null==this.parentEncoder_?this.manifestEncoder_=new c.DCXNodeEncoder(this.branch_,this.branch_.root):this.manifestEncoder_=this.parentEncoder_.getManifestEncoder().createChildEncoder(this.id),null!=(e=i.as(this.getPropertyOnNode(a.PROPERTY_KEY_PATH),"String"))&&i.opt(this.manifestEncoder_,function(t){return t.setPath(e)}),null!=(t=i.as(this.getPropertyOnNode(a.PROPERTY_KEY_TYPE),"String"))&&i.opt(this.manifestEncoder_,function(e){return e.setType(t)});var n,o=u.DocumentPersistenceFactory.namespacedPropertyName(l.Forma.PROPERTY_KIND);null!=(n=this.getPropertyOnNode(o))&&i.opt(this.manifestEncoder_,function(e){return e.setProperty(l.Forma.PROPERTY_KIND,n)})}return this.manifestEncoder_},finish:function(){a.BaseNodeEncoder.prototype.finish.call(this),this.parentEncoder_=null,this.manifestEncoder_=null}}}),o)},311:function(e,t,n){var o,r=t,i=n(0),a=n(306),s=n(1),c=n(307),u=n(8),l=n(312),d=n(310);r.PREFIX_CP="cp:",r.PREFIX_AC="ac:",r.JSONNodeDecoder=(o=function(e,t){this.node_=t,a.BaseNodeDecoder.call(this,e)},i.defineClass({name:"JSONNodeDecoder",ctor:o,superName:"BaseNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){return i.as(this.node_[e],"AnyObject")},forEachChild:function(e){var t,n=0;if(t=i.as(this.node_[d.PROPERTY_KEY_CHILDREN],["Array","Any"]))for(var r=i.iter(t);!r.done;r.next()){var a,s=r.value;(a=i.as(s,["Dictionary","String","Any"]))&&(e(new o(this.branch_,a),n),n+=1)}},forEachComponent:function(e){var t,n=0;if(null!=(t=i.as(this.property(d.PROPERTY_KEY_EXTERNAL_URL),"String"))){var o,a,p,m=null;if(t.startsWith(r.PREFIX_CP))null!=(o=i.opt(u.Host.brandkitManager,function(e){return e.getFilePathForEncodedURL(t)}))?null!=(a=i.opt(u.Host.persistUtils,function(e){return e.mimeTypeForFileAtPath(o)}))&&null!=(p=i.opt(u.Host.persistUtils,function(e){return e.fileUrlForPath(o)}))?m=l.JSONComponentDecoder.init_f390(i.opt(u.Host.resourceUtils,function(e){return e.makeGUID()}),null,this.id,a,null,p):s.CoreAssert.warning("Could not open downloaded file at "+o+"!"):s.CoreAssert.warning("Do not have a CP file for "+t+"!");else if(t.startsWith(r.PREFIX_AC)){var f=i.clone(t.substr(r.PREFIX_AC.length).split("/"))[1];(h=this.branch_.getComponentWithId(f))?m=new c.DCXComponentDecoder(this.branch_,h):s.CoreAssert.warning("No component with id "+f+"!")}else if(t.startsWith(d.PREFIX_COMPONENT)){var h;f=i.clone(t.substr(d.PREFIX_COMPONENT.length).split("/"))[1],(h=this.branch_.getComponentWithId(f))?m=new c.DCXComponentDecoder(this.branch_,h):s.CoreAssert.warning("No component with id "+f+"!")}else s.CoreAssert.warning("Unrecognized external URL format: "+t+"!");null!=m?(e(m,n),n+=1):s.CoreAssert.warning("No component found for "+t)}}}}),o)},312:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(1),c=n(4);r.JSONComponentDecoder=(o=function(){},i.defineClass({name:"JSONComponentDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataComponent"==e}},props:{init_466d:function(e){this.json_=i.clone(e),c.CoreObject.call(this)},init_f390:function(e,t,n,o,r,c){var u={};null!=e&&(u[a.PROPERTY_KEY_ID]=e),null!=t&&(u[a.PROPERTY_KEY_NAME]=t),null!=n&&(u[a.PROPERTY_KEY_PATH]=n),null!=o&&(u[a.PROPERTY_KEY_MIMETYPE]=o),null!=r&&(u[a.PROPERTY_KEY_ETAG]=r),null!=c&&(u[a.PROPERTY_KEY_URL]=c),this.init_466d(i.clone(u)),s.CoreAssert.info("init "+i.toString(e)+" "+i.toString(t)+" "+i.toString(o)+" "+i.toString(n)+" "+i.toString(c))},id:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_ID],"String")}},name:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_NAME],"String")}},path:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_PATH],"String")}},mimeType:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_MIMETYPE],"String")}},etag:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_ETAG],"String")}},url:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_URL],"String")}}}}),o)},343:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(62),c=n(48);r.MotionLogicDur=(o=function(){},i.defineClass({name:"MotionLogicDur",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,r,u,l,d=(o=i.as(n.st,"Double"))||null!=o?o:0,p=d+((r=i.as(n.dur,"Double"))||null!=r?r:1),m=[];if(p>0&&t.length>0){m=[];var f=t[0],h=t[t.length-1];d!=f.time.seconds&&m.push(f),m.push(new s.KeyFrame(c.TheoTime.fromSeconds(d),f.timingFunction,f.placement,f.bounds,f.style)),m.push(new s.KeyFrame(c.TheoTime.fromSeconds(p),h.timingFunction,h.placement,h.bounds,h.style))}(u=e.animation)?(u.keyFrames.splice(0),i.append(u.keyFrames,m)):a.CoreAssert.warning("Missing animation key-frame array"),(l=i.opt(e.animation,function(e){return e.endTime}))&&l.seconds<p&&(e.animation.endTime=c.TheoTime.fromSeconds(p))}}}),o)},344:function(e,t,n){var o,r=t,i=n(0),a=n(343);r.MotionEntryFadeIn=(o=function(){this.srcId="MotionSrcFadeIn",this.logic=new a.MotionLogicDur,this.args={st:.1,dur:.9}},i.defineClass({name:"MotionEntryFadeIn",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},345:function(e,t,n){var o,r=t,i=n(0),a=n(472);r.MotionEntryNone=(o=function(){this.srcId="",this.logic=new a.MotionLogicClear,this.args={st:0,dur:1}},i.defineClass({name:"MotionEntryNone",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},346:function(e,t,n){var o,r=t,i=n(0),a=n(473);r.MotionEntryStacked=(o=function(){this.srcId="MotionSourceStacked",this.logic=new a.MotionLogicStacked,this.args={lineDur:.3,endPadDur:1}},i.defineClass({name:"MotionEntryStacked",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},348:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(477),c=n(478),u=n(479);r.MotionSource=(o=function(){},i.defineClass({name:"MotionSource",ctor:o,statics:{getSourceAnimation:function(e,t){return"MotionSourceStacked"==e?u.MotionSourceStacked.getSrcKeyframes(t):"MotionSrcFadeIn"==e?c.MotionSrcFadeIn.getSrcKeyframes(t):"MotionSrcDropIn"==e?s.MotionSrcDropIn.getSrcKeyframes(t):(""!=e&&a.CoreAssert.warning("Unknown source animation: "+e),[])}}}),o)},354:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(26),u=n(106),l=n(96),d=n(9),p=n(41),m=n(141),f=n(51),h=n(55),P=n(210),g=n(30),M=n(205),T=n(15);i.ShapeFormaToPGMMapper=(o=function(){u.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"ShapeFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=g.ShapeForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new o),r.instance}},createMapper:function(e){return o.instance},DUMMY_REF:{get:function(){return void 0===r.DUMMY_REF&&(r.DUMMY_REF=new h.PGMReference(new f.PGMNullNode("dummy","dummy"),d.Matrix2D.Identity)),r.DUMMY_REF}},makePGMRefForShape:function(e,t,n){var r,i,u,g=o.DUMMY_REF,_=p.PGMAnimationList.EMPTY;if(null==t.sliceBox)if((u=t.style.colors.fieldPrimary)&&(r=t.canonicalArtwork.bounds)&&(i=t.bounds)){var y,S,A=d.Matrix2D.calculateResizeTransform(r,i,T.TheoPoint.ZERO,c.FitType.Stretch).concat(t.placement);(S=a.as(t.canonicalArtwork,M.TheoArtworkShape))?g=new h.PGMReference(new P.PGMShape(n,new f.PGMNodeMetadata(n,"shape"),_,r,S.paths[0],u),A):(y=a.as(t.canonicalArtwork,M.TheoArtworkClipGroup))&&(S=a.as(y.childAt(0),M.TheoArtworkShape))?g=new h.PGMReference(new m.PGMClip(n+"-clip",new f.PGMNodeMetadata(n,"shape"),p.PGMAnimationList.EMPTY,[new h.PGMReference(new P.PGMShape(n,new f.PGMNodeMetadata(n,"unclipped-shape"),_,r,S.paths[0],u),d.Matrix2D.Identity)],y.path),A):(s.CoreAssert.fail("unexpected artwork configuration"),g=new h.PGMReference(new f.PGMNullNode(n,"shape"),d.Matrix2D.Identity))}else s.CoreAssert.fail("no shape and/or primary color?"),g=new h.PGMReference(new f.PGMNullNode(n,"shape"),d.Matrix2D.Identity);else if(u=t.style.colors.fieldPrimary)if(S=a.as(t.sizedArtwork,M.TheoArtworkShape)){var N=S.paths[0];g=new h.PGMReference(new P.PGMShape(n,new f.PGMNodeMetadata(n,"shape"),_,N.bounds,N,u),t.placement)}else(y=a.as(t.sizedArtwork,M.TheoArtworkClipGroup))&&(S=a.as(y.childAt(0),M.TheoArtworkShape))?(N=S.paths[0],g=new h.PGMReference(new m.PGMClip(n+"-clip",new f.PGMNodeMetadata(n,"clip"),p.PGMAnimationList.EMPTY,[new h.PGMReference(new P.PGMShape(n,new f.PGMNodeMetadata(n,"shape"),_,N.bounds,N,u),d.Matrix2D.Identity)],y.path),t.placement)):(s.CoreAssert.fail("unexpected artwork configuration"),g=new h.PGMReference(new f.PGMNullNode(n,"shape"),d.Matrix2D.Identity));else s.CoreAssert.fail("couldn't get color and/or some bounds we need"),g=new h.PGMReference(new f.PGMNullNode(n,"shape"),d.Matrix2D.Identity);return l.FormaToPGMUtils.applyCommonAnimations(e,t,g)}},props:{makePGMRef:function(e,t,n){var r;return(r=a.as(e,g.ShapeForma))?l.FormaToPGMUtils.applyCommonAnimations(t,e,o.makePGMRefForShape(t,r,r.formaID)):(s.CoreAssert.fail("child reference generation failed"),null)}}}),o)},355:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(106),u=n(96),l=n(17),d=n(41),p=n(350),m=n(51),f=n(55),h=n(211),P=n(262),g=n(120),M=n(58);i.TextFormaToPGMMapper=(o=function(){c.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"TextFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=M.TextForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new o),r.instance}},createMapper:function(e){return o.instance},getPGMNodeForTextForma:function(e,t,n,o){var r,i,s;void 0===o&&(o=null);var c,u,f,M,T,_,y,S,A=t.textModel,N=d.PGMAnimationList.EMPTY;if((u=A.attributeAtIndex(g.FontColorAttribute.NAME,0))&&(f=a.as(u.attr,g.FontColorAttribute))&&(M=A.attributeAtIndex(g.FontSizeAttribute.NAME,0))&&(T=a.as(M.attr,g.FontSizeAttribute))&&(_=A.attributeAtIndex(g.FontDescriptorAttribute.NAME,0))&&(y=a.as(_.attr,g.FontDescriptorAttribute))&&null!=(S=l.LockupTextLook.toCaseValue((r=a.opt(a.as(a.opt(A.attributeAtIndex(g.TextLookAttribute.NAME,0),function(e){return e.attr}),g.TextLookAttribute),function(e){return e.value}))||null!=r?r:0))){var E=a.opt(a.as(a.opt(A.attributeAtIndex(g.FontStrokeColorAttribute.NAME,0),function(e){return e.attr}),g.FontStrokeColorAttribute),function(e){return e.value}),D=(i=a.opt(a.as(a.opt(A.attributeAtIndex(g.FontStrokeWidthAttribute.NAME,0),function(e){return e.attr}),g.FontStrokeWidthAttribute),function(e){return e.value}))||null!=i?i:0,C=(s=a.opt(a.as(a.opt(A.attributeAtIndex(g.TrackingAttribute.NAME,0),function(e){return e.attr}),g.TrackingAttribute),function(e){return e.value}))||null!=s?s:0,O=o||f.value;null==o&&D>0&&(S==l.LockupTextLook.KnockoutAndOutline||S==l.LockupTextLook.OutlineOnly||S==l.LockupTextLook.KnockoutAndShadow)&&(O=null),c=new h.PGMText(n,new m.PGMNodeMetadata(t.formaID,"text"),N,t.bounds,A.text,new P.PGMTextStyle(new p.PGMFont(y.value.cssName,y.value.family,y.value.capRatio),T.value,O,E,D,C))}else c=new m.PGMNullNode(n,"text-missing-attribute");return c}},props:{makePGMRef:function(e,t,n){var r;return(r=a.as(e,M.TextForma))?u.FormaToPGMUtils.applyCommonAnimations(t,r,new f.PGMReference(o.getPGMNodeForTextForma(t,r,r.formaID,null),r.placement)):(s.CoreAssert.fail("child reference generation failed"),null)}}}),o)},413:function(e,t,n){var o,r=t,i=n(0),a=n(414);r.DCXDocumentDecoder=(o=function(e){a.DCXNodeDecoder.call(this,e,e.root)},i.defineClass({name:"DCXDocumentDecoder",ctor:o,superName:"DCXNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){var t=a.DCXNodeDecoder.prototype.getPropertyOnNode.call(this,e);return null==t&&(t=i.as(this.branch_.getValue(e),"AnyObject")),t}}}),o)},414:function(e,t,n){var o,r=t,i=n(0),a=n(306),s=n(307);r.DCXNodeDecoder=(o=function(e,t){this.node_=t,a.BaseNodeDecoder.call(this,e)},i.defineClass({name:"DCXNodeDecoder",ctor:o,superName:"BaseNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){return i.as(this.node_.getValue(e),"AnyObject")},forEachChild:function(e){for(var t=0,n=i.iter(this.branch_.getChildrenOfNode(this.node_));!n.done;n.next()){var r=n.value;e(new o(this.branch_,r),t),t+=1}},forEachComponent:function(e){for(var t=0,n=i.iter(this.branch_.getComponentsOfNode(this.node_));!n.done;n.next()){var o=n.value;e(new s.DCXComponentDecoder(this.branch_,o),t),t+=1}}}}),o)},415:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(4);r.JSONMetadataDecoder=(o=function(e){this.data_=e,s.CoreObject.call(this)},i.defineClass({name:"JSONMetadataDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{id:{get:function(){return i.as(this.property(a.PROPERTY_KEY_ID),"String")}},type:{get:function(){return i.as(this.property(a.PROPERTY_KEY_TYPE),"String")}},name:{get:function(){return i.as(this.property(a.PROPERTY_KEY_NAME),"String")}},path:{get:function(){return i.as(this.property(a.PROPERTY_KEY_PATH),"String")}},optionalStringProperty:function(e){return i.as(this.data_[e],"String")},stringProperty:function(e,t){var n;return(n=i.as(this.data_[e],"String"))||null!=n?n:t},numberProperty:function(e,t){var n;return(n=i.as(this.data_[e],"Double"))||null!=n?n:t},intProperty:function(e,t){var n;return(n=i.as(this.data_[e],"Int"))||null!=n?n:t},booleanProperty:function(e,t){var n;return(n=i.as(this.data_[e],"Bool"))||null!=n?n:t},optionalBooleanProperty:function(e){return i.as(this.data_[e],"Bool")},property:function(e){return i.as(this.data_[e],"AnyObject")},metadata:function(e){return i.is(this.data_[e],["Dictionary","String","Any"])?new o(this.data_[e]):null},forEachChild:function(e){},forEachComponent:function(e){}}}),o)},416:function(e,t,n){var o,r=t,i=n(0),a=n(308),s=n(115);r.DCXDocumentEncoder=(o=function(e){a.DCXNodeEncoder.call(this,e,e.root);var t=[s.TheoDocument.COMPONENT_RELATIONSHIP_METADATA,s.TheoDocument.COMPONENT_RELATIONSHIP_RENDITION];this.prepareCompositeForSave(i.clone(t))},i.defineClass({name:"DCXDocumentEncoder",ctor:o,superName:"DCXNodeEncoder",statics:{_implements:function(e){return"IExportDataObjectDocument"==e||"IExportDataObject"==e}},props:{finish:function(){a.DCXNodeEncoder.prototype.finish.call(this),this.discardStashedComponents()}}}),o)},417:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(1),c=n(8),u=n(309),l=n(311);r.JSONDocumentDecoder=(o=function(e){var t,n,o,r={};(t=e.getComponentWithAbsolutePath(u.JSON_CONTENT_PATH_DCX2D))&&null!=(n=e.getPathForComponent(t))?null!=(o=i.opt(c.Host.persistUtils,function(e){return e.readJsonContentFromFile(n)}))&&(r=o):s.CoreAssert.warning("Could not find dom component!"),l.JSONNodeDecoder.call(this,e,r)},i.defineClass({name:"JSONDocumentDecoder",ctor:o,superName:"JSONNodeDecoder",statics:{getRequiredSynchronousComponents:function(e){return[u.JSON_CONTENT_PATH_DCX2D]},_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){if(e==a.PROPERTY_KEY_ID)return i.as(this.branch_.getValue(a.PROPERTY_KEY_ID),"AnyObject");var t=l.JSONNodeDecoder.prototype.getPropertyOnNode.call(this,e);return null==t&&(t=i.as(this.branch_.getValue(e),"AnyObject")),t}}}),o)},418:function(e,t,n){var o,r=t,i=n(0),a=n(87),s=n(1),c=n(4);r.JSONMetadataEncoder=(o=function(){this.data_={},this.childMetadata_={},c.CoreObject.call(this)},i.defineClass({name:"JSONMetadataEncoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{setPath:function(e){this.data_[a.PROPERTY_KEY_PATH]=i.as(e,"AnyObject")},setName:function(e){this.data_[a.PROPERTY_KEY_NAME]=i.as(e,"AnyObject")},setType:function(e){this.data_[a.PROPERTY_KEY_TYPE]=i.as(e,"AnyObject")},setProperty:function(e,t){null!=t?this.data_[e]=t:i.removeKey(this.data_,e)},setOptionalStringProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setStringProperty:function(e,t){this.data_[e]=i.as(t,"AnyObject")},setNumberProperty:function(e,t){s.CoreAssert.isFalse(isNaN(t),"Can't set NaN for MD prop "+e+"."),this.data_[e]=i.as(t,"AnyObject")},setIntProperty:function(e,t){this.data_[e]=i.as(t,"AnyObject")},setBooleanProperty:function(e,t){this.data_[e]=i.as(t,"AnyObject")},setOptionalBooleanProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},appendMetadata:function(e){var t=new o;return this.childMetadata_[e]=t,t},appendChild:function(e){return s.CoreAssert.warning("Someone's trying to nest a child data object in metadata, which isn't supported."),new o},appendComponent:function(e,t,n,o){s.CoreAssert.warning("Someone's trying to add a component to metadata, which isn't supported.")},encodeData:function(){for(var e=i.iter(this.childMetadata_);!e.done;e.next()){var t=e.key,n=e.value;this.data_[t]=i.as(n.encodeData(),"AnyObject")}return this.data_}}}),o)},471:function(e,t,n){var o,r=t,i=n(0),a=n(343);r.MotionEntryDropIn=(o=function(){this.srcId="MotionSrcDropIn",this.logic=new a.MotionLogicDur,this.args={st:0,dur:1.5}},i.defineClass({name:"MotionEntryDropIn",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},472:function(e,t,n){var o,r=t,i=n(0),a=n(62),s=n(254),c=n(48);r.MotionLogicClear=(o=function(){},i.defineClass({name:"MotionLogicClear",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,r,u=(o=i.as(n.st,"Double"))||null!=o?o:0,l=u+((r=i.as(n.dur,"Double"))||null!=r?r:1),d=new a.FormaAnimation(s.MotionFacade.getCurrentAnimationStyle(),c.TheoTime.fromSeconds(u),c.TheoTime.fromSeconds(l),t);e.animation=d}}}),o)},473:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(19),c=n(62),u=n(105),l=n(48);r.MotionLogicStacked=(o=function(){},i.defineClass({name:"MotionLogicStacked",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{updateColorTable:function(e,t){var n=t.style.colors.clone();i.opt(e.style,function(e){return e.colors.setColor(s.ColorRole.FieldPrimary,n.fieldPrimary)}),i.opt(e.style,function(e){return e.colors.setColor(s.ColorRole.FieldSecondary,n.fieldSecondary)})},updateFormaAnim:function(e,t,n,o,r){var a,s=[],u=l.TheoTime.fromSeconds(t),d=l.TheoTime.fromSeconds(n);if(r.length>0){var p=r[0];this.updateColorTable(p,e),u.value>0&&s.push(new c.KeyFrame(l.TheoTime.Zero,p.timingFunction,p.placement,p.bounds,p.style)),s.push(new c.KeyFrame(u,p.timingFunction,p.placement,p.bounds,p.style))}r.length>1&&(p=r[1],this.updateColorTable(p,e),s.push(new c.KeyFrame(d,p.timingFunction,p.placement,p.bounds,p.style))),(a=e.animation)&&(a.startTime=l.TheoTime.Zero,a.endTime=d,a.keyFrames.splice(0),i.append(a.keyFrames,s))},apply:function(e,t,n){var o,r,s=(o=i.as(n.lineDur,"Double"))||null!=o?o:1,c=(r=i.as(n.endPadDur,"Double"))||null!=r?r:0,d=i.clone(u.MotionUtils.findTextLines(e)),p=d.length,m=i.toDouble(p)*s+c;if(t.length<8)a.CoreAssert.warning("Less than required key-frames for Motion-Logic-Stacked");else{var f=t;if(p>0){var h=0,P=i.clone(d.shift()),g=null;d.length>0&&(g=i.clone(d.pop()));for(var M=f.slice(0,2),T=i.iter(P);!T.done;T.next()){var _=T.value;this.updateFormaAnim(_,h,h+s,m,M)}h+=s;for(var y=i.iter(i.toSequence(d));!y.done;y.next()){var S=y.value,A=S.offset,N=S.element;if(0==A%2)for(var E=f.slice(2,4),D=i.iter(N);!D.done;D.next())_=D.value,this.updateFormaAnim(_,h,h+s,m,E);else for(var C=f.slice(4,6),O=i.iter(N);!O.done;O.next())_=O.value,this.updateFormaAnim(_,h,h+s,m,C);h+=s}if(null!=g)for(var v=f.slice(6,8),F=i.iter(g);!F.done;F.next())_=F.value,this.updateFormaAnim(_,h,h+s,m,v);h+=s}}i.opt(e.animation,function(e){return e.endTime=l.TheoTime.fromSeconds(m)})}}}),o)},475:function(e,t,n){var o,r=t,i=n(0),a=n(476);r.MotionEntryStackedRoot=(o=function(){this.srcId="",this.logic=new a.MotionLogicStackedRoot,this.args={lineDur:.3,delay:.5,fadeInDur:.5,endPadDur:3.5}},i.defineClass({name:"MotionEntryStackedRoot",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},476:function(e,t,n){var o,r=t,i=n(0),a=n(11),s=n(344),c=n(345),u=n(346),l=n(254),d=n(348),p=n(105),m=n(48),f=n(73);r.ANIMATE_ICON=!1,r.MotionLogicStackedRoot=(o=function(){},i.defineClass({name:"MotionLogicStackedRoot",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,h,P,g,M=(o=i.as(n.lineDur,"Double"))||null!=o?o:1,T=(h=i.as(n.delay,"Double"))||null!=h?h:0,_=(P=i.as(n.fadeInDur,"Double"))||null!=P?P:1,y=(g=i.as(n.endPadDur,"Double"))||null!=g?g:0,S=[],A=[],N=[],E=new c.MotionEntryNone,D=new s.MotionEntryFadeIn,C=new u.MotionEntryStacked;e.visitAll(a.FormaTraversal.PreOrder,function(e){if(l.MotionFacade.applyEntryToForma(e,E),e.isTypeLockup())S.push(e);else if(e instanceof f.VideoForma&&e.isSticker()){A.push(e);var t=p.MotionUtils.getGifDur(e)-_;t>y&&(y=t)}else r.ANIMATE_ICON&&e.hasIntent(a.Forma.INTENT_ICON)&&N.push(e)});var O=0,v=S.length>1||N.length>0;if(0==A.length&&(y=2),S.length>0){for(var F=i.clone(p.MotionUtils.getTitleLockups(i.clone(S))),R=i.clone(F.shift()),I=i.clone(F.shift()),b=O,w=i.iter(R);!w.done;w.next()){var G=w.value,x=d.MotionSource.getSourceAnimation(C.srcId,G);C.logic.apply(G,x,{lineDur:M,endPadDur:v?T:0});var k=G.animation.endTime.seconds;k>b&&(b=k)}O=b;for(var Y=i.iter(I);!Y.done;Y.next()){var L=Y.value;x=d.MotionSource.getSourceAnimation(D.srcId,L),D.logic.apply(L,x,{st:O,dur:_})}}if(r.ANIMATE_ICON)for(var H=i.iter(N);!H.done;H.next()){var K=H.value;x=d.MotionSource.getSourceAnimation(D.srcId,e),D.logic.apply(K,x,{st:O,dur:_})}v&&(O+=_);var V=O+y;if(A.length>0){V+=_;for(var U=i.iter(A);!U.done;U.next()){var j=U.value;x=d.MotionSource.getSourceAnimation(D.srcId,j),D.logic.apply(j,x,{st:O,dur:_}),j.animation.endTime=m.TheoTime.fromSeconds(V)}}i.opt(e.animation,function(e){return e.animationStyle.endTime=m.TheoTime.fromSeconds(V)})}}}),o)},477:function(e,t,n){var o,r=t,i=n(0),a=n(62),s=n(9),c=n(15),u=n(48),l=n(125);r.MotionSrcDropIn=(o=function(){},i.defineClass({name:"MotionSrcDropIn",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=u.TheoTime.Zero,o=u.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new c.TheoPoint(0,-400)),i=s.Matrix2D.Identity,d=e.style.clone();return t.push(new a.KeyFrame(n,l.TimingFunctionType.Linear,r,null,d)),t.push(new a.KeyFrame(o,l.TimingFunctionType.Linear,i,null,d)),t}}}),o)},478:function(e,t,n){var o,r=t,i=n(0),a=n(62),s=n(9),c=n(105),u=n(48),l=n(125);r.MotionSrcFadeIn=(o=function(){},i.defineClass({name:"MotionSrcFadeIn",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=u.TheoTime.Zero,o=u.TheoTime.fromSeconds(1),r=s.Matrix2D.Identity,i=s.Matrix2D.Identity,d=c.MotionUtils.createOpacityStyle(e,0),p=e.style.clone();return t.push(new a.KeyFrame(n,l.TimingFunctionType.Linear,r,null,d)),t.push(new a.KeyFrame(o,l.TimingFunctionType.Linear,i,null,p)),t}}}),o)},479:function(e,t,n){var o,r=t,i=n(0),a=n(62),s=n(480),c=n(481),u=n(48);r.MotionSourceStacked=(o=function(){},i.defineClass({name:"MotionSourceStacked",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=c.MotionSourceFadeInV.getSrcKeyframes(e),o=s.MotionSourceFadeInH.getSrcKeyframes(e);return t.push(n[0]),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(.25),n[1].timingFunction,n[1].placement,n[1].bounds,n[1].style)),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(.25),o[0].timingFunction,o[0].placement,o[0].bounds,o[0].style)),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(.5),o[1].timingFunction,o[1].placement,o[1].bounds,o[1].style)),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(.5),o[0].timingFunction,i.opt(o[0].placement,function(e){return e.inverse}),o[0].bounds,o[0].style)),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(.75),o[1].timingFunction,o[1].placement,o[1].bounds,o[1].style)),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(.75),n[0].timingFunction,i.opt(n[0].placement,function(e){return e.inverse}),n[0].bounds,n[0].style)),t.push(new a.KeyFrame(u.TheoTime.fromSeconds(1),n[1].timingFunction,n[1].placement,n[1].bounds,n[1].style)),t}}}),o)},480:function(e,t,n){var o,r=t,i=n(0),a=n(62),s=n(9),c=n(105),u=n(15),l=n(48),d=n(125);r.MotionSourceFadeInH=(o=function(){},i.defineClass({name:"MotionSourceFadeInH",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=l.TheoTime.Zero,o=l.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new u.TheoPoint(400,0)),i=s.Matrix2D.Identity,p=c.MotionUtils.createOpacityStyle(e,0),m=e.style.clone();return t.push(new a.KeyFrame(n,d.TimingFunctionType.EaseInOut,r,null,p)),t.push(new a.KeyFrame(o,d.TimingFunctionType.EaseInOut,i,null,m)),t}}}),o)},481:function(e,t,n){var o,r=t,i=n(0),a=n(62),s=n(9),c=n(105),u=n(15),l=n(48),d=n(125);r.MotionSourceFadeInV=(o=function(){},i.defineClass({name:"MotionSourceFadeInV",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=l.TheoTime.Zero,o=l.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new u.TheoPoint(0,-400)),i=s.Matrix2D.Identity,p=c.MotionUtils.createOpacityStyle(e,0),m=e.style.clone();return t.push(new a.KeyFrame(n,d.TimingFunctionType.EaseInOut,r,null,p)),t.push(new a.KeyFrame(o,d.TimingFunctionType.EaseInOut,i,null,m)),t}}}),o)},492:function(e,t,n){var o,r=t,i=n(0),a=n(265);r.GridToPGMMapper=(o=function(){a.GroupFormaToPGMMapper.call(this)},i.defineClass({name:"GridToPGMMapper",ctor:o,superName:"GroupFormaToPGMMapper",props:{makePGMRef:function(e,t,n){return a.GroupFormaToPGMMapper.prototype.makePGMRef.call(this,e,t,n)}}}),o)},493:function(e,t,n){var o,r=t,i=n(0),a=n(96),s=n(23),c=n(265),u=n(17),l=n(9),d=n(41),p=n(173),m=n(349),f=n(51),h=n(55),P=n(142),g=n(22),M=n(30),T=n(354),_=n(120),y=n(58),S=n(355);r.TypeLockupToPGMMapper=(o=function(){c.GroupFormaToPGMMapper.call(this)},i.defineClass({name:"TypeLockupToPGMMapper",ctor:o,superName:"GroupFormaToPGMMapper",statics:{getPGMForTypeLockup:function(e,t,n){var o,r,c=[],A=[],N=[],E=0,D=0;if(function l(d,p){var m,f,P;if(m=i.as(d,s.GroupForma)){var C=d===t?p:p.concat(m.placement);m.childrenAsArray.forEach(function(e){return l(e,C)})}else if(f=i.as(d,y.TextForma))switch(E+=1,(o=u.LockupTextLook.toCaseValue((r=i.opt(i.as(i.opt(f.textModel.attributeAtIndex(_.TextLookAttribute.NAME,0),function(e){return e.attr}),_.TextLookAttribute),function(e){return e.value}))||null!=r?r:0))||null!=o?o:u.LockupTextLook.Fill){case u.LockupTextLook.Fill:A.push(a.FormaToPGMUtils.applyCommonAnimations(e,f,new h.PGMReference(S.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt#"+E),p.concat(f.placement))));break;case u.LockupTextLook.KnockoutOnly:N.push(a.FormaToPGMUtils.applyCommonAnimations(e,f,new h.PGMReference(S.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt#"+E,g.SolidColor.BLACK),p.concat(f.placement))));break;case u.LockupTextLook.KnockoutAndOutline:N.push(a.FormaToPGMUtils.applyCommonAnimations(e,f,new h.PGMReference(S.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt-ko#"+E,g.SolidColor.BLACK),p.concat(f.placement)))),A.push(a.FormaToPGMUtils.applyCommonAnimations(e,f,new h.PGMReference(S.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt-fg#"+E),p.concat(f.placement))));break;default:A.push(a.FormaToPGMUtils.applyCommonAnimations(e,f,new h.PGMReference(S.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt#"+E),p.concat(f.placement))))}else if(P=i.as(d,M.ShapeForma)){D+=1;var O=T.ShapeFormaToPGMMapper.makePGMRefForShape(e,P,n+"-shp#"+D);c.push(a.FormaToPGMUtils.applyCommonAnimations(e,P,new h.PGMReference(O.child,p.concat(O.placement))))}}(t,l.Matrix2D.Identity),N.length>0){var C=new P.PGMSimpleGroup(n+"-mask",new f.PGMNodeMetadata(t.formaID,"mask"),d.PGMAnimationList.EMPTY,i.clone(N)),O=new P.PGMSimpleGroup(n+"-art",new f.PGMNodeMetadata(t.formaID,"art"),d.PGMAnimationList.EMPTY,i.clone(c));return A.length>0?new P.PGMSimpleGroup(n,new f.PGMNodeMetadata(t.formaID,"lockup-sandwich"),d.PGMAnimationList.EMPTY,[new h.PGMReference(new p.PGMFilter(n+"-ko",new f.PGMNodeMetadata(t.formaID,"shape-knocked-out-by-text"),d.PGMAnimationList.EMPTY,[new h.PGMReference(O,l.Matrix2D.Identity),new h.PGMReference(C,l.Matrix2D.Identity)],new m.PGMMaskFilterSpec(g.SolidColor.WHITE)),l.Matrix2D.Identity),new h.PGMReference(new P.PGMSimpleGroup(n+"-fg",new f.PGMNodeMetadata(t.formaID,"text-on-top-of-knockout"),d.PGMAnimationList.EMPTY,i.clone(A)),l.Matrix2D.Identity)]):new p.PGMFilter(n,new f.PGMNodeMetadata(t.formaID,"simple-text-knockout"),d.PGMAnimationList.EMPTY,[new h.PGMReference(O,l.Matrix2D.Identity),new h.PGMReference(C,l.Matrix2D.Identity)],new m.PGMMaskFilterSpec(g.SolidColor.WHITE))}var v=c.concat(A);return new P.PGMSimpleGroup(n,new f.PGMNodeMetadata(t.formaID,"simple-lockup"),d.PGMAnimationList.EMPTY,i.clone(v))}},props:{makePGMRef:function(e,t,n){return a.FormaToPGMUtils.applyCommonAnimations(t,e,new h.PGMReference(o.getPGMForTypeLockup(t,e,e.formaID),e.placement))}}}),o)},494:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(106),u=n(96),l=n(21),d=n(41),p=n(264),m=n(51),f=n(55);i.ImageFormaToPGMMapper=(o=function(){c.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"ImageFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=l.ImageForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new o),r.instance}},createMapper:function(e){return o.instance}},props:{makePGMRef:function(e,t,n){var o;return(o=a.as(e,l.ImageForma))?u.FormaToPGMUtils.applyCommonAnimations(t,e,new f.PGMReference(new p.PGMImage(o.formaID,new m.PGMNodeMetadata(o.formaID,"image"),d.PGMAnimationList.EMPTY,o.bounds,o.contentNode.url,o.style),o.placement)):(s.CoreAssert.fail("ImageFormaToPGMMapper called for something that's not an ImageForma"),null)}}}),o)},495:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(106),u=n(96),l=n(41),d=n(51),p=n(55),m=n(142),f=n(35);i.RootFormaToPGMMapper=(o=function(){c.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"RootFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=f.RootForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new o),r.instance}},createMapper:function(e){return o.instance}},props:{makePGMRef:function(e,t,n){var o,r;return(o=a.as(e,f.RootForma))&&(r=n.childReferences(o))?u.FormaToPGMUtils.applyCommonAnimations(t,e,new p.PGMReference(new m.PGMSimpleGroup(o.formaID,new d.PGMNodeMetadata(o.formaID,"group"),l.PGMAnimationList.EMPTY,a.clone(r)),o.placement)):(s.CoreAssert.fail("child reference generation failed"),null)}}}),o)},496:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(106),u=n(96),l=n(41),d=n(51),p=n(55),m=n(351),f=n(256);i.VectorFormaToPGMMapper=(o=function(){c.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"VectorFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=f.VectorForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new o),r.instance}},createMapper:function(e){return o.instance}},props:{makePGMRef:function(e,t,n){var o;return(o=a.as(e,f.VectorForma))?u.FormaToPGMUtils.applyCommonAnimations(t,e,new p.PGMReference(new m.PGMSVG(o.formaID,new d.PGMNodeMetadata(o.formaID,"VectorForma"),l.PGMAnimationList.EMPTY,o.bounds,o.contentNode.url),o.placement)):(s.CoreAssert.fail("VectorFormaToPGMMapper called for something that's not a VectorForma"),null)}}}),o)},497:function(e,t,n){var o,r,i=t,a=n(0),s=n(1),c=n(106),u=n(96),l=n(41),d=n(264),p=n(51),m=n(55),f=n(352),h=n(73);i.VideoFormaToPGMMapper=(o=function(){c.FormaToPGMMapper.call(this,o.FORMA_KIND)},r={},a.defineClass({name:"VideoFormaToPGMMapper",ctor:o,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=h.VideoForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new o),r.instance}},createMapper:function(e){return o.instance}},props:{makePGMRef:function(e,t,n){var o;return(o=a.as(e,h.VideoForma))?t.asDynamic?u.FormaToPGMUtils.applyCommonAnimations(t,e,new m.PGMReference(new f.PGMVideo(o.formaID,new p.PGMNodeMetadata(o.formaID,"video"),l.PGMAnimationList.EMPTY,o.bounds,o.videoContentNode.url),o.placement)):u.FormaToPGMUtils.applyCommonAnimations(t,e,new m.PGMReference(new d.PGMImage(o.formaID,new p.PGMNodeMetadata(o.formaID,"poster"),l.PGMAnimationList.EMPTY,o.bounds,o.contentNode.url,o.style),o.placement)):(s.CoreAssert.fail("why calling VideoFormaToPGMMapper for a not-video-forma?"),null)}}}),o)},518:function(e,t,n){var o,r=t,i=n(0),a=n(4);r.ArtworkInfo=(o=function(e,t,n){this.artwork=e,this.sliceBox=t,this.contentRegion=n,a.CoreObject.call(this)},i.defineClass({name:"ArtworkInfo",ctor:o,superName:"CoreObject"}),o),r.HostPathUtilsProtocol=i.defineProtocol("HostPathUtilsProtocol",{artworkFromURL:"(String, Boolean) -> ArtworkInfo",parseSVGXMLData:"(String, SVGParser) -> Void",parseStringToDouble:"(String) -> Double",matchesForRegexInString:"(String, String) -> Array<String>",firstMatchForRegexInString:"(String, String) -> String",absolutePathFromURL:"(String) -> String",lastPathComponentFromURL:"(String) -> String"})},672:function(e,t,n){var o=t,r=n(0);o.HostTimer=r.defineProtocol("HostTimer",{cancel:"() -> Void"}),o.HostAsyncUtilsProtocol=r.defineProtocol("HostAsyncUtilsProtocol",{startTimer:"(Double, () -> Void) -> HostTimer",postOnMainThread:"(Double, () -> Void) -> Void",getSystemUptimeInSeconds:"() -> Double"})},673:function(e,t,n){var o=t,r=n(0);o.HostBrandkitManagerProtocol=r.defineProtocol("HostBrandkitManagerProtocol",{brandkitForDocument:"(TheoDocument) -> IAuthoringContext",brandkitForElement:"(String, String) -> IAuthoringContext",getFilePathForEncodedURL:"(String) -> String"})},674:function(e,t,n){var o=t,r=n(0);o.HostCryptoProtocol=r.defineProtocol("HostCryptoProtocol",{md5:"(String) -> String"})},675:function(e,t,n){var o=t,r=n(0);o.HapticStyle=r.defineEnum("HapticStyle",{LightFeedback:0,MediumFeedback:1,HeavyFeedback:2}),o.HostDeviceUtilsProtocol=r.defineProtocol("HostDeviceUtilsProtocol",{prepareHapticFeedback:"(HapticStyle) -> Void",triggerHapticFeedback:"() -> Void"})},676:function(e,t,n){var o=t,r=n(0);o.HostFactoriesProtocol=r.defineProtocol("HostFactoriesProtocol",{constructDocumentStateManager:"(TheoDocument) -> IDocumentStateManager"})},677:function(e,t,n){var o=t,r=n(0);o.HostFeatureFlagsProtocol=r.defineProtocol("HostFeatureFlagsProtocol",{isWatermarkUnlocked:"() -> Boolean"})},678:function(e,t,n){var o=t,r=n(0);o.HostImageAnalysisProtocol=r.defineProtocol("HostImageAnalysisProtocol",{createHostImage:"(String, Boolean) -> HostImage",useCache:"(Boolean) -> Void",setShapeFormaTransparencyMask:"(ShapeForma, Integer) -> Void"}),o.HostImage=r.defineProtocol("HostImage",{getUrl:"() -> String",getWidth:"() -> Integer",getHeight:"() -> Integer",loaded:"() -> Boolean",whenLoaded:"(() -> Void) -> Void",whenAsyncFeaturesLoaded:"(() -> Void) -> Void",hasAlpha:"() -> Boolean",getFocus:"() -> TheoRect",getImageColors:"(Integer) -> Array<SolidColor>",getImageColorData:"(Integer) -> Array<ImageColorData>",getAverageColor:"(TheoRect, ImageStyle) -> SolidColor",getFaceIntersections:"(TheoRect) -> Double",getFilterColor:"(SolidColor, ImageStyle) -> SolidColor",getSaliencyData:"(Integer, Integer) -> Array<Double>",getEdgeData:"(Integer, Integer) -> Array<Double>"})},679:function(e,t,n){var o=t,r=n(0);o.HostLearningProtocol=r.defineProtocol("HostLearningProtocol",{loadLayoutSuggestionModel:"() -> LayoutSuggestionsLinearModel",loadFontSuggestionLinearModel:"() -> FontLinearModel",loadNNJSON:"(String) -> Dictionary<String>",updateFontSuggestionLinearModel:"(FontLinearModel) -> Void",updateFontSuggestionNNModel:"(MLPModel) -> Void",getHostPredictionCache:"() -> RolePredictionCache"}),o.getHostPredictionCache=function(){return null}},680:function(e,t,n){var o=t,r=n(0);o.HostLocaleProtocol=r.defineProtocol("HostLocaleProtocol",{decimalSeparator:"String",formatNumber:"(Double, Integer) -> String",convertStringToNumber:"(String) -> Double"})},681:function(e,t,n){var o=t,r=n(0);o.HostLoggingProtocol=r.defineProtocol("HostLoggingProtocol",{info:"(String) -> Void",error:"(String) -> Void",warning:"(String) -> Void",assertFailure:"(String) -> Void",logToAnalytics:"(String, Dictionary<String>) -> Void",timeStamp:"() -> String",platformID:"() -> String",additionalPlatformInfo:"() -> String",getObjectClassNameForSingletonTracking:"(AnyObject) -> String"})},682:function(e,t,n){var o=t,r=n(0);o.HostPersistUtilsProtocol=r.defineProtocol("HostPersistUtilsProtocol",{useJsonDocumentEncoding:"() -> Boolean",mimeTypeForFileAtPath:"(String) -> String",writeJsonContentToTempFile:"(AnyObject) -> String",readJsonContentFromFile:"(String) -> AnyObject",fileUrlForPath:"(String) -> String",fileExists:"(String) -> Boolean"}),o.HostDocumentComposite=r.defineProtocol("HostDocumentComposite",{current:"HostDocumentBranch",localStoragePath:"String"}),o.HostDocumentBranch=r.defineProtocol("HostDocumentBranch",{root:"HostDocumentNode",allComponents:"Array<HostDocumentComponent>",getValue:"(String) -> AnyObject",appendNode:"(String, String, HostDocumentNode) -> HostDocumentNode",removeNode:"(HostDocumentNode) -> Void",getNodeWithAbsolutePath:"(String) -> HostDocumentNode",getChildrenOfNode:"(HostDocumentNode) -> Array<HostDocumentNode>",getComponentsOfNode:"(HostDocumentNode) -> Array<HostDocumentComponent>",getComponentWithId:"(String) -> HostDocumentComponent",getPathForComponent:"(HostDocumentComponent) -> String",getComponentWithAbsolutePath:"(String) -> HostDocumentComponent",addComponent:"(String, String, String, String, String, HostDocumentNode, String, Boolean, String) -> HostDocumentComponent",moveComponent:"(HostDocumentComponent, HostDocumentNode) -> HostDocumentComponent",updateComponent:"(HostDocumentComponent, String, Boolean) -> HostDocumentComponent"}),o.HostDocumentNode=r.defineProtocol("HostDocumentNode",{nodeId:"String",getValue:"(String) -> AnyObject",setValue:"(String, AnyObject) -> Void",removeValue:"(String) -> Void"}),o.HostDocumentComponent=r.defineProtocol("HostDocumentComponent",{componentId:"String",name:"String",path:"String",type:"String",etag:"String",relationship:"String",mutableCopy:"HostDocumentComponent"})},683:function(e,t,n){var o=t,r=n(0);o.HostPlatformProtocol=r.defineProtocol("HostPlatformProtocol",{isWeb:"Boolean",isIOS:"Boolean",isAndroid:"Boolean",isService:"Boolean",isDesktop:"Boolean",isMobile:"Boolean"})},684:function(e,t,n){var o=t,r=n(0);o.HostResourceUtilsProtocol=r.defineProtocol("HostResourceUtilsProtocol",{makeGUID:"() -> String",urlForResource:"(String, String) -> String"})},685:function(e,t,n){var o=t,r=n(0);o.HostTestingProtocol=r.defineProtocol("HostTestingProtocol",{urlForTestAsset:"(String) -> String",urlForTestResource:"(String, String) -> String",throwAsyncTestCase:"(CorePromise, Double) -> Void"})},686:function(e,t,n){var o=t,r=n(0);o.HostTextModelUtilsProtocol=r.defineProtocol("HostTextModelUtilsProtocol",{measureInkBounds:"(String, FontDescriptor, Double) -> TheoRect",measureInkBoundsWithTracking:"(String, FontDescriptor, Double, Double) -> TheoRect",getGlyphPositions:"(String, FontDescriptor, Double, Boolean) -> Array<Double>",fontHasClockwiseOutlines:"(FontDescriptor) -> Boolean",textOutlines:"(String, FontDescriptor, Double, Double) -> TheoPath",rewindPath:"(TheoPath) -> TheoPath",useOutlinesForKnockouts:"() -> Boolean",measureBaselineBounds:"(String, FontDescriptor, Double, Double) -> TheoRect",measureCapHeight:"(FontDescriptor, Double) -> Double",measureCapHeightPerPointSize:"(FontDescriptor) -> Double",splitOnWhiteSpace:"(String) -> Array<TextRange>",getWordClassRanges:"(String, Integer) -> Array<TextRange>",defaultFont:"() -> FontDescriptor",defaultFontSize:"() -> Double",defaultColor:"() -> SolidColor"})},687:function(e,t,n){var o=t,r=n(0);o.MotionEntry=r.defineProtocol("MotionEntry",{srcId:"String",logic:"MotionLogic",args:"Dictionary<String>"})},688:function(e,t,n){var o=t,r=n(0);o.MotionLogic=r.defineProtocol("MotionLogic",{apply:"(Forma, Array<KeyFrame>, Dictionary<String>) -> Void"})},689:function(e,t,n){var o=t,r=n(0);o.IImportDataObject=r.defineProtocol("IImportDataObject",{id:"String",type:"String",name:"String",path:"String",optionalStringProperty:"(String) -> String",stringProperty:"(String, String) -> String",numberProperty:"(String, Double) -> Double",intProperty:"(String, Integer) -> Integer",booleanProperty:"(String, Boolean) -> Boolean",optionalBooleanProperty:"(String) -> Boolean",property:"(String) -> AnyObject",metadata:"(String) -> IImportDataObject",forEachChild:"((IImportDataObject, Integer) -> Void) -> Void",forEachComponent:"((IImportDataComponent, Integer) -> Void) -> Void"}),o.IMissingFontHelper=r.defineProtocol("IMissingFontHelper",{recordMissingFont:"(String) -> Void"}),o.IImportDataComponent=r.defineProtocol("IImportDataComponent",{id:"String",name:"String",path:"String",mimeType:"String",etag:"String",url:"String"})},8:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(4);r.Host=(o=function(){s.CoreObject.call(this)},i.defineClass({name:"Host",ctor:o,superName:"CoreObject",statics:{locale_:null,platform_:null,textModelUtils_:null,pathUtils_:null,persistUtils_:null,logging_:null,fontProvider_:null,imageAnalysis_:null,resourceUtils_:null,featureFlags_:null,async_:null,brandkitManager_:null,learning_:null,deviceUtils_:null,factories_:null,crypto_:null,testing_:null,isInitialized_:!1,initializedCallbacks_:[],locale:{get:function(){return o.locale_},set:function(e){o.locale_=e}},platform:{get:function(){return o.platform_},set:function(e){o.platform_=e}},textModelUtils:{get:function(){return o.textModelUtils_},set:function(e){o.textModelUtils_=e}},logging:{get:function(){return o.logging_},set:function(e){o.logging_=e}},fontProvider:{get:function(){return o.fontProvider_},set:function(e){o.fontProvider_=e}},imageAnalysis:{get:function(){return o.imageAnalysis_},set:function(e){o.imageAnalysis_=e}},pathUtils:{get:function(){return o.pathUtils_},set:function(e){o.pathUtils_=e}},persistUtils:{get:function(){return o.persistUtils_},set:function(e){o.persistUtils_=e}},resourceUtils:{get:function(){return o.resourceUtils_},set:function(e){o.resourceUtils_=e}},featureFlags:{get:function(){return o.featureFlags_},set:function(e){o.featureFlags_=e}},async:{get:function(){return o.async_},set:function(e){o.async_=e}},brandkitManager:{get:function(){return o.brandkitManager_},set:function(e){o.brandkitManager_=e}},learning:{get:function(){return o.learning_},set:function(e){o.learning_=e}},deviceUtils:{get:function(){return o.deviceUtils_},set:function(e){o.deviceUtils_=e}},crypto:{get:function(){return o.crypto_},set:function(e){o.crypto_=e}},factories:{get:function(){return o.factories_},set:function(e){o.factories_=e}},testing:{get:function(){return o.testing_},set:function(e){o.testing_=e}},initialized:function(){a.CoreAssert.isFalse(o.isInitialized_),o.isInitialized_=!0;for(var e=i.iter(o.initializedCallbacks_);!e.done;e.next())(0,e.value)()},whenInitialized:function(e){o.isInitialized_?e():o.initializedCallbacks_.push(e)}}}),o)},87:function(e,t,n){var o,r=t,i=n(0),a=n(1),s=n(4),c=n(152),u=n(8),l=n(418);r.PROPERTY_KEY_ID="id",r.PROPERTY_KEY_TYPE="type",r.PROPERTY_KEY_NAME="name",r.PROPERTY_KEY_PATH="path",r.PROPERTY_KEY_MIMETYPE="mimeType",r.PROPERTY_KEY_ETAG="etag",r.PROPERTY_KEY_URL="url",r.PROPERTY_KEY_RELATIONSHIP="rel",r.BaseNodeEncoder=(o=function(e,t){this.childMetadataEncoders_={},this.childNodeEncoders_=[],this.branch_=e,this.componentNode_=t,s.CoreObject.call(this)},i.defineClass({name:"BaseNodeEncoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IExportDataObjectDocument"==e||"IExportDataObject"==e}},props:{prepareCompositeForSave:function(e){a.CoreAssert.isTrue(null==this.stashNode_,"creating a stashNode when we already have one?"),this.stashNode_=this.createTempNode(this.branch_.root);for(var t=i.iter(this.branch_.allComponents);!t.done;t.next()){var n=t.value;null!=n.relationship&&e.includes(n.relationship)||(a.CoreAssert.info(i.toString(this.id)+" stashComponent "+n.componentId+" "+i.toString(n.type)),this.branch_.moveComponent(n,this.createTempNode(this.stashNode_)))}for(var o=i.iter(this.branch_.getChildrenOfNode(this.branch_.root));!o.done;o.next()){var s=o.value,c=i.as(s.getValue(r.PROPERTY_KEY_RELATIONSHIP),"String");null!=c&&e.includes(c)||s.nodeId!=this.stashNode_.nodeId&&this.branch_.removeNode(s)}},createTempNode:function(e){var t=i.opt(u.Host.resourceUtils,function(e){return e.makeGUID()});return this.branch_.appendNode(t,t,e)},discardStashedComponents:function(){this.branch_.removeNode(this.stashNode_)},getPropertyOnNode:function(e){return a.CoreAssert.fail("must be overridden"),null},setPropertyOnNode:function(e,t){a.CoreAssert.fail("must be overridden")},id:{get:function(){return i.as(this.getPropertyOnNode(r.PROPERTY_KEY_ID),"String")}},setName:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_NAME,i.as(e,"AnyObject"))},setType:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_TYPE,i.as(e,"AnyObject"))},setPath:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_PATH,i.as(e,"AnyObject"))},setProperty:function(e,t){var n=c.DocumentPersistenceFactory.namespacedPropertyName(e);null!=this.childMetadataEncoders_[n]&&i.removeKey(this.childMetadataEncoders_,n),this.setPropertyOnNode(n,t)},setOptionalStringProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setStringProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setNumberProperty:function(e,t){a.CoreAssert.isFalse(isNaN(t),"Can't set NaN for prop "+e+"."),this.setProperty(e,i.as(t,"AnyObject"))},setIntProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setBooleanProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setOptionalBooleanProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},appendMetadata:function(e){var t=c.DocumentPersistenceFactory.namespacedPropertyName(e),n=new l.JSONMetadataEncoder;return this.childMetadataEncoders_[t]=n,n},createChildEncoder:function(e){return a.CoreAssert.fail("must be overridden"),new o(this.branch_,this.componentNode_)},appendChild:function(e){var t=this.createChildEncoder(e);return this.childNodeEncoders_.push(t),t},appendComponent:function(e,t,n,o){a.CoreAssert.info(i.toString(this.id)+" appendComponent "+e+" "+t+" "+n+" "+o);var r,s=i.opt(u.Host.pathUtils,function(e){return e.absolutePathFromURL(n)}),c=t,l=i.clone(i.opt(i.opt(u.Host.pathUtils,function(e){return e.lastPathComponentFromURL(n)}),function(e){return e.split(".")}));if(null!=l&&l.length>1){var d=i.last(l);i.isEmpty(d)||(c+="."+d)}if(r=this.branch_.getComponentWithId(t)){if(this.nodeHasComponentWithPath(r.path)||i.opt(r.path,function(e){return 1==e.includes("/")})){var p=r.mutableCopy;p.path=c,a.CoreAssert.info(i.toString(this.id)+" branch.updateComponent "+r.componentId+" path from "+i.toString(r.path)+" to "+i.toString(p.path)),r=this.branch_.updateComponent(p,null,!1)}a.CoreAssert.info(i.toString(this.id)+" branch.moveComponent "+r.componentId+" path="+i.toString(r.path)),this.branch_.moveComponent(r,this.componentNode_)}else i.opt(s,function(e){return 1==e.startsWith("shapes/")})||(a.CoreAssert.info(i.toString(this.id)+" branch.addComponent "+t+" path="+c),this.branch_.addComponent(t,t,o,null,c,this.componentNode_,s,!0,null))},nodeHasComponentWithPath:function(e){if(null!=e)for(var t=i.iter(this.branch_.getComponentsOfNode(this.componentNode_));!t.done;t.next())if(t.value.path==e)return!0;return!1},setManifestFormatVersion:function(e){},setCompositeID:function(e){},setDocumentSize:function(e,t){},setManifestProperty:function(e,t){this.getManifestEncoder().setProperty(e,t)},getManifestEncoder:function(){return this},finish:function(){for(var e=i.iter(this.childMetadataEncoders_);!e.done;e.next()){var t=e.key,n=e.value,o=i.clone(n.encodeData());this.setPropertyOnNode(t,i.as(o,"AnyObject"))}for(var r=i.iter(this.childNodeEncoders_);!r.done;r.next())r.value.finish()}}}),o)}}]);
//# sourceMappingURL=logomaker-entry_9e567822-7491c053.js.map