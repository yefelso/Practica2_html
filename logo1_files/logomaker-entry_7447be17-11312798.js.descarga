(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{0:function(t,e,r){var n,o,i,a;try{a=r(!function(){var t=new Error("Cannot find module './utils/CoreRandom.js'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){console.log("Could not find CoreRandom. Will fall back to Math.Random for xplr.shuffleInPlace")}function s(t){var e=t.sprintf,r={info:function(t){console.log("CORE INFO: "+t)},warning:function(t){console.log("CORE WARNING: "+t)},error:function(t,e){console.log("CORE ERROR: "+t,e)}};function n(t){return t?function(e,r){return t(e,r)?-1:1}:function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:t<e?-1:1}}Array.prototype.includes||(Array.prototype.includes=function(t){return this.indexOf(t)>=0}),String.prototype.includes||(String.prototype.includes=function(t){return this.indexOf(t)>=0}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,r=Object(this),n=r.length>>>0,o=arguments[1],i=0;i<n;i++)if(e=r[i],t.call(o,e,i,r))return e});var o=function(t){this.range=t,this.count=Math.ceil((t.end-t.begin)/t.increment),t.closed&&(t.end-t.begin)%t.increment==0&&(this.count+=1),this.setIndex(0)};o.prototype.next=function(){this.setIndex(this.index+1)},o.prototype.setIndex=function(t){this.index=t,this.done=this.index>=this.count;var e=this.range.isReversed?this.count-1-this.index:this.index;this.value=this.range.begin+e*this.range.increment};var i=function(t,e,r,n,o){this.begin=t,this.end=e,this.closed=r,this.increment=n||1,this.isReversed=!0===o};i.prototype.asArray=function(){for(var t=[],e=new o(this);!e.done;)t.push(e.value),e.next();return t},i.prototype.applyToArray=function(t){return 1!==this.increment||this.isReversed?this.asArray().filter(function(e){return e>=0&&e<t.length}).map(function(e){return t[e]}):t.slice(this.begin,this.end+(this.closed?1:0))},i.prototype.reversed=function(){return new i(this.begin,this.end,this.closed,this.increment,!this.isReversed)};var s=function(t){this._array=t,this._index=0,this._count=t.length,this.done=0===t.length,this.value=!this.done&&t[0]};s.prototype.next=function(){this._index++,this.done=this._index>=this._count,this.value=!this.done&&this._array[this._index]};var l=function(t,e){if(this._array=[],e)for(var r in t)this._array.push({key:parseInt(r),value:t[r]});else for(var r in t)this._array.push({key:r,value:t[r]});this._index=0,this.done=0===this._array.length,this.key=!this.done&&this._array[0].key,this.value=!this.done&&this._array[0].value};l.prototype.next=function(){this._index++,this.done=this._index>=this._array.length,this.key=!this.done&&this._array[this._index].key,this.value=!this.done&&this._array[this._index].value};class u{constructor(t,e){for(var r in this._name=t,this._def=e,this._rdef={},e){var n=e[r];this[r]=n,this._rdef[n]=r}}toCaseValue(t){return void 0!==this._rdef[t]?t:null}isCaseValue(t){return void 0!==this._rdef[t]}}return{classes:{},protocols:{},enums:{},classDependencies:{},M_PI:Math.PI,M_E:Math.E,opt:function(t,e){return null!=t?e(t):null},defineClass:function(t){var e=this;return this.requireClass(t.name,t.superName,function(n){function o(t,e,r,n){for(var o in t){var i={enumerable:!0},a=t[o];"object"==typeof a&&a&&(a.get||a.set)?(a.get&&(r[o]=i.get=a.get),a.set&&(n[o]=i.set=a.set)):(i.value=a,i.writable=!0),e[o]=i}return e}var i={_getters:{value:{},enumerable:!0},_setters:{value:{},enumerable:!0},_staticGetters:{value:{},enumerable:!0},_staticSetters:{value:{},enumerable:!0}};o(t.statics,i,i._staticGetters.value,i._staticSetters.value);var a=o(t.props,{},i._getters.value,i._setters.value);t.superName||(a.setValue={value:function(t,e){this[e]=t},enumerable:!0}),function(t,e,n){for(var o in t){"function"==typeof t[o]&&"init_"==o.substr(0,5)&&(e[o]={enumerable:!0,value:function(t,e){return function(){var n=new t;return n[e]?n[e].apply(n,arguments):r.error("uh oh, no matching init function ("+e+")"),n}}(n,o)})}}(t.props,i,t.ctor),Object.defineProperties(t.ctor,i),t.ctor.prototype=Object.create(n?n.prototype:Object.prototype,a),t.ctor.prototype.constructor=t.ctor,e.registerClass(t.name,t.ctor),n&&(e.inheritGetterSetters(t.ctor,n),e.inheritStatics(t.ctor,n))}),t.ctor},inheritGetterSetters:function(t,e){var r={};if(e._getters)for(var n in t._getters||(t._getters={}),t._setters||(t._setters={}),e._getters){var o=e._getters[n],i=e._setters&&e._setters[n];(o&&!t._getters[n]||i&&!t._setters[n])&&(r[n]={enumerable:!0},o&&(r[n].get=t._getters[n]=t._getters[n]||o),i&&(r[n].set=t._setters[n]=t._setters[n]||i))}Object.defineProperties(t.prototype,r)},inheritStatics:function(t,e){var n=t._inherited={};for(var o in e)if(!t.hasOwnProperty(o))try{if(e._inherited&&e._inherited[o])n[o]=e._inherited[o];else if(e._staticGetters&&e._staticGetters[o]){if(n[o]={enumerable:!0},e._staticGetters&&e._staticGetters[o]){var i=e._staticGetters[o];n[o].get=function(){return i()}}if(e._staticSetters&&e._staticSetters[o]){var a=e._staticSetters[o];n[o].set=function(t){a(t)}}}else"function"==typeof e[o]?n[o]={enumerable:!0,value:e[o]}:n[o]={enumerable:!0,get:function(){return e[o]},set:function(t){e[o]=t}}}catch(t){r.error("inheritStatics",t)}Object.defineProperties(t,n)},defineProtocol:function(t,e){return this.protocols[t]=e,e._isProtocol=t,e},defineEnum:function(t,e){var r=new u(t,e);return this.enums[t]=r,r},defctor:function(t){},super_init:function(t,e,r){e.call(t);for(var n=[],o=3;o<arguments.length;o++)n.push(arguments[o]);r.apply(t,n)},is:function(t,e){if("Array"===e)return Array.isArray(t);if("Dictionary"===e)return"object"==typeof t;if("Double"===e||"Int"===e)return"number"==typeof t;if("String"===e)return"string"==typeof t;if("Bool"===e)return"boolean"==typeof t;if("Function"===e)return"function"==typeof t;if("Any"===e)return void 0!==t;if("Object"===e)return"object"==typeof t;if("AnyObject"===e)return null!=t;if(Array.isArray(e)){if("Array"===e[0])return t&&Array.isArray(t)&&(0==t.length||this.is(t[0],e[1]));if("Dictionary"===e[0]&&t&&"object"==typeof t){for(var n in t)return this.is(n,e[1])&&this.is(t[n],e[2]);return!0}return!1}return"object"==typeof e&&e._isProtocol?t&&t.constructor&&t.constructor._implements&&t.constructor._implements(e._isProtocol):"string"!=typeof e?e instanceof u?e.isCaseValue(t):t instanceof e:void r.error("why checking type "+e)},as:function(t,e){return this.is(t,e)?t:null},nilc:function(t,e){return void 0!==t&&null!=t?t:"function"==typeof e?e():e},requireClass:function(t,e,r){if(e)if(this.classes[e])r(this.classes[e]);else{var n=this.classDependencies[e];n?n.push(r):this.classDependencies[e]=[r]}else r(null)},registerClass:function(t,e){this.classes[t]=e;var r=this.classDependencies[t];if(r)for(;r.length>0;)r.shift()(e)},assert:function(t){},iter:function(t,e){return t instanceof i?new o(t):Array.isArray(t)?new s(t):new l(t,e)},stride:function(t,e,r){return new i(t,e,!1,r,!1)},each:function(t,e){if("object"==typeof t)for(var r in t)e(r,t[r])},count:function(t){if(Array.isArray(t))return t.length;if("object"==typeof t){var e=0;for(var r in t)e++;return e}return-1},dict:function(t){for(var e={},r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e},toDouble:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseFloat(t);return isNaN(e)?null:e}return 0},toString:function(t){if(arguments.length>1&&"string"==typeof t)try{return e.apply(e,arguments)}catch(t){r.error("string format error "+t)}return t+""},toInt:function(t){if("number"==typeof t)return t<0?-Math.floor(-t):Math.floor(t);if("string"==typeof t){var e=parseInt(t);return isNaN(e)?null:e}return 0},modulo:function(t,e){return t-Math.floor(t/e)*e},toUInt32:function(t){return this.modulo(this.toInt(t),Math.pow(2,32))},isInfinite:function(t){return!isNaN(t)&&!isFinite(t)},randu:function(t){return Math.floor(Math.random()*t)},keys:function(t,e){var r=[];for(var n in t)"numeric"===e?r.push(parseFloat(n)):r.push(n);return r},values:function(t){var e=[];for(var r in t)e.push(t[r]);return e},eachValue:function(t,e){for(var r in t)e(t[r])},indexForKey:function(t,e){var r=0;for(var n in t){if(n===e)return r;r++}return null},removeKey:function(t,e){var r=t[e];return delete t[e],void 0===r?null:r},gvar:function(t,e,r){var n,o={};o[e]={enumerable:!0,get:function(){return void 0===n&&(n=r()),n},set:function(t){n=t}},Object.defineProperties(t,o)},chars:function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.substr(r,1));return e},range:function(t,e,r){return new i(t,e,r)},rand:function(){return 2147483647*Math.random()},isEmpty:function(t){return"string"!=typeof t||0===t.length},eq:function(t,e,r){return null==e||null==r?e==r:t(e,r)},clone:function(t){var e;if(null==t)return null;if(Array.isArray(t))return(e=t.concat()).isValueType=t.isValueType,e;if("function"==typeof t.clone)return t.clone();if("object"==typeof t){for(var r in e={},t)e[r]=t[r];return e}return null},repeat:function(t,e){var r,n=[];for(r=0;r<e;r++)Array.isArray(t)&&t.isValueType?n.push(this.clone(t)):Array.isArray(t)&&0==t.length?n.push([]):n.push(t);return n.isValueType=!0,n},toArray:function(t){if(Array.isArray(t)){var e=t.concat();return e.isValueType=!0,e}if(t instanceof i)return t.asArray();var r=[t];return r.isValueType=!0,r},indexOf:function(t,e){var r=t.indexOf(e);return r<0?null:r},containsEq:function(t,e,r){return null!=this.indexOfEq(t,e,r)},indexOfEq:function(t,e,r){for(var n=0;n<t.length;n++)if(r(t[n],e))return n;return null},toSequence:function(t){return t.map(function(t,e){return{offset:e,element:t}})},toCharSequence:function(t){for(var e=[],r=0;r<t.length;r++)e.push({offset:r,element:t.substr(r,1)});return e},enumerate:function(t){var e={};return t.forEach(function(t,r){e[r]=t}),e},append:function(t,e){e.forEach(function(e){t.push(e)})},remove:function(t,e){var r=t.indexOf(e);r>=0&&t.splice(r,1)},removeAll:function(t){for(prop in t)delete t[prop]},sort:function(t,e){return t.concat().sort(n(e))},sortInPlace:function(t,e){return t.sort(n(e))},first:function(t){return t.length>0?t[0]:null},last:function(t){return t.length>0?t[t.length-1]:null},min:function(t){var e=Math.min.apply(null,t);return isFinite(e)?e:null},max:function(t){var e=Math.max.apply(null,t);return isFinite(e)?e:null},slicerange:function(t,e){return e.applyToArray(t)},dropFirst:function(t,e){return void 0===e&&(e=1),e>=t.length?[]:t.slice(e)},dropLast:function(t,e){return void 0===e&&(e=1),e>=t.length?[]:t.slice(0,t.length-e)},rangeOfString:function(t,e){var r=t.indexOf(e);return r<0?null:new i(r,r+e.length,!1)},shuffleInPlace:function(t){for(var e,r=t.length-1,n=0;r>0;r-=1)n=a?a.CoreRandom.nextIntUniform(t.length-r)+r:Math.floor(Math.random()*(r+1)),e=t[r],t[r]=t[n],t[n]=e;return t},shuffle:function(t){return this.shuffleInPlace(t.concat())},reverse:function(t){return t.concat().reverse()},joinArrays:function(t,e){return 0===t.length?[]:t.reduce(function(t,r){return t?t.concat(e).concat(r):r})},setLog:function(t){r=t},info:function(t){r.info(t)},warning:function(t){r.warn(t)},error:function(t,e){r.error(t,e)},replace:function(t,e,r){return t.replace(e,r)},bind:function(t,e){return t[e].bind(t)},zip:function(t,e){var r,n=[],o=Math.min(t.length,e.length);for(r=0;r<o;r++)n.push([t[r],e[r]]);return n}}}e.nodeName,o=[r(410)],void 0===(i="function"==typeof(n=s)?n.apply(e,o):n)||(t.exports=i)},121:function(t,e,r){var n,o=e,i=r(0),a=r(49),s=r(154),l=r(190),u=r(202),c=r(1),h=r(4),p=r(19),f=r(118),g=r(11),d=r(86),m=r(29),v=r(163),y=r(25),S=r(23),T=r(56),D=r(8),_=r(21),x=r(80),b=r(447),C=r(17),k=r(9),P=r(133),A=r(92),I=r(195),w=r(35),M=r(57),F=r(54),N=r(30),U=r(246),R=r(247),O=r(40),G=r(115),L=r(58),V=r(14),H=r(10),E=r(132),B=r(88),j=r(153),Y=r(73);o.OPACITY_LOG_SCALE=5,o.TheoDocumentUtils=(n=function(){h.CoreObject.call(this)},i.defineClass({name:"TheoDocumentUtils",ctor:n,superName:"CoreObject",statics:{getAvgGlyphAreaSortedText:function(t){for(var e=i.clone(t.firstPage.root.filterWithCallback(function(t){return t.isTypeLockup()})),r=[],n=i.iter(e);!n.done;n.next()){var o,a=n.value;if(o=i.as(a.controller,V.TypeLockupController)){var s=0,l=0;if(a.visit(g.FormaTraversal.PreOrder,function(t,e,r){var n,o;return(n=i.as(t,L.TextForma))&&(o=n.finalFrame)&&(s+=o.area,l+=n.rangeInLockup.length),!1}),l>0){var u=s/i.toDouble(l),c=i.replace(o.text,"\n","<BR>");r.push({text:c,avgGlyphArea:u})}}}return i.sort(r,function(t,e){return t.avgGlyphArea>e.avgGlyphArea}).map(function(t){return i.replace(t.text,"\n","<BR>")},this)},synthesizeTitle:function(t){var e=i.clone(n.getAvgGlyphAreaSortedText(t));return e.length>0?e[0]:G.TheoDocument.DEFAULT_NAME},synthesizeDescription:function(t){return n.getAvgGlyphAreaSortedText(t).join("<P>")},getFrameString:function(t,e){void 0===e&&(e=!1);var r=i.clone(t.totalPlacement.transformPoints(i.clone(t.bounds.points)));t.isTypeLockup()&&e&&(r=i.clone(t.totalPlacement.transformPoints(i.clone(t.childrenBoundsInCoordSpace(k.Matrix2D.Identity).points))));for(var n=[],o=i.iter(r);!o.done;o.next()){var a=o.value,s=i.toString(i.toInt(Math.round(a.x))),l=i.toString(i.toInt(Math.round(a.y)));n.push(s+","+l)}return n.join(",")},getCellBackgroundShape:function(t){var e,r=i.as(t,m.FrameForma);if(null==r){var n=i.as(t,_.ImageForma);r=i.as(i.opt(n,function(t){return t.parent}),m.FrameForma)}if(null!=r&&(e=i.as(i.opt(r.parent,function(t){return t.controller}),y.GridController))){var o=e.getCellBackgroundShape(r);if(null!=o)return o}return null},getCellBackgroundImage:function(t){if(t.controller.floating)return null;var e;if(e=i.as(i.opt(t.parent,function(t){return t.controller}),y.GridController)){var r=e.getCellBackgroundImage(t);if(null!=r)return r}return null},containsLicensedImage:function(t){var e=i.clone(t.constrainedImages),r=i.clone(e[G.TheoDocument.PROPERTY_STOCK_IMAGES][G.TheoDocument.PROPERTY_STANDARD]),n=i.clone(e[G.TheoDocument.PROPERTY_STOCK_IMAGES][G.TheoDocument.PROPERTY_EXTENDED]);return r.length>0||n.length>0},getFontSourceUsage:function(t){for(var e=[],r=i.iter(t.firstPage.root.filterWithCallback(function(t){return t.isTypeLockup()}));!r.done;r.next()){var n,o=r.value;if(n=i.as(o.style,C.LockupStyle)){var a;if(a=n.font){var s=d.describeFontSource(a.fontData.source);e.includes(s)||e.push(s)}for(var l=i.iter(n.characterStyles);!l.done;l.next()){var u;(u=l.value.font)&&(s=d.describeFontSource(u.fontData.source),e.includes(s)||e.push(s))}}}return e},getAllDesignIngredientIDsAndTypes:function(t){var e=[];return t.firstPage.root.visitAll(g.FormaTraversal.PreOrder,function(t){var r;null!=(r=t.source)&&v.FormaSourceUtils.isDesignIngredient(r)&&e.push(u.BadgeFacade.getDesignIngredientIDAndType(r))}),e},getAppliedVariationTemplateId:function(t){return t.content.root.getTag(I.RootContentNode.THEME_ID_TAG)},getMetadataEvents:function(t,e,r){var o;void 0===r&&(r=!1),i.clone(t.firstPage.root.filterWithCallback(function(t){return null!=t.controller&&t.controller.floating}));var a=t.firstPage,s=a.sizeID,l="";null!=a.animationController.animationStyle&&(l=a.animationController.animationStyle.asString);var u,c,h=a.colorLibrary.paletteID,f=t.content.root.getTag(I.RootContentNode.THEME_ID_TAG),d=t.content.root.getTag(I.RootContentNode.DOCUMENT_SOURCE_TYPE_TAG),S=t.content.root.getTag(I.RootContentNode.DOCUMENT_SOURCE_ID_TAG),D="default",b=0,C=0,k=i.clone(a.root.filterByControllerKind(y.GridController.KIND));k.length>0&&(u=i.as(k[0].controller,y.GridController))&&(c=u.gridStyle)&&(D=c.name,b=u.spacing,C=u.margin);var P=null!=h?a.colorLibrary.paletteID:"",A=null!=f?f:"",M=null!=S?S:"",F=null!=d?d:"",U=[],R=[],O=[],G=[],L=[],H="",E=0;a.root.visitAll(g.FormaTraversal.PreOrder,function(t){if(null!=t.bounds){var e,a="id:"+t.formaID.substr(0,8)+",",s=r?a:"",l=n.getFrameString(t),u="";(e=t.style.colors.color(p.ColorRole.FieldPrimary))&&(u=e.rgbHex);var c,h,f,g,d,y="";if((c=t.style.colors.color(p.ColorRole.FieldSecondary))&&(y=c.rgbHex),h=i.as(t,_.ImageForma)){var S="",T="",D="",b="",C="",k="";i.opt(h.parent,function(t){return t.kind==m.FrameForma.KIND})&&(l=n.getFrameString(t.parent)),(at=i.as(h.style,x.ImageStyle))&&(b=at.name);var P,A,I,M=h.contentNode,F=i.opt(M,function(t){return t.mediaMetadata});if(i.opt(h.parent,function(t){return t.kind==m.FrameForma.KIND})){var X=i.clone(h.placement.inverse.transformPoints(i.clone(h.parent.bounds.points))),K=Math.round(h.bounds.width),W=Math.round(h.bounds.height);D=Math.round(1e3*K/W)/1e3+",";for(var z=[],q=i.iter(X);!q.done;q.next()){var J=q.value,Z=i.toString(Math.round(1e3*J.x/K)/1e3),Q=i.toString(Math.round(1e3*J.y/W)/1e3);z.push(Z+","+Q)}D+=z.join(",")}null!=(ct=i.opt(F,function(t){return t.searchTerm}))&&(T=ct,null!=(P=i.opt(F,function(t){return t.sourceURL}))&&(S=P)),null!=(A=i.opt(F,function(t){return t.sourceName}))&&(C=A),null!=(I=i.opt(F,function(t){return t.licenseType}))&&(k=I);var $,tt,et="img";($=i.as(t,Y.VideoForma))&&(null!=(tt=i.opt($.videoContentNode,function(t){return t.getTag(j.VideoContentNode.LIVE_PHOTO_TAG)}))&&"true"==tt&&(et="lp"),null!=i.opt($.videoContentNode,function(t){return t.isGIF})&&(et="gif"),$.isSticker()&&(E+=1)),S.includes("https://pixabay.com")&&(S=S.substr("https://pixabay.com".length,S.length-"https://pixabay.com".length));var rt="",nt=i.clone(i.opt(M,function(t){return t.imageColorData}));if(null!=nt){i.sortInPlace(nt,function(t,e){return t.coverage>e.coverage});for(var ot=[],it=i.iter(nt);!it.done;it.next()){var at,st,lt=it.value;(at=i.as(h.style,x.ImageStyle))&&(st=i.opt(i.opt(M,function(t){return t.image}),function(t){return t.getFilterColor(lt.rgbColor,at)}))&&(ot.push(st.rgbHex),ot.push(i.toString(Math.round(1e3*lt.coverage)/1e3)))}rt=ot.join(",")}var ut=s+"frame:'"+l+"',crop:'"+D+"',filt:'"+b+"',type:'"+et+"',";T.length>0&&(ut+="search:'"+i.toString(T)+"',"),S.length>0&&(ut+="url:'"+i.toString(S)+"',"),C.length>0&&(ut+="sourceType:'"+i.toString(C)+"',"),k.length>0&&(ut+="licenseType:'"+i.toString(k)+"',"),u.length>0&&(ut+="c1:'"+i.toString(u)+"',"),y.length>0&&(ut+="c2:'"+i.toString(y)+"',"),ut+=rt+"'",U.push(ut)}else if(t instanceof w.RootForma)H=s+"frame:'"+l+"', color1:'"+u+"'";else if(f=i.as(t,N.ShapeForma)){if(null!=f.controller){var ct,ht,pt=s+"frame:'"+l+"', color1:'"+u+"', intent:'"+((o=f.intent)||null!=o?o:"")+"'",ft=i.as(f.contentNode,B.VectorContentNode);F=i.opt(ft,function(t){return t.mediaMetadata}),null!=(ct=i.opt(F,function(t){return t.searchTerm}))&&(pt+=" searchTerm:'"+ct+"'"),null!=(ht=i.opt(F,function(t){return t.sourceURL}))&&(pt+=" iconURL:'"+ht+"'"),R.push(pt)}}else if((g=i.as(t.controller,V.TypeLockupController))&&null!=t.finalFrame){var gt=n.getLockupMetaDataString(t);if(O.push(gt),g.getCharacterStyleRanges().length>0){var dt=n.getMSLockupMetaDataString(t);G.push(dt)}}if(null!=(d=t.source)&&v.FormaSourceUtils.isDesignIngredient(t.source)){var mt=a+" src:"+d;L.push(mt)}}});var X=T.GUIDUtils.makeGUID(),K=[],W=a.colorLibraryController.getCurrentThemeHexString(),z=a.colorLibraryController.getNumThemeColorKeys(),q=e?"1":"0",J="size:"+s+", w:"+i.toString(a.pageSize.width);J+=", h:"+i.toString(a.pageSize.height)+", text:"+i.toString(O.length),J+=", images:"+i.toString(U.length)+", stickers:"+i.toString(E)+", layout:'"+D,J+="', marg:"+i.toString(C)+", spac:"+i.toString(b),J+=", DIs:"+L.length,J+=", theme:'"+A+"', anim:'"+l,J+="', source:'"+M+"', type:'"+F,J+="', wm:"+q+",char:"+i.toString(G.length);var Z="numColors:"+z+", paletteID:'"+P+"', palette:'"+W+"'";K.push([X,i.toString(K.length),"document",J]),K.push([X,i.toString(K.length),"document",Z]),K.push([X,i.toString(K.length),"background",H]);for(var Q=i.iter(U);!Q.done;Q.next()){var $=Q.value;K.push([X,i.toString(K.length),"image",$])}for(var tt=i.iter(O);!tt.done;tt.next()){var et=tt.value;K.push([X,i.toString(K.length),"text",et])}for(var rt=i.iter(R);!rt.done;rt.next()){var nt=rt.value;K.push([X,i.toString(K.length),"shape",nt])}for(var ot=i.iter(G);!ot.done;ot.next()){var it=ot.value;K.push([X,i.toString(K.length),"char",it])}for(var at=i.iter(L);!at.done;at.next()){var st=at.value;K.push([X,i.toString(K.length),"designIngredient",st])}for(var lt=i.iter(K);!lt.done;lt.next()){var ut=lt.value;i.info(ut[0]+" "+ut[1]+" "+ut[2]+" "+ut[3]+", length: "+ut[3].length)}return K},getDesignDecompositionJson:function(t){i.clone(t.firstPage.root.filterWithCallback(function(t){return null!=t.controller&&t.controller.floating}));var e,r,o,a=t.firstPage,s=a.sizeID,l=a.colorLibrary.paletteID,u=t.content.root.getTag(I.RootContentNode.THEME_ID_TAG),c=t.content.root.getTag(I.RootContentNode.DOCUMENT_SOURCE_TYPE_TAG),h=t.content.root.getTag(I.RootContentNode.DOCUMENT_SOURCE_ID_TAG),f="default",d=0,v=0,S=i.clone(a.root.filterByControllerKind(y.GridController.KIND));S.length>0&&(r=i.as(S[0].controller,y.GridController))&&(o=r.gridStyle)&&(f=o.name,d=r.spacing,v=r.margin);var D=null!=l?a.colorLibrary.paletteID:"",b=null!=u?u:"",C=null!=h?h:"",k=null!=c?c:"",P=[],A=[],M=[],F={};a.root.visitAll(g.FormaTraversal.PreOrder,function(t){if(null!=t.bounds){var r,o=t.formaID.substr(0,8)+",",a=n.getFrameString(t,!0),s="";(r=t.style.colors.color(p.ColorRole.FieldPrimary))&&(s=r.rgbHex);var l,u="";(l=t.style.colors.color(p.ColorRole.FieldSecondary))&&(u=l.rgbHex);var c,h,f,g={};if(t.bounds){var d=t.totalPlacement.calculateTransformValuesSKRT();g.xscale=i.toString(d.xscale),g.yscale=i.toString(d.yscale),g.tx=i.toString(d.tx),g.ty=i.toString(d.ty),g.rotCosine=i.toString(d.rotCosine),g.rotSine=i.toString(d.rotSine)}if(c=i.as(t,_.ImageForma)){var v="",y="",S="",T="",D="",b="",C="";i.opt(c.parent,function(t){return t.kind==m.FrameForma.KIND})&&(a=n.getFrameString(t.parent),C=c.parent.formaID.substr(0,8)),(J=i.as(c.style,x.ImageStyle))&&(T=J.name);var k,I,U,R=c.contentNode,O=i.opt(R,function(t){return t.mediaMetadata});if(i.opt(c.parent,function(t){return t.kind==m.FrameForma.KIND})){var G=i.clone(c.placement.inverse.transformPoints(i.clone(c.parent.bounds.points))),L=Math.round(c.bounds.width),H=Math.round(c.bounds.height);S=Math.round(1e3*L/H)/1e3+",";for(var E=[],j=i.iter(G);!j.done;j.next()){var Y=j.value,X=i.toString(Math.round(1e3*Y.x/L)/1e3),K=i.toString(Math.round(1e3*Y.y/H)/1e3);E.push(X+","+K)}S+=E.join(",")}null!=(et=i.opt(O,function(t){return t.searchTerm}))&&(y=et,null!=(k=i.opt(O,function(t){return t.sourceURL}))&&(v=k)),null!=(I=i.opt(O,function(t){return t.sourceName}))&&(D=I),null!=(U=i.opt(O,function(t){return t.licenseType}))&&(b=U);var W=i.clone(i.opt(R,function(t){return t.imageColorData}));if(null!=W){i.sortInPlace(W,function(t,e){return t.coverage>e.coverage});for(var z=[],q=i.iter(W);!q.done;q.next()){var J,Z,Q=q.value;(J=i.as(c.style,x.ImageStyle))&&(Z=i.opt(i.opt(R,function(t){return t.image}),function(t){return t.getFilterColor(Q.rgbColor,J)}))&&(z.push(Z.rgbHex),z.push(i.toString(Math.round(1e3*Q.coverage)/1e3)))}z.join(",")}var $={};$.id=o,$.bounds=t.bounds.asString,$.transform=i.clone(g),$.frame=a,$.crop=S,$.filter=T,$.cropID=C,y.length>0&&($.search=i.toString(y)),v.length>0&&($.url=i.toString(v)),D.length>0&&($.sourceType=i.toString(D)),b.length>0&&($.licenseType=i.toString(b)),s.length>0&&($.color1=i.toString(s)),u.length>0&&($.color2=i.toString(u)),P.push(i.clone($))}else if(t instanceof w.RootForma)(F={}).id=o,F.frame=a,F.color=s,F.bounds=t.bounds.asString,F.transform=i.clone(g);else if(h=i.as(t,N.ShapeForma)){if(null!=h.controller){var tt={};tt.id=o,tt.bounds=t.bounds.asString,tt.transform=i.clone(g),tt.frame=a,tt.color=s,tt.intent=(e=h.intent)||null!=e?e:"";var et,rt,nt=i.as(h.contentNode,B.VectorContentNode);O=i.opt(nt,function(t){return t.mediaMetadata}),null!=(et=i.opt(O,function(t){return t.searchTerm}))&&(tt.searchTerm=et),null!=(rt=i.opt(O,function(t){return t.sourceURL}))&&(tt.iconURL=rt),A.push(i.clone(tt))}}else if((f=i.as(t.controller,V.TypeLockupController))&&null!=t.finalFrame){if(null==f.contentNode)return;var ot=i.clone(n.getLockupMetaDataJSON(t));null!=ot&&(ot.bounds=t.bounds.asString,ot.transform=i.clone(g),f.getCharacterStyleRanges().length>0&&(ot.highlightStyle=i.clone(n.getMSLockupMetaDataJson(t))),M.push(i.clone(ot)))}}}),T.GUIDUtils.makeGUID();var U=a.colorLibraryController.getCurrentThemeHexString(),R=(a.colorLibraryController.getNumThemeColorKeys(),{});return R.sizeID=s,R.width=i.toString(a.pageSize.width),R.height=i.toString(a.pageSize.height),R.layout=f,R.margin=i.toString(v),R.spacing=i.toString(d),R.themeID=b,R.source=C,R.type=k,R.paletteID=D,R.palette=U,R.images=i.clone(P),R.text=i.clone(M),R.shapes=i.clone(A),R},getLockupMetaDataString:function(t){var e,r="",o=n.getFrameString(t);if(e=i.as(t.controller,V.TypeLockupController)){var a,s=e.text,l="";(a=i.opt(i.opt(e.lockupStyle,function(t){return t.font}),function(t){return t.fontData}))&&(l=a.postScriptName);var u,c,h=e.lockupStyle.backingShapeID,f=e.lockupStyle.textLookAsString,g=e.lockupStyle.layoutType,d="",m="";(u=e.lockupStyle.colors.color(p.ColorRole.FieldPrimary))&&(d=u.rgbHex),e.lockupStyle.backing!=C.LockupBacking.None&&(c=e.lockupStyle.colors.color(p.ColorRole.FieldSecondary))&&(m=c.rgbHex);var v,y=Math.round(1e3*e.lockupStyle.currentTextOpacity)/1e3,S=Math.round(1e3*e.lockupStyle.currentBackingOpacity)/1e3,T=e.lockupStyle.textBacked?"1":"0",D="";(v=e.getBackgroundColor())&&(D=v.rgbHex);var _=t.formaID.substr(0,8),x=Math.round(1e3*e.lockupStyle.shadowAngle)/1e3,b=Math.round(1e3*e.lockupStyle.shadowOffset)/1e3,k=Math.round(1e3*e.lockupStyle.spacing)/1e3,P=Math.round(1e3*e.lockupStyle.padding)/1e3,A=Math.round(1e3*e.lockupStyle.tracking)/1e3,I=Math.round(1e3*e.lockupStyle.strokeWeight)/1e3;r="id:'"+_+"', ft:'"+l,r+="', sh:'"+h+"', lk:'"+f,r+="', ly:'"+g+"', ln:"+i.toString(s.length),r+=", lh:"+i.toString(Math.round(e.avgLineHeight))+", fr:'"+o,r+="', ta:"+i.toString(y)+", ba:"+i.toString(S),r+=", c1:'"+d+"', c2:'"+m,r+=", fl:'"+T+"', bc:'"+D+"'";var w=i.clone((new M.RoleSuggester).getRole(t));r+=" r:'"+M.RoleSuggester.getShortLabel(w.role)+"', rc:"+Math.round(1e3*w.confidence)/1e3,r+=" sa:'"+i.toString(x)+"', so:'"+i.toString(b),r+="', sp:'"+i.toString(k)+"', pd:'"+i.toString(P),r+="', tr:'"+i.toString(A)+"', sw:'",r+=i.toString(I)+"'"}return r},getLockupMetaDataJSON:function(t){var e,r=n.getFrameString(t,!0);if(e=i.as(t.controller,V.TypeLockupController)){var o,a=e.contentNode.text,s="";(o=i.opt(i.opt(e.lockupStyle,function(t){return t.font}),function(t){return t.fontData}))&&(s=o.postScriptName);var l,u,c=e.lockupStyle.backingShapeID,h=e.lockupStyle.textLookAsString,f=e.lockupStyle.layoutType,g="",d="";(l=e.lockupStyle.colors.color(p.ColorRole.FieldPrimary))&&(g=l.rgbHex),e.lockupStyle.backing!=C.LockupBacking.None&&(u=e.lockupStyle.colors.color(p.ColorRole.FieldSecondary))&&(d=u.rgbHex);var m,v=Math.round(1e3*e.lockupStyle.currentTextOpacity)/1e3,y=Math.round(1e3*e.lockupStyle.currentBackingOpacity)/1e3,S=(e.lockupStyle.textBacked,"");(m=e.getBackgroundColor())&&(S=m.rgbHex);var T=t.formaID.substr(0,8),D=Math.round(1e3*e.lockupStyle.shadowAngle)/1e3,_=Math.round(1e3*e.lockupStyle.shadowOffset)/1e3,x=Math.round(1e3*e.lockupStyle.spacing)/1e3,b=Math.round(1e3*e.lockupStyle.padding)/1e3,k=Math.round(1e3*e.lockupStyle.tracking)/1e3,P=Math.round(1e3*e.lockupStyle.strokeWeight)/1e3,A={};return A.id=T,A.font=s,A.backingShape=c,A.look=h,A.layout=f,A.text=a,A.lineHeight=i.toString(Math.round(e.avgLineHeight)),A.frame=r,A.backingOpacity=i.toString(y),A.textOpacity=i.toString(v),A.color1=g,A.color2=d,A.backgroundColor=S,A.shadowAngle=i.toString(D),A.shadowOffset=i.toString(_),A.spacing=i.toString(x),A.padding=i.toString(b),A.tracking=i.toString(k),A.strokeWeight=i.toString(P),A}return null},getMSLockupMetaDataString:function(t){var e,r="";if(e=i.as(t.controller,V.TypeLockupController)){r="id:'"+t.formaID.substr(0,8)+"'";for(var n=i.iter(e.lockupStyle.characterStyles);!n.done;n.next()){var o,a,s,l=n.key,u=n.value;r+=", chStyle:'"+l+"'",(o=i.opt(u.font,function(t){return t.fontData}))&&(r+=", chFont:'"+o.postScriptName+"'"),u.backing!=C.LockupBacking.UNSET&&(r+=", chShape:'"+u.backingShapeID+"'"),u.textLook!=C.LockupTextLook.UNSET&&(r+=", chLook:'"+u.textLookAsString+"'"),u.textOpacity!=C.LockupStyle.OPACITY_UNSET&&(r+=", chTextOpacity:'"+u.textOpacity+"'"),u.backingOpacity!=C.LockupStyle.OPACITY_UNSET&&(r+=", chBackOpacity:'"+u.backingOpacity+"'"),(a=u.colors.color(p.ColorRole.FieldPrimary))&&(r+=", chColor1:'"+a.rgbHex+"'"),u.backing!=C.LockupBacking.None&&(s=u.colors.color(p.ColorRole.FieldSecondary))&&(r+=", chColor2:'"+s.rgbHex+"'")}}return r},getMSLockupMetaDataJson:function(t){var e,r={};if(e=i.as(t.controller,V.TypeLockupController))for(var n=t.formaID.substr(0,8),o=i.iter(e.lockupStyle.characterStyles);!o.done;o.next()){var a,s=o.key,l=o.value;r.id=n,r.styleName=s,(a=i.opt(l.font,function(t){return t.fontData}))&&(r.font=a.postScriptName),l.backing!=C.LockupBacking.UNSET&&(r.backingShape=l.backingShapeID),l.textLook!=C.LockupTextLook.UNSET&&(r.textLook=l.textLookAsString),l.textOpacity!=C.LockupStyle.OPACITY_UNSET&&(r.textOpacity=i.toString(l.textOpacity)),l.backingOpacity!=C.LockupStyle.OPACITY_UNSET&&(r.backingOpacity=i.toString(l.backingOpacity));var u,c,h="",f="";(u=l.colors.color(p.ColorRole.FieldPrimary))&&(h=u.rgbHex,r.color1=h),l.backing!=C.LockupBacking.None&&(c=l.colors.color(p.ColorRole.FieldSecondary))&&(f=c.rgbHex,r.color2=f)}return r},sliderToOpacityMapping:function(t){return Math.log(t*(o.OPACITY_LOG_SCALE-1)+1)/Math.log(o.OPACITY_LOG_SCALE)},opacityToSliderMapping:function(t){return(Math.exp(t*Math.log(o.OPACITY_LOG_SCALE))-1)/(o.OPACITY_LOG_SCALE-1)},sliderToSpacingPaddingMapping:function(t){return t},spacingPaddingToSliderMapping:function(t){return t},pruneOrphanedContent:function(t){var e={};t.firstPage.root.visitAll(g.FormaTraversal.PreOrder,function(t){var r,n;null!=(r=t.contentID)&&(e[r]=!0),(n=i.as(t,Y.VideoForma))&&(e[n.videoContentID]=!0)});var r=[];t.content.root.visitAll(function(n){n!=t.content.root&&null==e[n.id]&&r.push(n)});for(var n=i.iter(r);!n.done;n.next()){var o=n.value;o.parent.removeChild(o),o.releaseResources()}},testMoveableShapeCreation:function(t,e){var r=t.page.createFormaWithController(N.ShapeForma.KIND,F.ShapeController.KIND);O.ShapeLibrary.applyToShapeForma(r,e);var n=i.clone(t.page.colorLibraryController.getThemeColorKeys());r.style.colors.setColorId(p.ColorRole.FieldPrimary,n[0]),r.intent=g.Forma.INTENT_FLOATING_SHAPE;var o=t.controller.getGridController(),a=i.clone(o.forma.filterWithCallback(function(t){return null!=t.controller&&t.controller.floating},g.FormaTraversal.JustChildren));return i.sortInPlace(a,function(t,e){return t.parent.indexOfChild(t)<e.parent.indexOfChild(e)}),a.length>0?i.opt(o,function(t){return t.forma}).insertBefore(r,a[0]):i.opt(o,function(t){return t.forma}).appendChild(r),i.opt(r.controller,function(t){return t.fit(new H.TheoRect(100,100,600,600))}),r},testShapeGroupCreation:function(t){var e=t.controller.getGridController(),r=i.clone(e.forma.filterWithCallback(function(t){return null!=t.controller&&t.controller.floating&&t.controller.kind!=s.AlignmentGroupController.KIND},g.FormaTraversal.JustChildren));i.sortInPlace(r,function(t,e){return t.parent.indexOfChild(t)<e.parent.indexOfChild(e)});var n=t.page.createFormaWithController(S.GroupForma.KIND,U.ShapeGroupController.KIND);r.length>0?i.opt(e,function(t){return t.forma}).insertBefore(n,r[0]):i.opt(e,function(t){return t.forma}).appendChild(n);var o=n.controller;return i.opt(n,function(t){return t.protectedSetStyle(R.ShapeGroupStyle.createDefault())}),i.opt(o.shapeGroupStyle,function(e){return e.colors.setColorId(p.ColorRole.FieldPrimary,t.page.colorLibraryController.getThemeColorKeys()[0])}),i.opt(o.shapeGroupStyle,function(t){return t.backingArtworkID="square_001"}),o.fit(t.finalFrame.insetRel(.25,.25,.25,.25)),o.contrastCheck(),n},createAlignmentGroup:function(t){var e=t.controller.getGridController(),r=i.clone(e.forma.filterWithCallback(function(t){return null!=t.controller&&t.controller.floating&&t.controller.kind!=s.AlignmentGroupController.KIND},g.FormaTraversal.JustChildren));i.sortInPlace(r,function(t,e){return t.parent.indexOfChild(t)<e.parent.indexOfChild(e)});var n=t.page.createFormaWithController(S.GroupForma.KIND,s.AlignmentGroupController.KIND);r.length>0?i.opt(e,function(t){return t.forma}).insertBefore(n,r[0]):i.opt(e,function(t){return t.forma}).appendChild(n);var o=n.controller;return i.opt(n,function(t){return t.protectedSetStyle(l.AlignmentGroupStyle.createDefault())}),o.setupWithFormae([],a.AlignmentType.CenterX),i.opt(o.alignmentGroupStyle,function(e){return e.colors.setColorId(p.ColorRole.FieldPrimary,t.page.colorLibraryController.getThemeColorKeys()[0])}),i.opt(o.alignmentGroupStyle,function(t){return t.seperatorArtworkID=O.ShapeLibrary.Square}),i.opt(o.alignmentGroupStyle,function(t){return t.layoutMode=l.GroupLayoutMode.None}),i.opt(o.alignmentGroupStyle,function(t){return t.backingArtworkID="square_001"}),o.fit(t.finalFrame.insetRel(.25,.25,.25,.25)),o.contrastCheck(),n},getUnreportedUsedIcons:function(t){var e=[];t.content.root.visitAll(function(t){var r;if(r=i.as(t,B.VectorContentNode)){var n=r.getUsageID();null!=n&&r.isUsageReported()&&!e.includes(n)&&e.push(n)}});var r=[];return t.content.root.visitAll(function(t){var n;if(n=i.as(t,B.VectorContentNode)){var o=n.getUsageID();null!=o&&(n.isUsageReported()||(e.includes(o)?n.setUsageReported(!0):r.includes(o)||r.push(o)))}}),r},reportedIconUsage:function(t,e){t.content.root.visitAll(function(t){var r;if(r=i.as(t,B.VectorContentNode)){var n=r.getUsageID();null!=n&&e.includes(n)&&r.setUsageReported(!0)}})},dumpDocumentInfo:function(t,e){if(null!=t){i.info("Document '"+t.documentName+"' "+e+". Document history:"),t.history.forEachEntry(function(t){return i.info("  "+t)});for(var r=i.clone(t.firstPage.colorLibraryController.getThemeColorKeys()),o=i.iter(r);!o.done;o.next()){var a=o.value,s=t.firstPage.colorLibraryController.getSolidColorForKey(a);i.info("Theme color:"+a+" value:"+i.toString(i.opt(s,function(t){return t.asString})))}i.info("Document formae:"),t.firstPage.root.visitAll(g.FormaTraversal.PreOrder,function(t){var e=n.getFormaNestingDepthString(t)+"  Forma kind: "+t.kind+" "+i.toString(i.opt(t.controller,function(t){return t.kind}));null!=t.bounds&&(e+=" size: "+Math.round(t.bounds.width)+" x "+Math.round(t.bounds.height));var r=t.style.colors.colorID(p.ColorRole.FieldPrimary);if(null!=r&&(e+=" primary color:"+r),"Text"==t.kind)e+=" text: '"+t.textModel.text;else if("Shape"==t.kind)e+=" shapeID: '"+i.toString(t.shapeLibraryID);else if("Image"==t.kind){var o=t.contentNode;e+=null!=o?" Image size:"+o.pixelWidth+" x "+o.pixelHeight:"[Failed to find ContentNode for image]"}e+=" id: "+t.formaID+", contentID: "+i.toString(t.contentID)+", parent id: "+i.toString(i.opt(t.parent,function(t){return t.formaID})),i.info(e)}),i.info("Document Content:"),t.content.root.visitAll(function(t){if(null!=i.as(t,E.URLBasedContentNode)){var e=t;i.info("  Node kind:"+e.kind+" id:"+e.id+" url:"+i.toString(e.url)+" source:"+i.toString(i.opt(e.mediaMetadata,function(t){return t.sourceName}))+" assetID:"+i.toString(i.opt(e.mediaMetadata,function(t){return t.assetID})))}else i.info("  Node kind:"+t.kind+" id:"+t.id)})}},duplicateDocForSize:function(t,e){if(null!=t){var r=n.duplicateDocument(t);return r.firstPage.setPageSizeFromDesignSize(e),r}return null},duplicateDocsForResizes:function(t,e){var r=[];if(null!=t)for(var o=i.iter(e);!o.done;o.next()){var a=o.value,s=n.duplicateDocument(t);s.firstPage.setPageSizeFromDesignSize(a),r.push(s)}return r},duplicateDocForGrid:function(t,e){if(null!=t){var r=n.duplicateDocument(t);null!=t.controller&&t.controller.inAutomaticLayoutInteractionMode&&i.opt(r.controller,function(t){return t.setAutomaticLayoutInteractionMode()});var o=i.as(r.firstPage.root.controller,A.RootController);i.opt(o,function(t){return t.createGridControllerIfNone()});var a=i.opt(o,function(t){return t.getGridController()});return i.opt(a,function(t){return t.applyStyle(e,0)}),r}return null},duplicateDocsForGrids:function(t,e){var r=[];if(null!=t)for(var o=i.iter(e);!o.done;o.next()){var a=o.value,s=n.duplicateDocument(t);null!=t.controller&&t.controller.inAutomaticLayoutInteractionMode&&i.opt(s.controller,function(t){return t.setAutomaticLayoutInteractionMode()});var l=i.as(s.firstPage.root.controller,A.RootController);i.opt(l,function(t){return t.createGridControllerIfNone()});var u=i.opt(l,function(t){return t.getGridController()});i.opt(u,function(t){return t.applyStyle(a,0)}),r.push(s)}return r},getFormaNestingDepthString:function(t){for(var e="",r=t.parent;null!=r;)e+="  ",r=r.parent;return e},duplicateDocument:function(t){D.Host.imageAnalysis.useCache(!0);var e=new b.JSONEncoder;t.encode(e);var r=new G.TheoDocument(new f.DocumentController),n=new b.JSONDecoder(i.clone(e.json()));return r.decode(n),r},updateConstrainedImageInfo:function(t){var e=[],r=[],n=[];t.firstPage.root.visitAll(g.FormaTraversal.PreOrder,function(t){var o,a;(o=i.as(t,_.ImageForma))&&(a=i.opt(o.contentNode,function(t){return t.mediaMetadata}))&&a.sourceName==P.MediaMetadata.kMediaStockSourceName&&null!=a.assetID&&null!=a.licenseType&&(a.licenseType==P.MediaMetadata.kMediaStockLicenseTypeNone?e.push(a.assetID):a.licenseType==P.MediaMetadata.kMediaStockLicenseTypeStandard?r.push(a.assetID):a.licenseType==P.MediaMetadata.kMediaStockLicenseTypeExtended?n.push(a.assetID):c.CoreAssert.isTrue(!1,"unknown image license type"))});var o={stockImages:{unlicensed:e,standard:r,extended:n}};t.constrainedImages=i.clone(o)},mapFontSource:function(t){switch(t){case 0:return"unknown";case 1:case 2:case 3:return"spark-provided";case 4:return"user-uploaded";case 5:case 6:return"tk-synced"}},addFontFromStyle:function(t,e){if(null!=t.font){for(var r=t.font.fontData,o={postScriptName:r.postScriptName,source:n.mapFontSource(r.source)},a=!1,s=i.iter(e);!s.done;s.next()){var l=s.value;if(l.postScriptName==o.postScriptName&&l.source==o.source){a=!0;break}}a||e.push(i.clone(o))}},getFontsUsed:function(t){for(var e=[],r=i.clone(t.firstPage.root.filterByControllerKind(V.TypeLockupController.KIND)),o=i.iter(r);!o.done;o.next()){var a,s=o.value;if(a=i.as(s.style,C.LockupStyle)){n.addFontFromStyle(a,e);for(var l=i.iter(a.characterStyles);!l.done;l.next()){var u=l.value;n.addFontFromStyle(u,e)}}}return e},getNumStickers:function(t){for(var e=0,r=i.iter(t.firstPage.root.visitAsArray(g.FormaTraversal.PreOrder));!r.done;r.next()){var n,o,a=r.value;(n=i.as(a,Y.VideoForma))&&(o=i.opt(n.contentNode,function(t){return t.mediaMetadata}))&&n.isSticker()&&o.sourceName==P.MediaMetadata.kMediaGiphySourceName&&(e+=1)}return e}}}),n)},164:function(t,e,r){var n,o=e,i=r(0),a=r(134);o.TheoBrandkitUtils=(n=function(){a.BrandingFacade.call(this)},i.defineClass({name:"TheoBrandkitUtils",ctor:n,superName:"BrandingFacade",statics:{isDocumentBranded:function(t,e){return a.BrandingFacade.isDocumentBranded(t,e)}}}),n)},252:function(t,e,r){var n,o=e,i=r(0),a=r(11),s=r(26),l=r(23),u=r(91),c=r(9),h=r(30),p=r(15),f=r(10),g=r(88);o.ImageUtils=(n=function(){},i.defineClass({name:"ImageUtils",ctor:n,statics:{suggestCrop:function(t,e,r,o,i){var a,l=r.size,u=Math.max(l.width/t.width,l.height/t.height);if((u>1||i==s.CropType.FitBorder)&&(l=l.multiply(1/u)),i==s.CropType.FillFocus){var h=new f.TheoRect(0,0,t.width,t.height),g=e.insetRel(-.25,-.25,-.25,-.25),d=e.insetXY(h.width/10,h.height/10),m=(g.area>d.area?g:d).insetRel(-.25,-.25,-.25,-.25).intersectionWith(h);a=n.getCropOfFocusRegion(m,r.size)}else if(i==s.CropType.ExtremeCloseup)a=n.getCropOfFocusRegion(e.insetRel(.25,.25,.25,.25),r.size);else if(i==s.CropType.AbstractCloseup)a=f.TheoRect.fromXYWH(e.center.x,e.center.y,5,5);else if(i==s.CropType.PreserveFocus&&null!=o){var v=o.center,y=e.center,S=new p.TheoPoint((y.x-v.x)/o.width,(y.y-v.y)/o.height);a=f.TheoRect.fromSize(l);var T=new p.TheoPoint(v.x-a.center.x,v.y-a.center.y);a=a.transform(c.Matrix2D.translation(T));var D=new p.TheoPoint((y.x-a.center.x)/a.width,(y.y-a.center.y)/a.height),_=new p.TheoPoint((D.x-S.x)*a.width,(D.y-S.y)*a.height);(a=a.transform(c.Matrix2D.translation(_))).minX<0&&(a=a.transform(c.Matrix2D.translation(new p.TheoPoint(-a.minX,0)))),a.maxX>=t.width&&(a=a.transform(c.Matrix2D.translation(new p.TheoPoint(t.width-a.maxX,0)))),a.minY<0&&(a=a.transform(c.Matrix2D.translation(new p.TheoPoint(0,-a.minY)))),a.maxY>=t.height&&(a=a.transform(c.Matrix2D.translation(new p.TheoPoint(0,t.height-a.maxY))))}else{var x=Math.abs(t.width-l.width)<1?0:Math.max(0,e.center.x-l.width/2),b=Math.abs(t.height-l.height)<1?0:Math.max(0,e.center.y-l.height/2);a=f.TheoRect.fromXYWH(x,b,l.width,l.height)}return a.area>0?a:null},getCropOfFocusRegion:function(t,e){var r=e.aspectRatio;if(r>t.aspectRatio){var n=t.width/r;return f.TheoRect.fromXYWH(t.minX,t.minY+(t.height-n)/2,t.width,n)}var o=t.height*r;return f.TheoRect.fromXYWH(t.minX+(t.width-o)/2,t.minY,o,t.height)},getMediaMetadataForForma:function(t){var e,r,n,o=null;if(t.isImage())(e=i.as(t,l.GroupForma))&&(r=u.ImageFacade.getImageFormaForForma(e))&&(n=r.contentNode)&&(o=n.mediaMetadata);else if(t.hasIntent(a.Forma.INTENT_ICON)){var s,c;(s=i.as(t,h.ShapeForma))&&(c=i.as(s.contentNode,g.VectorContentNode))&&(o=c.mediaMetadata)}return o}}}),n)},37:function(t,e,r){var n,o,i,a,s,l=e,u=r(0),c=r(1),h=r(4),p=r(9),f=r(15);l.MersenneTwister19937=(n=function(){this.w=32,this.n=624,this.m=397,this.r=31,this.f=1812433253,this.a=-1727483681,this.stdCDefaultSeed=5489,this.u=11,this.d=-1,this.s=7,this.b=-1658038656,this.t=15,this.c=-272236544,this.l=18,this.state=[],this.index=625,this.lowerMask=2147483647,this.upperMask=-2147483648,this.randMax=2147483647},u.defineClass({name:"MersenneTwister19937",ctor:n,props:{twist:function(){for(var t=u.iter(u.range(0,this.n,!1));!t.done;t.next()){var e=t.value,r=(this.state[e]&this.upperMask)+(this.state[(e+1)%this.n]&this.lowerMask),n=r>>1;r%2!=0&&(n^=this.a),this.state[e]=this.state[(e+this.m)%this.n]^n}this.index=0},mulDiscardOverflow:function(t,e){var r=65535&t,n=65535&e;return(((-65536&t)>>16&65535)*n+r*((-65536&e)>>16&65535)<<16&this.randMax)+r*n&this.randMax},seed:function(t){this.state=u.repeat(0,this.n),this.index=this.n,this.state[0]=t;for(var e=u.iter(u.range(1,this.n,!1));!e.done;e.next()){var r=e.value,n=this.state[r-1];this.state[r]=this.mulDiscardOverflow(this.f,n^n>>this.w-2)+r}},nextInt:{get:function(){this.index>=this.n&&(this.index>this.n&&this.seed(this.stdCDefaultSeed),this.twist());var t=this.state[this.index];return t^=t>>this.u&this.d,t^=t<<this.s&this.b,t^=t<<this.t&this.c,t^=t>>this.l,this.index+=1,t&this.randMax}},nextIntUniform:function(t){var e=this.nextInt,r=this.randMax%t+1;if(r!=t)for(var n=this.randMax-r;e>n;)e=this.nextInt;return e%t}}}),n),l.CoreRandom=(o=function(){h.CoreObject.call(this)},i={},u.defineClass({name:"CoreRandom",ctor:o,superName:"CoreObject",statics:{rng:{get:function(){return void 0===i.rng&&(i.rng=new l.MersenneTwister19937),i.rng},set:function(t){i.rng=t}},seedRandom:function(t){o.rng.seed(t)},nextInt:{get:function(){return o.rng.nextInt}},nextIntUniform:function(t){return o.rng.nextIntUniform(t)}}}),o),l.CircleCircleData=(a=function(t,e,r,n){this.leftCenter=t,this.rightCenter=e,this.sine=r,this.cosine=n},u.defineClass({name:"CircleCircleData",ctor:a}),a),l.MathUtils=(s=function(){},u.defineClass({name:"MathUtils",ctor:s,statics:{nearestMultiple:function(t,e){return c.CoreAssert.isTrue(!isNaN(t)),c.CoreAssert.isTrue(!isNaN(e)),Math.round(t/e)*e},absDouble:function(t){return t>=0?t:-t},absInt:function(t){return t>=0?t:-t},minInt:function(t,e){return e<t?e:t},maxInt:function(t,e){return e>t?e:t},minDouble:function(t,e){var r,n,o,i;return(n=null!=(i=e)?i:0)<(r=null!=(o=t)?o:0)?n:r},maxDouble:function(t,e){var r,n,o,i;return(n=null!=(i=e)?i:0)>(r=null!=(o=t)?o:0)?n:r},VectorDot:function(t,e){return t.x*e.x+t.y*e.y},VectorCross:function(t,e){return t.x==e.x?t.x*(e.y-t.y):t.y==e.y?t.y*(t.x-e.x):t.x*e.y-e.x*t.y},VectorNorm:function(t){return 0==t.x?s.absDouble(t.y):0==t.y?s.absDouble(t.x):Math.sqrt(s.VectorDot(t,t))},UnitTriangleToTriangleMatrix:function(t,e,r){return new p.Matrix2D(f._minus_TheoPoint_TheoPoint(e,t).x,f._minus_TheoPoint_TheoPoint(e,t).y,f._minus_TheoPoint_TheoPoint(r,t).x,f._minus_TheoPoint_TheoPoint(r,t).y,t.x,t.y)},TriangleToUnitTriangleMatrix:function(t,e,r,n){return new p.Matrix2D(f._minus_TheoPoint_TheoPoint(n,e).y/t,f._minus_TheoPoint_TheoPoint(e,r).y/t,f._minus_TheoPoint_TheoPoint(e,n).x/t,f._minus_TheoPoint_TheoPoint(r,e).x/t,s.VectorCross(n,e)/t,s.VectorCross(e,r)/t)},MoveRectangleMatrix:function(t,e){var r=new f.TheoPoint(0,0),n=new f.TheoPoint(1,0),o=new f.TheoPoint(0,1);return s.MoveTriangleMatrix(t.eval(r),t.eval(n),t.eval(o),e.eval(r),e.eval(n),e.eval(o))},TriangleDiscriminant:function(t,e,r){return s.VectorCross(f._minus_TheoPoint_TheoPoint(e,t),f._minus_TheoPoint_TheoPoint(r,t))},MoveTriangleMatrix:function(t,e,r,n,o,i){var a=s.TriangleDiscriminant(t,e,r),l=s.TriangleToUnitTriangleMatrix(a,t,e,r);return l=l.concat(s.UnitTriangleToTriangleMatrix(n,o,i))},CircleCircleIntersection:function(t,e,r,n){var o=f._minus_TheoPoint_TheoPoint(r,t),i=s.VectorNorm(o),a=s.VectorDot(o,o),u=f.TheoPoint.ZERO,c=f.TheoPoint.ZERO,h=(a+e*e-n*n)/2/i/e;if(h>1||h<-1)return u=f.TheoPoint.INVALID,c=f.TheoPoint.INVALID,new l.CircleCircleData(u,c,NaN,NaN);var p=Math.sqrt(1-h*h),g=i*e*h,d=i*e*p,m=new f.TheoPoint(d,g),v=new f.TheoPoint(s.VectorCross(o,m),s.VectorDot(o,m)).divide(a);u=f._plus_TheoPoint_TheoPoint(t,v);var y=new f.TheoPoint(g,d),S=new f.TheoPoint(s.VectorDot(y,o),s.VectorCross(y,o)).divide(a);return c=f._plus_TheoPoint_TheoPoint(t,S),new l.CircleCircleData(u,c,p,h)},ArcToBezier3:function(t,e,r){if(isNaN(t)||!isFinite(t))return c.CoreAssert.fail("bad start value"),[];if(isNaN(e)||!isFinite(e))return c.CoreAssert.fail("bad end value"),[];if(r<1)return c.CoreAssert.fail("bad patch count"),[];for(var n=[],o=(e-t)/u.toDouble(r),i=t,a=u.iter(u.range(0,r-1,!0));!a.done;a.next()){var l=a.value+1<r?i+o:e,h=u.clone(s.arc2bezier2_(i,l));n.length>0&&n.splice(n.length-1,1),n=u.clone(n.concat(u.clone(h))),i=l}return n},arc2bezier2_:function(t,e){var r=e-t,n=u.clone(s.arc2bezier_(r)),o=t+r/2,i=Math.cos(o),a=Math.sin(o);1==i||-1==i?a=0:1==a||-1==a?i=0:0==i?a=a>0?1:-1:0==a&&(i=i>0?1:-1);var l=p.Matrix2D.rotation(i,a);return n[0]=l.transformPoint(n[0]),n[1]=l.transformPoint(n[1]),n[2]=l.transformPoint(n[2]),n[3]=l.transformPoint(n[3]),n},arc2bezier_:function(t){var e=new f.TheoPoint(Math.cos(t/2),-Math.sin(t/2)),r=new f.TheoPoint(e.x,-e.y),n=new f.TheoPoint((4-e.x)/3,(1-e.x)*(3-e.x)/(3*e.y));return[e,n,new f.TheoPoint(n.x,-n.y),r]},saturate_range:function(t,e,r){var n=t,o=e;if(c.CoreAssert.isTrue(n<o||o<n||n==o),o<n){var i=n;n=o,o=i}return r<n?n:r>o?o:(c.CoreAssert.isTrue(r==r),r)},Reflect:function(t,e){return new f.TheoPoint(-t.x+2*e.x,-t.y+2*e.y)},sign:function(t){return 0==t?0:t<0?-1:1}}}),s)},447:function(t,e,r){var n,o,i=e,a=r(0),s=r(1),l=r(312);i.JSONEncoder=(n=function(t){this.json_={},this.children=[],this.components=null,this.namespace_="",void 0===t&&(t=""),this.namespace_=t},a.defineClass({name:"JSONEncoder",ctor:n,statics:{_implements:function(t){return"IExportDataObjectDocument"==t||"IExportDataObject"==t}},props:{json:function(){for(var t=a.clone(this.json_),e=a.iter(t);!e.done;e.next()){var r,o=e.key,i=e.value;(r=a.as(i,n))&&(t[o]=a.clone(r.json()))}return 0==this.children.length?t:(t.children=this.children.map(function(t){return t.json()},this),t)},setPath:function(t){this.json_.path=t},setName:function(t){this.json_.name=t},setType:function(t){this.json_.type=t},setProperty:function(t,e){null!=e&&(this.json_[this.namespace_+t]=e)},setOptionalStringProperty:function(t,e){this.json_[this.namespace_+t]=e},setStringProperty:function(t,e){this.json_[this.namespace_+t]=e},setStringPropertyNoNamespace:function(t,e){this.json_[t]=e},setNumberProperty:function(t,e){s.CoreAssert.isFalse(isNaN(e),"Can't set NaN for prop "+t+"."),this.json_[this.namespace_+t]=e},setIntProperty:function(t,e){this.json_[this.namespace_+t]=e},setBooleanProperty:function(t,e){this.json_[this.namespace_+t]=e},setOptionalBooleanProperty:function(t,e){this.json_[this.namespace_+t]=e},appendMetadata:function(t){var e=new n;return this.json_[this.namespace_+t]=e,e},appendChild:function(t){var e=new n(this.namespace_);return e.setStringPropertyNoNamespace("id",t),this.children.push(e),e},appendComponent:function(t,e,r,n){null==this.components&&(this.components=[]),this.components.push({id:e,url:r,mimeType:n}),this.json_.components=a.clone(this.components)},setManifestFormatVersion:function(t){this.json_["manifest-format-version"]=t},setCompositeID:function(t){this.json_.id=t},setManifestProperty:function(t,e){},setDocumentSize:function(t,e){}}}),n),i.JSONDecoder=(o=function(t,e){this.namespace_="",void 0===e&&(e=""),this.json=a.clone(t),this.namespace_=e},a.defineClass({name:"JSONDecoder",ctor:o,statics:{_implements:function(t){return"IImportDataObject"==t}},props:{id:{get:function(){return a.as(this.json.id,"String")}},type:{get:function(){return a.as(this.json.type,"String")}},name:{get:function(){return a.as(this.json.name,"String")}},path:{get:function(){return a.as(this.json.path,"String")}},optionalStringProperty:function(t){return a.as(this.json[this.namespace_+t],"String")},stringProperty:function(t,e){var r;return(r=a.as(this.json[this.namespace_+t],"String"))||null!=r?r:e},numberProperty:function(t,e){var r;return(r=a.as(this.json[this.namespace_+t],"Double"))||null!=r?r:e},intProperty:function(t,e){var r;return(r=a.as(this.json[this.namespace_+t],"Int"))||null!=r?r:e},booleanProperty:function(t,e){var r;return(r=a.as(this.json[this.namespace_+t],"Bool"))||null!=r?r:e},optionalBooleanProperty:function(t){return a.as(this.json[this.namespace_+t],"Bool")},property:function(t){return a.as(this.json[this.namespace_+t],"AnyObject")},metadata:function(t){var e,r;return(e=a.as(this.json[this.namespace_+t],i.JSONEncoder))?new o(a.clone(e.json())):(r=a.as(this.json[this.namespace_+t],["Dictionary","String","Any"]))?new o(a.clone(r)):null},forEachChild:function(t){var e;if(e=a.as(this.json.children,["Array",["Dictionary","String","Any"]]))for(var r=0,n=a.iter(e);!n.done;n.next()){var i=n.value;t(new o(a.clone(i),this.namespace_),r),r+=1}},forEachComponent:function(t){var e;if(e=a.as(this.json.components,["Array",["Dictionary","String","Any"]]))for(var r=0,n=a.iter(e);!n.done;n.next()){var o=n.value;t(l.JSONComponentDecoder.init_466d(a.clone(o)),r),r+=1}}}}),o)},457:function(t,e,r){var n,o,i=e,a=r(0),s=r(94);i.ImageProcessingUtils=(n=function(){},o={},a.defineClass({name:"ImageProcessingUtils",ctor:n,statics:{sobelX:{get:function(){return void 0===o.sobelX&&(o.sobelX=new s.TheoMatrix([[1,0,-1],[2,0,-2],[1,0,-1]])),o.sobelX}},sobelY:{get:function(){return void 0===o.sobelY&&(o.sobelY=new s.TheoMatrix([[1,2,1],[0,0,0],[-1,-2,-1]])),o.sobelY}},gaussianBlur3x3:{get:function(){return void 0===o.gaussianBlur3x3&&(o.gaussianBlur3x3=new s.TheoMatrix([[1,2,1],[2,4,2],[1,2,1]]).multiplyConstant(1/16)),o.gaussianBlur3x3}},applyConvolution:function(t,e){for(var r=a.toInt(Math.floor(a.toDouble(e.width)/2)),n=a.toInt(Math.floor(a.toDouble(e.height)/2)),o=[],i=a.iter(a.range(0,t.height,!1));!i.done;i.next()){for(var l=i.value,u=[],c=a.iter(a.range(0,t.width,!1));!c.done;c.next()){for(var h=c.value,p=0,f=a.iter(a.range(0,e.height,!1));!f.done;f.next())for(var g=f.value,d=a.iter(a.range(0,e.width,!1));!d.done;d.next()){var m=d.value,v=h+m-r,y=l+g-n;v>=0&&y>=0&&v<t.width&&y<t.height&&(p+=t.value(y,v)*e.value(g,m))}u.push(p)}o.push(a.clone(u))}return new s.TheoMatrix(a.clone(o))},getEdgeMagnitudeImage:function(t){if(t.isEmpty())return s.TheoMatrix.empty();var e=n.applyConvolution(t,n.sobelX).squared(),r=n.applyConvolution(t,n.sobelY).squared();return n.removeBorders(e),n.removeBorders(r),e.add(r).squareRoot()},removeBorders:function(t){t.isEmpty()||(t.setColValue(0,0),t.setColValue(t.cols-1,0),t.setRowValue(0,0),t.setRowValue(t.rows-1,0))}}}),n)},519:function(t,e,r){var n,o,i,a,s,l,u=e,c=r(0),h=r(1),p=r(4),f=r(8),g=r(9),d=r(37),m=r(520),v=r(81),y=r(15),S=r(10);u.svg_item=(n=function(){},c.defineClass({name:"svg_item",ctor:n,props:{visit:function(t,e){return h.CoreAssert.fail("subclass must implement"),[]}}}),n),u.svg_path=(o=function(){this.path_transform=g.Matrix2D.Identity,this.path_outline=null,u.svg_item.call(this)},c.defineClass({name:"svg_path",ctor:o,superName:"svg_item",props:{visit:function(t,e){if(!this.path_outline.isOnlyMoves()){var r=this.path_transform.concat(e),n=v.TheoArbitraryPath.ArbitraryPathFromPath(this.path_outline,r);if(null==t)return[n];var o=n.bounds;if(0==o.area&&(o=S.TheoRect.fromXYWH(o.minX,o.minY,o.width+.1,o.height+.1)),t.intersects(o))return[n]}return[]}}}),o),u.svg_group=(i=function(){this.items=[],this.group_attributes={},u.svg_item.call(this)},c.defineClass({name:"svg_group",ctor:i,superName:"svg_item",props:{addItem:function(t){this.items.push(t)},addAttribute:function(t,e){this.group_attributes[t]=e},visit:function(t,e){var r=[];if("none"!=this.group_attributes.display)for(var n=this.group_attributes.transform,o=m.SVGParserUtils.parseSVGTransform(n).concat(e),i=c.iter(this.items);!i.done;i.next()){var a=i.value;r=c.clone(r.concat(c.clone(a.visit(t,o))))}return r}}}),i),u.svg_dom=(a=function(){this.root_item=null,this.view_box=S.TheoRect.Zero,this.slice_box=S.TheoRect.Zero,this.content_region=S.TheoRect.Zero,p.CoreObject.call(this)},c.defineClass({name:"svg_dom",ctor:a,superName:"CoreObject"}),a),u.SVGPathData=(s=function(t,e,r,n,o,i){this.paths=c.clone(t),this.viewBox=e,this.sliceBox=r,this.contentBox=n,this.hasNoPaths=o,this.usedTags=c.clone(i)},c.defineClass({name:"SVGPathData",ctor:s,superName:"CoreObject"}),s),u.k_radians_per_degree=.017453292519943295,u.SVGParser=(l=function(){this._currentElementValue=null,this._dom=new u.svg_dom,this._stack=[],this._ignoringUnknownTag=null,this._usedTags=[],this._styleClasses={},this._elementAttrDict={},this._currentGroupAttrDict={},p.CoreObject.call(this)},c.defineClass({name:"SVGParser",ctor:l,superName:"CoreObject",statics:{collectTagDataForTest:!1},props:{createTheoPathFromParsedDom:function(){var t=null;this._dom.view_box.width>0&&this._dom.view_box.height>0&&(t=this._dom.view_box);var e=!1,r=c.clone(c.opt(this._dom.root_item,function(e){return e.visit(t,g.Matrix2D.Identity)})||[]);if(0==r.length&&null!=t){e=!0,c.info("SVGParser:failed to get any paths for parsed SVG. drawing an X so there's something to see");var n=(t.width+t.height)/15,o=Math.round(n/2),i=v.TheoArbitraryPath.ArbitraryPathWithOptions(v.TheoPath.PATHFILL_NONE,v.TheoPath.PATHEND_ROUND,v.TheoPath.PATHJOIN_BEVEL,o,o),a=t.insetXY(n,n);i.rectangle(t.minX,t.minY,t.maxX,t.maxY),i.moveTo(a.minX,a.minY),i.lineTo(a.maxX,a.maxY),i.moveTo(a.maxX,a.minY),i.lineTo(a.minX,a.maxY),r.push(i)}return new u.SVGPathData(c.clone(r),this._dom.view_box,this._dom.slice_box,this._dom.content_region,e,c.clone(this._usedTags))},handleStringValue:function(t){null==this._currentElementValue?this._currentElementValue=t.trim():this._currentElementValue=this._currentElementValue+t},parseStyleClassDefinitions:function(t){for(var e=c.clone(f.Host.pathUtils.matchesForRegexInString("\\.[\\w-]+\\s*\\{[^\\}]*\\}",t)),r=c.iter(e);!r.done;r.next()){var n=r.value,o=c.clone(f.Host.pathUtils.matchesForRegexInString("[\\w-]+\\s*",n));if(o.length>0){var i=o[0],a=n.substr(i.length+2,n.length-i.length-3),s=c.clone(m.SVGParserUtils.parseStyleStringToAttrDict(a));this._styleClasses[i.trim()]=c.clone(s)}}},mergeIntoAttrDict:function(t,e){for(var r=c.iter(t);!r.done;r.next()){var n=r.key,o=r.value;e&&"transform"==n||null==this._elementAttrDict[n]&&(this._elementAttrDict[n]=o)}},mergeStyleClassAttributes:function(t){for(var e=c.clone(t.split(" ")),r=c.iter(this._styleClasses);!r.done;r.next())for(var n=r.key,o=r.value,i=c.iter(e);!i.done;i.next())n==i.value&&this.mergeIntoAttrDict(c.clone(o),!1)},getSVGFillType:function(t){var e=v.TheoPath.PATHFILL_NONZERO;return"none"==t.fill?e=v.TheoPath.PATHFILL_NONE:"evenodd"==t["fill-rule"]&&(e=v.TheoPath.PATHFILL_EVENODD),e},beginElement:function(t,e){if(l.collectTagDataForTest&&!this._usedTags.includes(t)&&(null!=this._ignoringUnknownTag?this._usedTags.push(this._ignoringUnknownTag+"/"+t):this._usedTags.push(t)),null==this._ignoringUnknownTag){this._elementAttrDict=c.clone(e);var r=this._elementAttrDict.style;if(null!=r){var n=c.clone(m.SVGParserUtils.parseStyleStringToAttrDict(r));this.mergeIntoAttrDict(c.clone(n),!1)}null!=(r=this._elementAttrDict.class)&&this.mergeStyleClassAttributes(this._elementAttrDict.class);for(var o=c.iter(c.reverse(this._stack));!o.done;o.next()){var i=o.value;this.mergeIntoAttrDict(c.clone(i.group_attributes),!0)}r=this._elementAttrDict.transform;var a=g.Matrix2D.Identity;null!=r&&(a=m.SVGParserUtils.parseSVGTransform(r));var s=this.getSVGFillType(c.clone(this._elementAttrDict)),p=m.SVGParserUtils.getSVGEndcapType(c.clone(this._elementAttrDict)),T=m.SVGParserUtils.getSVGPathJoin(c.clone(this._elementAttrDict)),D=m.SVGParserUtils.getSVGSMiterLimit(c.clone(this._elementAttrDict)),_=m.SVGParserUtils.getSVGStrokeWt(c.clone(this._elementAttrDict)),x=this._elementAttrDict.display;if("svg:svg"==t||"svg"==t){h.CoreAssert.isTrue(null==this._dom.root_item);var b=new u.svg_group;this._dom.root_item=b,this._stack.push(b),this._dom.view_box=m.SVGParserUtils.parseSVGBox(this._elementAttrDict.viewBox),this._dom.slice_box=m.SVGParserUtils.parseSVGBox(this._elementAttrDict.sliceBox),this._dom.content_region=m.SVGParserUtils.parseSVGBox(this._elementAttrDict.contentRegion);for(var C=c.iter(this._elementAttrDict);!C.done;C.next()){var k=C.key,P=C.value;b.addAttribute(k,P)}if(l.collectTagDataForTest){var A="Creating App: ";null!=this._elementAttrDict["xmlns:inkscape"]?A+=this._elementAttrDict["xmlns:inkscape"]:null!=this._elementAttrDict["xmlns:sketch"]?A+=this._elementAttrDict["xmlns:sketch"]:null!=this._elementAttrDict["xmlns:serif"]?A+=this._elementAttrDict["xmlns:serif"]:null!=this._elementAttrDict["xmlns:i"]?A+=this._elementAttrDict["xmlns:i"]:A+="unknown",this._usedTags.push(A)}}else if("svg:g"==t||"g"==t){b=new u.svg_group,c.last(this._stack).addItem(b),this._stack.push(b);for(var I=c.iter(this._elementAttrDict);!I.done;I.next())k=I.key,P=I.value,b.addAttribute(k,P)}else if("svg:circle"==t||"circle"==t||"svg:ellipse"==t||"ellipse"==t){if("none"==x)return;var w=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"r",0),M=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"rx",w),F=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"ry",w);if(0==M||0==F)return;h.CoreAssert.isTrue(M>=0&&F>=0,"circle with negative radius?");var N=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"cx",0),U=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"cy",0),R=new u.svg_path;c.last(this._stack).addItem(R),R.path_transform=a;var O=S.TheoRect.fromXYWH(N-M,U-F,2*M,2*F);(rt=v.TheoArbitraryPath.ArbitraryPathWithOptions(s,p,T,_,D)).ellipse(O.minX,O.minY,O.maxX,O.maxY),R.path_outline=rt}else if("svg:line"==t||"line"==t){if("none"==x)return;var G=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"x1",0),L=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"y1",0),V=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"x2",0),H=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"y2",0);R=new u.svg_path,c.last(this._stack).addItem(R),R.path_transform=a,(rt=v.TheoArbitraryPath.ArbitraryPathWithOptions(v.TheoPath.PATHFILL_NONE,p,T,_,D)).moveTo(G,L),rt.lineTo(V,H),R.path_outline=rt}else if("svg:polyline"==t||"polyline"==t||"svg:polygon"==t||"polygon"==t){if("none"==x)return;if(r=this._elementAttrDict.points,0==(et=(z=c.clone(m.SVGParserUtils.scanCoordinateData(r))).length)||et%2!=0)return;for(var E=[],B=0;B<et;){var j=f.Host.pathUtils.parseStringToDouble(z[B]),Y=f.Host.pathUtils.parseStringToDouble(z[B+1]);B+=2,E.push(new y.TheoPoint(j,Y))}R=new u.svg_path,c.last(this._stack).addItem(R),R.path_transform=a,(rt=v.TheoArbitraryPath.ArbitraryPathWithOptions(s,p,T,_,D)).addLines(c.clone(E)),"svg:polygon"!=t&&"polygon"!=t||rt.closePath(),R.path_outline=rt}else if("svg:rect"==t||"rect"==t){if("none"==x)return;var X=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"width",0),K=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"height",0);if(0==K||0==X)return;if(j=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"x",0),Y=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"y",0),M=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"rx",0),F=m.SVGParserUtils.getAttrDoubleForKey(c.clone(this._elementAttrDict),"ry",0),M=d.MathUtils.saturate_range(0,X/2,M),F=d.MathUtils.saturate_range(0,K/2,F),R=new u.svg_path,c.last(this._stack).addItem(R),R.path_transform=a,R.path_outline=v.TheoArbitraryPath.ArbitraryPathWithOptions(s,p,T,_,D),0==M||0==F){var W=S.TheoRect.fromXYWH(j,Y,X,K);R.path_outline.rectangle(W.minX,W.minY,W.maxX,W.maxY)}else W=S.TheoRect.fromXYWH(j,Y,X,K),R.path_outline.roundedRectangle(W.minX,W.minY,W.maxX,W.maxY,M,F)}else if("svg:path"==t||"path"==t){if("none"==x)return;R=new u.svg_path,c.last(this._stack).addItem(R),R.path_transform=a,r=this._elementAttrDict.d;var z,q,J,Z,Q,$,tt,et=(z=c.clone(m.SVGParserUtils.scanPathData(r))).length,rt=v.TheoArbitraryPath.ArbitraryPathWithOptions(s,p,T,_,D);if(j=0,Y=0,$=0,tt=0,q=0,J=0,Z=0,Q=0,B=0,0==et)rt.moveTo(0,0),rt.closePath();else{function nt(){j=f.Host.pathUtils.parseStringToDouble(z[B]),Y=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2,rt.lineTo(j,Y),q=j,Z=j,J=Y,Q=Y}function ot(){j+=f.Host.pathUtils.parseStringToDouble(z[B]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2,rt.lineTo(j,Y),q=j,Z=j,J=Y,Q=Y}for(;B<et;){var it=z[B];if(B+=1,"M"==it)j=f.Host.pathUtils.parseStringToDouble(z[B]),Y=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2,rt.moveTo(j,Y),$=j,tt=Y,q=j,Z=j,J=Y,Q=Y;else if("m"==it)j+=f.Host.pathUtils.parseStringToDouble(z[B]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2,rt.moveTo(j,Y),q=j,Z=j,J=Y,Q=Y,$=j,tt=Y;else if("L"==it)nt();else if("l"==it)ot();else if("H"==it)j=f.Host.pathUtils.parseStringToDouble(z[B]),B+=1,rt.lineTo(j,Y),q=j,Z=j,J=Y,Q=Y;else if("h"==it)j+=f.Host.pathUtils.parseStringToDouble(z[B]),B+=1,rt.lineTo(j,Y),q=j,Z=j,J=Y,Q=Y;else if("V"==it)Y=f.Host.pathUtils.parseStringToDouble(z[B]),B+=1,rt.lineTo(j,Y),q=j,Z=j,J=Y,Q=Y;else if("v"==it)Y+=f.Host.pathUtils.parseStringToDouble(z[B]),B+=1,rt.lineTo(j,Y),q=j,Z=j,J=Y,Q=Y;else if("C"==it)q=f.Host.pathUtils.parseStringToDouble(z[B]),J=f.Host.pathUtils.parseStringToDouble(z[B+1]),Z=f.Host.pathUtils.parseStringToDouble(z[B+2]),Q=f.Host.pathUtils.parseStringToDouble(z[B+3]),j=f.Host.pathUtils.parseStringToDouble(z[B+4]),Y=f.Host.pathUtils.parseStringToDouble(z[B+5]),B+=6,rt.cubicBezier(q,J,Z,Q,j,Y),q=j,J=Y;else if("c"==it)q=j+f.Host.pathUtils.parseStringToDouble(z[B]),J=Y+f.Host.pathUtils.parseStringToDouble(z[B+1]),Z=j+f.Host.pathUtils.parseStringToDouble(z[B+2]),Q=Y+f.Host.pathUtils.parseStringToDouble(z[B+3]),j+=f.Host.pathUtils.parseStringToDouble(z[B+4]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+5]),B+=6,rt.cubicBezier(q,J,Z,Q,j,Y),q=j,J=Y;else if("S"==it){var at=d.MathUtils.Reflect(new y.TheoPoint(Z,Q),new y.TheoPoint(j,Y));q=at.x,J=at.y,Z=f.Host.pathUtils.parseStringToDouble(z[B]),Q=f.Host.pathUtils.parseStringToDouble(z[B+1]),j=f.Host.pathUtils.parseStringToDouble(z[B+2]),Y=f.Host.pathUtils.parseStringToDouble(z[B+3]),B+=4,rt.cubicBezier(q,J,Z,Q,j,Y),q=j,J=Y}else if("s"==it)at=d.MathUtils.Reflect(new y.TheoPoint(Z,Q),new y.TheoPoint(j,Y)),q=at.x,J=at.y,Z=j+f.Host.pathUtils.parseStringToDouble(z[B]),Q=Y+f.Host.pathUtils.parseStringToDouble(z[B+1]),j+=f.Host.pathUtils.parseStringToDouble(z[B+2]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+3]),B+=4,rt.cubicBezier(q,J,Z,Q,j,Y),q=j,J=Y;else if("Q"==it)q=f.Host.pathUtils.parseStringToDouble(z[B]),J=f.Host.pathUtils.parseStringToDouble(z[B+1]),j=f.Host.pathUtils.parseStringToDouble(z[B+2]),Y=f.Host.pathUtils.parseStringToDouble(z[B+3]),B+=4,rt.quadraticBezier(q,J,j,Y),Z=j,Q=Y;else if("q"==it)q=j+f.Host.pathUtils.parseStringToDouble(z[B]),J=Y+f.Host.pathUtils.parseStringToDouble(z[B+1]),j+=f.Host.pathUtils.parseStringToDouble(z[B+2]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+3]),B+=4,rt.quadraticBezier(q,J,j,Y),Z=j,Q=Y;else if("T"==it)at=d.MathUtils.Reflect(new y.TheoPoint(q,J),new y.TheoPoint(j,Y)),q=at.x,J=at.y,j=f.Host.pathUtils.parseStringToDouble(z[B]),Y=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2,rt.quadraticBezier(q,J,j,Y),Z=j,Q=Y;else if("t"==it)at=d.MathUtils.Reflect(new y.TheoPoint(q,J),new y.TheoPoint(j,Y)),q=at.x,J=at.y,j+=f.Host.pathUtils.parseStringToDouble(z[B]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2,rt.quadraticBezier(q,J,j,Y),Z=j,Q=Y;else if("A"==it||"a"==it){M=d.MathUtils.absDouble(f.Host.pathUtils.parseStringToDouble(z[B])),F=d.MathUtils.absDouble(f.Host.pathUtils.parseStringToDouble(z[B+1]));var st=f.Host.pathUtils.parseStringToDouble(z[B+2])*u.k_radians_per_degree,lt=0!=f.Host.pathUtils.parseStringToDouble(z[B+3]),ut=0!=f.Host.pathUtils.parseStringToDouble(z[B+4]);B+=5;var ct=new y.TheoPoint(j,Y);if("A"==it){if(0==M||0==F){nt();continue}j=f.Host.pathUtils.parseStringToDouble(z[B]),Y=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2}else{if(0==M||0==F){ot();continue}j+=f.Host.pathUtils.parseStringToDouble(z[B]),Y+=f.Host.pathUtils.parseStringToDouble(z[B+1]),B+=2}var ht=new y.TheoPoint(j,Y);if(ct==ht)continue;m.SVGParserUtils.svgArcToPath(ct,M,F,st,lt,ut,ht,rt),q=j,Z=j,J=Y,Q=Y}else"Z"==it||"z"==it?(rt.closePath(),j=$,q=$,Z=$,Y=tt,J=tt,Q=tt):h.CoreAssert.fail("unimplemented svg path opcode '"+it+"'")}}h.CoreAssert.isTrue(B==et,"i should equal count"),R.path_outline=rt}else"svg:switch"==t||"switch"==t||(this._ignoringUnknownTag=t)}},endElement:function(t){null!=this._ignoringUnknownTag?this._ignoringUnknownTag==t&&(this._ignoringUnknownTag=null):"svg:svg"==t||"svg"==t?this._stack.pop():"svg:desc"==t||"desc"==t||"svg:g"!=t&&"g"!=t||this._stack.pop(),null!=this._ignoringUnknownTag&&"defs"!=this._ignoringUnknownTag||"svg:style"!=t&&"style"!=t||null!=this._currentElementValue&&this.parseStyleClassDefinitions(this._currentElementValue),this._currentElementValue=null,this._elementAttrDict={}}}}),l)},520:function(t,e,r){var n,o=e,i=r(0),a=r(39),s=r(1),l=r(70),u=r(4),c=r(27),h=r(19),p=r(11),f=r(43),g=r(8),d=r(518),m=r(9),v=r(133),y=r(37),S=r(54),T=r(30),D=r(519),_=r(205),x=r(81),b=r(15),C=r(10),k=r(88);o.SVGParserUtils=(n=function(){u.CoreObject.call(this)},i.defineClass({name:"SVGParserUtils",ctor:n,superName:"CoreObject",statics:{k_two_pi:6.283185307179586,k_pi:3.141592653589793,kNumericRegEX:"[+-]?(([0-9]*\\.[0-9]+)|([0-9]+\\.?))([eE][+-]?[0-9]+)?",theoArtworkFromSVGData:function(t,e){if(null!=t){var r=n.parseSVGToPathData(t);return n.theoArtworkFromSVGPathData(r,e)}return null},theoArtworkFromSVGPathData:function(t,e){var r,n=new _.TheoArtworkShape;n.paths=i.clone(t.paths),n.fillColorRole=h.ColorRole.FieldPrimary,n.strokeColorRole=h.ColorRole.FieldPrimary;var o=n.bounds;if(t.viewBox.contains(o)||0==o.area){if(e){var a=.05*y.MathUtils.maxDouble(o.width,o.height);o.width<a&&(o=C.TheoRect.fromXYWH(o.minX-a/2+o.width/2,o.minY,a,o.height)),o.height<a&&(o=C.TheoRect.fromXYWH(o.minX,o.minY-a/2+o.height/2,o.width,a)),n.overrideBounds=o}else n.overrideBounds=t.viewBox;r=n}else{var s=new _.TheoArtworkClipGroup;if(e){var l=t.viewBox.intersectionWith(o);s.path=new x.TheoRectanglePath(l)}else s.path=new x.TheoRectanglePath(t.viewBox);s.appendChild(n),r=s}var u=t.sliceBox.width*t.sliceBox.height>0?t.sliceBox:null,c=t.contentBox.width*t.contentBox.height>0?t.contentBox:null;return new d.ArtworkInfo(r,u,c)},createShapeFromSVGURL:function(t,e,r){var o;return(o=g.Host.pathUtils.artworkFromURL(e,!0))?n.createShapeFromTheoArtwork(t,e,o,r):(s.CoreAssert.fail("artworkFromURL failed"),null)},createShapeFromTheoArtwork:function(t,e,r,n){var o=t.content.createNode(k.VectorContentNode.KIND);o.url=e,o.mimeType="image/svg+xml",o.mediaMetadata=n,i.opt(o.mediaMetadata,function(t){return t.designIntent=v.MediaMetadata.DESIGNINTENT_ICON});var a=r.artwork.bounds;null==a&&(a=r.contentRegion),null==a&&(i.info("failed to get size of the SVG. Making one up"),a=new C.TheoRect(0,0,50,50)),s.CoreAssert.isTrue(null!=a,"How do we not have an artSize?"),o.overrideBounds=a,o.size=a.size,t.content.root.appendChild(o);var l=t.firstPage.createFormaWithController(T.ShapeForma.KIND,S.ShapeController.KIND);return l.contentNode=o,l.canonicalArtwork=r.artwork,l.sliceBox=r.sliceBox,l.contentRegion=r.contentRegion,l.size=o.size,l.intent=p.Forma.INTENT_ICON,l},addShapeFromTheoArtwork:function(t,e,r,o,i){return n.addShapeToDocument(t,n.createShapeFromTheoArtwork(t,r,o,i),e)},addShapeFromSVGURL:function(t,e,r,o){var i;return(i=n.createShapeFromSVGURL(t,r,o))?n.addShapeToDocument(t,i,e):c.CorePromise.reject("unable to create artwork info")},addShapeToDocument:function(t,e,r){var n,o,u=c.CorePromise.resolve(null);return(o=i.as(i.opt(i.opt(r,function(t){return t.parent}),function(t){return t.controller}),f.GroupController))?(o.replaceChildWithForma(r,e,!0),i.opt(i.opt(e.controller,function(t){return t.owner}),function(t){return t.selection.deselectForma(r,!1)}),e.style.match(r.style),i.opt(g.Host.logging,function(t){return t.logToAnalytics(a.AnalyticsConstants.kAnalyticsIconReplaced,{})})):u=l.CreationFacade.addForma(t.firstPage,e,new l.AddFormaParams(void 0,void 0,r)).then(function(t){return e.controller.shuffleColorAssignment(),i.opt(g.Host.logging,function(t){return t.logToAnalytics(a.AnalyticsConstants.kAnalyticsIconAdded,{})}),null}),u.then(function(t){var r,o;return(r=i.as(e.contentNode,k.VectorContentNode))?((o=e.canonicalArtwork.bounds)?r.overrideBounds=o:(s.CoreAssert.isTrue(!1,"How do we not have canonical artwork bounds? URL:"+((n=i.opt(r.mediaMetadata,function(t){return t.sourceURL}))||null!=n?n:"unknown")),r.overrideBounds=new C.TheoRect(0,0,100,100)),r.size=r.overrideBounds.size,c.CorePromise.resolve(e)):c.CorePromise.reject("expected the icon shape to have a vector content node backing it.")})},parseSVGToPathData:function(t){var e=new D.SVGParser;return g.Host.pathUtils.parseSVGXMLData(t,e),e.createTheoPathFromParsedDom()},parseSVGTransform:function(t){var e=m.Matrix2D.Identity;if(null!=t)for(var r=i.clone(g.Host.pathUtils.matchesForRegexInString("(matrix|translate|scale|rotate|skewX|skewY)\\s*\\([^)]+\\)",t)),o=i.iter(r);!o.done;o.next()){var a=o.value,l=i.clone(g.Host.pathUtils.matchesForRegexInString("(matrix|translate|scale|rotate|skewX|skewY)",a));s.CoreAssert.isTrue(1==l.length,"unexpected number of transform type matches in one transform string");var u=l[0],c=i.clone(g.Host.pathUtils.matchesForRegexInString("\\(([^)]+)\\)",a));s.CoreAssert.isTrue(1==c.length,"unexpected number of transform args matches in one transform string");for(var h=c[0],p=[],f=i.clone(g.Host.pathUtils.matchesForRegexInString("[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?",h)),d=i.iter(f);!d.done;d.next()){var v=d.value;p.push(g.Host.pathUtils.parseStringToDouble(v))}var y=m.Matrix2D.Identity;switch(u){case"matrix":s.CoreAssert.isTrue(6==p.length,"unexpected # of arguments for matrix"),y=new m.Matrix2D(p[0],p[1],p[2],p[3],p[4],p[5]);break;case"translate":s.CoreAssert.isTrue(1==p.length||2==p.length,"unexpected # of arguments for translate"),y=m.Matrix2D.translationXY(p[0],p.length>1?p[1]:0);break;case"scale":s.CoreAssert.isTrue(1==p.length||2==p.length,"unexpected # of arguments for scale"),y=m.Matrix2D.scalingXY(p[0],p.length>1?p[1]:p[0]);break;case"rotate":s.CoreAssert.isTrue(1==p.length||3==p.length,"unexpected # of arguments for rotate");var S=p[0]*n.k_pi/180;1==p.length?y=m.Matrix2D.rotation(Math.cos(S),Math.sin(S)):3==p.length&&(y=(y=(y=m.Matrix2D.translationXY(p[1],p[2])).precat(m.Matrix2D.rotation(Math.cos(S),Math.sin(S)))).precat(m.Matrix2D.translationXY(-p[1],-p[2])));break;case"skewX":s.CoreAssert.isTrue(1==p.length,"unexpected # of arguments for skewX"),y=new m.Matrix2D(1,0,Math.tan(p[0]*n.k_pi/180),1,0,0);break;case"skewY":s.CoreAssert.isTrue(1==p.length,"unexpected # of arguments for skewY"),y=new m.Matrix2D(1,Math.tan(p[0]*n.k_pi/180),0,1,0,0);break;default:s.CoreAssert.fail("unknown SVG transform type "+u)}e=e.precat(y)}return e},parseSVGBox:function(t){if(null==t)return C.TheoRect.Zero;for(var e=[],r=i.clone(g.Host.pathUtils.matchesForRegexInString(n.kNumericRegEX,t)),o=i.iter(r);!o.done;o.next()){var a=o.value;a.length>0&&e.length<4&&e.push(g.Host.pathUtils.parseStringToDouble(a))}return 4==e.length?C.TheoRect.fromXYWH(e[0],e[1],e[2],e[3]):C.TheoRect.Zero},svgArcToPath:function(t,e,r,o,a,l,u,c){var h=m._asterisk_Matrix2D_Matrix2D(m.Matrix2D.rotation(Math.cos(-o),Math.sin(-o)),m.Matrix2D.scalingXY(1/e,1/r)),p=h.transformPoint(t),f=h.transformPoint(u),g=y.MathUtils.CircleCircleIntersection(p,1,f,1),d=a==l?g.rightCenter:g.leftCenter;if(d.isValidPoint)h=m._asterisk_Matrix2D_Matrix2D(h,m.Matrix2D.translation(b._negate_TheoPoint(d)));else{d=b._plus_TheoPoint_TheoPoint(p,f).divide(2),h=m._asterisk_Matrix2D_Matrix2D(h,m.Matrix2D.translation(b._negate_TheoPoint(d)));var v=y.MathUtils.VectorNorm(b._minus_TheoPoint_TheoPoint(p,d));s.CoreAssert.isTrue(v>=1,"unexpected value for upscale"),h=m._asterisk_Matrix2D_Matrix2D(h,m.Matrix2D.scalingXY(1/v,1/v))}p=b._minus_TheoPoint_TheoPoint(p,d),f=b._minus_TheoPoint_TheoPoint(f,d);var S=Math.atan2(p.y,p.x),T=Math.atan2(f.y,f.x);!l&&S<T&&(S+=n.k_two_pi),l&&S>T&&(S-=n.k_two_pi);var D=i.clone(y.MathUtils.ArcToBezier3(S,T,6));s.CoreAssert.isTrue(19==D.length,"unexpected number of points");for(var _=h.inverse,C=i.iter(i.stride(1,D.length-2,3));!C.done;C.next()){var k=C.value;if(_.isIdentity)c.cubicBezier(D[k].x,D[k].y,D[k+1].x,D[k+1].y,D[k+2].x,D[k+2].y);else{var P=x.TheoArbitraryPath.init_d41d();P.cubicBezier(D[k].x,D[k].y,D[k+1].x,D[k+1].y,D[k+2].x,D[k+2].y),c.addPath(P,_)}}},scanCoordinateData:function(t){for(var e=[],r=i.clone(g.Host.pathUtils.matchesForRegexInString(n.kNumericRegEX,t)),o=i.iter(r);!o.done;o.next()){var a=o.value;e.push(a)}return e},scanPathData:function(t){for(var e=[],r=i.clone(g.Host.pathUtils.matchesForRegexInString("[,\\x20\\x09\\x0D\\x0A]*[ZzHhVvMmLlTtQqSsCcAa]([,\\x20\\x09\\x0D\\x0A]*[+-]?(([0-9]*\\.[0-9]+)|([0-9]+\\.?))([eE][+-]?[0-9]+)?)*",t)),o=i.iter(r);!o.done;o.next()){var a=o.value,l=g.Host.pathUtils.firstMatchForRegexInString("[ZzHhVvMmLlTtQqSsCcAa]",a);s.CoreAssert.isTrue(1==l.length,"unexpected length for path token '"+l+"'");var u=0;switch(l){case"Z":case"z":u=0;break;case"H":case"h":case"V":case"v":u=1;break;case"M":case"m":case"L":case"l":case"T":case"t":u=2;break;case"Q":case"q":case"S":case"s":u=4;break;case"C":case"c":u=6;break;case"A":case"a":u=7;break;default:u=0}e.push(l);for(var c=u,h=i.clone(g.Host.pathUtils.matchesForRegexInString(n.kNumericRegEX,a)),p=i.iter(h);!p.done;p.next()){var f=p.value;0==c&&("M"!=l&&"m"!=l||("M"==l&&(l="L"),"m"==l&&(l="l")),c=u,e.push(l)),c-=1,e.push(f)}0!=c&&s.CoreAssert.fail("svg path type "+l+" had wrong number of arguments. Expected "+u+" but found "+(u-c))}return e},parseStyleStringToAttrDict:function(t){for(var e={},r=i.clone(t.split(";")),n=i.iter(r);!n.done;n.next()){var o=n.value.trim();if(o.length>0){var a=i.clone(o.split(":"));if(2==a.length){var s=a[0].trim(),l=a[1].trim();e[s]=l}else 0!=a.length&&i.info("unexpected number of string components - just expecting a key string and a value string")}}return e},getAttrDoubleForKey:function(t,e,r){var n=t[e];return null!=n?(n.endsWith("px")&&(n=n.substr(0,n.length-"px".length)),g.Host.pathUtils.parseStringToDouble(n)):r},getSVGEndcapType:function(t){var e,r=x.TheoPath.PATHEND_BUTT;if(null!=(e=t["stroke-linecap"]))switch(e){case"round":r=x.TheoPath.PATHEND_ROUND;break;case"square":r=x.TheoPath.PATHEND_SQUARE}return r},getSVGPathJoin:function(t){var e,r=x.TheoPath.PATHJOIN_MITER;if(null!=(e=t["stroke-linejoin"]))switch(e){case"round":r=x.TheoPath.PATHJOIN_ROUND;break;case"bevel":r=x.TheoPath.PATHJOIN_BEVEL}return r},getSVGStrokeWt:function(t){var e=0,r=t["stroke-width"];if(null!=r&&r.length>0)e=g.Host.pathUtils.parseStringToDouble(r);else{var n=t.stroke;null!=n&&n.length>0&&"none"!=n&&(e=1)}return e},getSVGSMiterLimit:function(t){var e=4,r=t["stroke-miterlimit"];return null!=r&&r.length>0&&(e=g.Host.pathUtils.parseStringToDouble(r)),e}}}),n)},56:function(t,e,r){var n,o=e,i=r(0),a=r(4),s=r(8);o.GUIDUtils=(n=function(){a.CoreObject.call(this)},i.defineClass({name:"GUIDUtils",ctor:n,superName:"CoreObject",statics:{makeGUID:function(){var t;return(t=i.opt(s.Host.resourceUtils,function(t){return t.makeGUID()}))||null!=t?t:""}}}),n)},691:function(t,e,r){var n,o=e,i=r(0),a=r(49),s=r(1),l=r(4),u=r(26),c=r(25),h=r(235),p=r(21),f=r(54),g=r(22),d=r(30),m=r(40),v=r(249),y=r(121),S=r(14),T=r(10),D=r(132),_=r(250);o.TheoDocumentAnalysisUtils=(n=function(){l.CoreObject.call(this)},i.defineClass({name:"TheoDocumentAnalysisUtils",ctor:n,superName:"CoreObject",statics:{pairwiseGroupingSelector:function(t){var e;return!((e=i.as(t.controller,S.TypeLockupController))&&e.text.length<=1)&&null!=t.controller&&t.controller.floating&&!t.isGridCell()&&t.kind!=p.ImageForma.KIND},numberOfPairwiseGroupingTests:function(t){var e=t.filterWithCallback(n.pairwiseGroupingSelector).length;return e<3?0:e},drawPairwiseGroupingTest:function(t,e){void 0===e&&(e=0),n.removeInferredStructure(t);var r=i.clone(t.filterWithCallback(n.pairwiseGroupingSelector)),o=t.page.document.uuid;if(r.length<3)return null;i.sortInPlace(r,function(t,e){var r,n;return!(!(r=t.finalFrame)||!(n=e.finalFrame))&&r.area<n.area});var a=new _.VisualStructureDetector(i.clone(r),t),s=r[e],l=s.finalFrame,u=r.concat();u.splice(e,1),i.sortInPlace(u,function(t,e){var r=i.toDouble(i.rand())/2147483647*10,n=i.toDouble(i.rand())/2147483647*10;return t.finalFrame.L1Distance(l)+r<e.finalFrame.L1Distance(l)+n});var c={};c.documentID=o,c.formaID=s.formaID,c.formaFrame=l.asString;for(var h=o.substr(0,8)+"-"+s.formaID.substr(0,8),p=i.toDouble(i.rand())/2147483647>.5,v=i.iter(i.range(0,2,!1));!v.done;v.next()){var S=v.value,T=u[p?S:1-S],D=T.finalFrame,x=t.page.createFormaWithController(d.ShapeForma.KIND,f.ShapeController.KIND);t.appendChild(x),x.intent="temp-struct-vis",m.ShapeLibrary.applyToShapeForma(x,"square_002"),x.style.colors.fieldPrimary=new g.SolidColor(0==S?1:0,0==S?0:1,0,1),x.style.opacity=.75,x.controller.fit(l.unionWith(D).outsetXY(20,20)),c["otherID-"+i.toString(S)]=T.formaID;var b=l.unionWith(D),C=a.getScoreNodeFeatures(s,T);c["features-"+i.toString(S)]=i.toString(i.clone(C.features)),c["score-"+i.toString(S)]=i.toString(C.score),c["otherFrame-"+i.toString(S)]=D.asString,c["unionFrame-"+i.toString(S)]=b.asString,h+="-"+T.formaID.substr(0,8)}for(var k=i.clone(y.TheoDocumentUtils.getMetadataEvents(t.page.document,!1,!0)),P="",A=i.iter(k);!A.done;A.next()){var I=A.value;P+=I[2]+","+I[3]+"\n"}return c.documentData=P,c.filename=h,c},visualizationDrawn:function(t){return i.clone(t.filterWithCallback(function(t){return"temp-struct-vis"==t.intent})).length>0},drawInferredStructure:function(t){if(n.visualizationDrawn(t))return"error";for(var e=i.clone(t.filterWithCallback(function(t){return null!=t.controller&&t.controller.floating&&!t.isGridCell()&&t.kind!=p.ImageForma.KIND})),r=[new _.VisualStructureDetector(i.clone(e),t).inferVisualStructure()],o="";r.length>0;){var s=r[0];r.splice(0,1);var l,c,v="";if(l=i.as(s,_.VisualNodeGroup)){for(var y=!1,x=i.iter(l.children);!x.done;x.next()){var b=x.value;i.as(b,_.VisualNodeGroup)&&(y=!0)}var C=!1;if(!y)for(var k=i.iter(l.alignments);!k.done;k.next()){var P=k.value;if(P!=a.AlignmentType.Top&&P!=a.AlignmentType.Bottom&&P!=a.AlignmentType.Bottom){C=!0;var A=t.page.createFormaWithController(d.ShapeForma.KIND,f.ShapeController.KIND);t.appendChild(A),A.intent="temp-struct-vis",m.ShapeLibrary.applyToShapeForma(A,m.ShapeLibrary.Square),A.style.colors.fieldPrimary=new g.SolidColor(1,0,0,.5);var I=s.inferenceData.frame;P==a.AlignmentType.Left&&(I=new T.TheoRect(I.minX,I.minY,I.minX+7,I.maxY)),P==a.AlignmentType.CenterX&&(I=new T.TheoRect(I.center.x-3.5,I.minY,I.center.x+3.5,I.maxY)),P==a.AlignmentType.Right&&(I=new T.TheoRect(I.maxX-7,I.minY,I.maxX,I.maxY)),A.controller.fit(I)}}if(!C||y){A=t.page.createFormaWithController(d.ShapeForma.KIND,f.ShapeController.KIND),t.appendChild(A),A.intent="temp-struct-vis",m.ShapeLibrary.applyToShapeForma(A,m.ShapeLibrary.Square);var w=new h.HSBColor(i.toDouble(i.rand())/2147483647,.5,1,.5);A.style.colors.fieldPrimary=w.asRGB,(I=i.opt(s.inferenceData,function(t){return t.frame}))&&A.controller.fit(I)}v=(I=i.opt(s.inferenceData,function(t){return t.frame}))?"G:"+l.inferenceData.frame.asIntString:"G: no frame",r=l.children.concat(r)}if(c=i.as(s,_.VisualNodeLeaf)){var M;if(M=i.as(c.forma.controller,S.TypeLockupController))v="T: "+M.text.substr(0,6);else if(i.as(c.forma.controller,f.ShapeController)&&(A=i.as(c.forma,d.ShapeForma))){var F,N;v=(F=i.opt(i.as(A.contentNode,D.URLBasedContentNode),function(t){return t.mediaMetadata}))&&null!=(N=F.searchTerm)?"S: "+N:"S: "}else v=i.as(c.forma.controller,u.FrameController)?"I: ":"???: "+c.forma.controller.kind;v+=c.forma.finalFrame.asIntString}for(var U=s.parent;null!=U;)U=i.opt(U,function(t){return t.parent}),o+="&nbsp&nbsp&nbsp";o+=v+"<br>\n"}return o},removeInferredStructure:function(t){for(var e=i.clone(t.filterWithCallback(function(t){return"temp-struct-vis"==t.intent})),r=i.iter(e);!r.done;r.next())r.value.removeFromParent()},shapeRoleTestSelector:function(t){return!t.isGridCell()&&"temp-struct-vis"!=t.intent&&(!(e=i.opt(t.parent,function(t){return t.controller}))||e.kind==c.GridController.KIND)&&!!(r=i.as(t.controller,f.ShapeController))&&r.floating;var e,r},numberOfShapeRoleTests:function(t){var e=t.filterWithCallback(n.shapeRoleTestSelector).length;return Math.min(e,10)},drawShapeRoleTest:function(t,e,r){void 0===e&&(e=0),n.removeInferredStructure(t);var o=i.clone(t.filterWithCallback(n.shapeRoleTestSelector));s.CoreAssert.isTrue(e<o.length);for(var a=r,l=o[e],u=l.finalFrame,c=v.ShapeRoleData.getShapeRoleData(l),h=i.iter(t.filterWithCallback(function(t){return null!=t.controller}));!h.done;h.next()){var p,y=h.value;y!=l&&((p=i.as(y.controller,S.TypeLockupController))?(i.opt(p.lockupStyle,function(t){return t.textOpacity=1*p.lockupStyle.textOpacity}),i.opt(p.lockupStyle,function(t){return t.backingOpacity=1*p.lockupStyle.backingOpacity})):y.style.opacity=1*y.style.opacity)}var T={};T.documentID=a,T.formaID=l.formaID,T.formaFrame=u.asString;var D=a.substr(0,8)+"-"+i.toString(e);T.filename=D;var _=t.page.createFormaWithController(d.ShapeForma.KIND,f.ShapeController.KIND);return t.appendChild(_),_.intent="temp-struct-vis",m.ShapeLibrary.applyToShapeForma(_,"square_002"),_.style.colors.fieldPrimary=new g.SolidColor(1,0,0,1),_.style.opacity=.75,_.controller.fit(u.outsetXY(20,20)),T.roleData=c.asJson,T}}}),n)}}]);
//# sourceMappingURL=logomaker-entry_7447be17-11312798.js.map