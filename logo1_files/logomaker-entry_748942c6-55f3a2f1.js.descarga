(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{362:function(t,e,o){var n=o(535),i=o(539),r=o(59),s=o(64),a=6;function c(t,e){"use strict";if(t)t=this._setData(t,e);else{var o=s.generateUuid();t={"manifest-format-version":a,id:o},this.originalManifestFormatVersion=a,this._core=new n(t,this,e),this._data=t}this._pendingElements=[]}function h(t){"use strict";var e=t["manifest-format-version"];if(e<a){if(e<4)throw new r(r.INVALID_DATA,"Encountered manifest format version "+t["manifest-format-version"]+". Format version conversion not yet implemented for that version.");e<6&&function t(e,o){"use strict";o&&e.path&&delete e.path;var n,i=e.components;if("object"==typeof i)for(n=0;n<i.length;n++){var r=i[n];"number"==typeof r.version&&(r.version=r.version.toString())}var s=e.children;if("object"==typeof s)for(n=0;n<s.length;n++){t(s[n])}}(t,!0)}}c._newBranchAsCopyOfCore=function(t){"use strict";var e=new c(JSON.parse(JSON.stringify(t._data))),o=e._core;return e._resetIdentity(function(e){var n=t.getComponentWithId(e.id);if(!n)throw new r(r.INVALID_STATE,"Could not find original component.");if("modified"===n.state||!n.etag)throw new r(r.INVALID_STATE,"Cannot create a new composite from a branch that contains modified or unbound components.");var i=n._owner.compositeAssetId;if(!i)throw new r(r.INVALID_STATE,"Cannot make a copy of component of a composite that has not been bound with an asset id. Component id ="+n.id);o._setSourceAssetInfoOfComponent({compositeAssetId:i,componentId:n.id,componentVersion:n.version,componentPath:n.absolutePath},e)}),e},Object.defineProperties(c.prototype,{compositeId:{get:function(){"use strict";return this._core.rootNode.id},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new r(r.INVALID_PARAMS,"Expecting a non-empty string.");if(e._allNodes[t])throw new r(r.DUPLICATE_VALUE,"There is already a node with the same id.");delete e._allNodes[this._data.id],this._data.id=t,e._allNodes[t]=this._core.rootNode,e._setDirty()}},rootNode:{get:function(){"use strict";return this._core.rootNode},set:function(t){"use strict";this._core.rootNode=t}},name:{get:function(){"use strict";return this._core.rootNode.name},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new r(r.INVALID_PARAMS,"Expecting a string or undefined.");e.rootNode.name=t}},type:{get:function(){"use strict";return this._core.rootNode.type},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new r(r.INVALID_PARAMS,"Expecting a non-empty string.");e.rootNode.type=t}},compositeAssetId:{get:function(){"use strict";return this._core._compositeAssetId},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new r(r.INVALID_PARAMS,"Expecting a string or undefined.");e._compositeAssetId=t}},_collaborationType:{get:function(){"use strict";return this._data.local?this._data.local.collaborationType:void 0},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");t?e._local().collaborationType=t:delete e._local().collaborationType,e._setDirty(!0)}},_clientDataString:{get:function(){"use strict";return this._data.local?this._data.local.clientDataString:void 0},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");t?e._local().clientDataString=t:delete e._local().clientDataString,e._setDirty(!0)}},manifestEtag:{get:function(){"use strict";return this._data.local?this._data.local.manifestEtag:void 0},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new r(r.INVALID_PARAMS,"Expecting a string or undefined.");e._local().manifestEtag=t,e._setDirty(!0)}},compositeState:{get:function(){"use strict";return this._data.state||"unmodified"},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new r(r.INVALID_PARAMS,"Expecting a string.");if("unmodified"!==t&&"modified"!==t&&"pendingDelete"!==t&&"committedDelete"!==t)throw new r(r.INVALID_PARAMS,'State must be "modified", "unmodified", "pendingDelete", or "committedDelete".');if("pendingDelete"===t&&"committedDelete"===t&&("pending"===this.compositeArchivalState||"archived"===this.compositeArchivalState))throw new r(r.INVALID_STATE,"Cannot delete an archived composite.");this._data.state=t,e._setDirty(!0)}},compositeArchivalState:{get:function(){"use strict";return this._core._local().archivalState||"active"},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new r(r.INVALID_PARAMS,"Expecting a string.");if("pending"!==t&&"archived"!==t&&"active"!==t)throw new r(r.INVALID_PARAMS,'State must be "pending", "archived", or undefined.');if("archived"===this.compositeArchivalState)throw new r(r.INVALID_STATE,"Composite has already been archived.");if("active"!==t&&("pendingDelete"===this.compositeState||"committedDelete"===this.compositeState))throw new r(r.INVALID_STATE,"Cannot archive a deleted composite.");"active"===t?delete this._core._local().archivalState:this._core._local().archivalState=t,e._setDirty(!0)}},isBound:{get:function(){"use strict";return this.manifestEtag&&this.compositeAssetId},set:function(){"use strict";throw new r(r.READ_ONLY,"Cannot set the property isBound. Use resetIdentity instead.")}},versionId:{get:function(){"use strict";return this._versionId},set:function(t){"use strict";if(this._core._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");this._versionId=t}},_isDirty:{get:function(){"use strict";return this._core._isDirty},set:function(t){"use strict";this._core._isDirty=t}},isDirty:{get:function(){"use strict";return this._core.isDirty},set:function(t){"use strict";this._core.isDirty=t}},localData:{get:function(){"use strict";return this._core._stringify(!1,!0)},set:function(){"use strict";throw new r(r.READ_ONLY,"Cannot set the property localData.")}},remoteData:{get:function(){"use strict";return this._core._stringify(!0)},set:function(){"use strict";throw new r(r.READ_ONLY,"Cannot set the property remoteData.")}},pendingElements:{get:function(){"use strict";return this._pendingElements},set:function(t){"use strict";throw new r(r.READ_ONLY,"Cannot set the property pendingElements.")}},changeCount:{get:function(){"use strict";return this._core.changeCount},set:function(t){"use strict";this._core.changeCount=t}},readOnly:{get:function(){"use strict";return this._core._readOnly},set:function(t){"use strict";this._core._readOnly=t}}}),c.prototype.parse=function(t){"use strict";if("string"!=typeof t)throw new r(r.INVALID_PARAMS,'Param "data" must be a string');var e=null;try{e=JSON.parse(t)}catch(t){throw new r(r.INVALID_JSON,"Manifest could not be parsed. Underlying error: "+t.message)}return this._setData(e,this._core._readOnly)},c.prototype.getElementWithId=function(t){"use strict";return this._createElement(this._core.getChildWithId(t))},c.prototype.getElementWithAbsolutePath=function(t){"use strict";return this._createElement(this._core.getChildWithAbsolutePath(t))},c.prototype.addElement=function(t,e,o,n,i,s){"use strict";if("string"!=typeof t)throw new r(r.INVALID_PARAMS,"Element must have a name of type string");if("string"!=typeof e)throw new r(r.INVALID_PARAMS,"Element must have a type of type string");if("string"!=typeof o)throw new r(r.INVALID_PARAMS,"Element must have a path of type string");var a=this._core.addChild(t,n,i,s);try{a.path=o}catch(t){throw this._core.removeChild(a),t}return a._data.type=e,this._createElement(a)},c.prototype.updateElement=function(t){"use strict";var e=this.getChildWithId(t.rootNode.id);if(!e)throw new r(r.INVALID_PARAMS,"Element does not exist in branch.");var o=this._core.replaceChild(t.rootNode,e.path);return this._deleteElement(t),o},c.prototype.abandonElement=function(t){"use strict";this._deleteElement(t)},c.prototype.getChildWithId=function(t){"use strict";return this._core.getChildWithId(t)},c.prototype.getChildWithAbsolutePath=function(t){"use strict";return this._core.getChildWithAbsolutePath(t)},c.prototype.getChildrenOf=function(t){"use strict";return this._core.getChildrenOf(t)},c.prototype.addChild=function(t,e,o,n){"use strict";return this._core.addChild(t,e,o,n)},c.prototype.removeChild=function(t){"use strict";return this._core.removeChild(t)},c.prototype.moveChild=function(t,e,o){"use strict";return this._core.moveChild(t,e,o)},c.prototype.copyChild=function(t,e,o,n,i,r){"use strict";return this._core.copyChild(t,e,o,n,i,r)},c.prototype.replaceChild=function(t,e,o,n){"use strict";return this._core.replaceChild(t,e,o,n)},c.prototype.allComponents=function(){"use strict";return this._core.allComponents()},c.prototype.getComponentWithId=function(t){"use strict";return this._core.getComponentWithId(t)},c.prototype.getComponentWithAbsolutePath=function(t){"use strict";return this._core.getComponentWithAbsolutePath(t)},c.prototype.getComponentsOf=function(t){"use strict";return this._core.getComponentsOf(t)},c.prototype.addComponentWithUploadResults=function(t,e,o,n,i){"use strict";return this._core.addComponentWithUploadResults(t,e,o,n,i)},c.prototype.updateComponentWithUploadResults=function(t,e){"use strict";return this._core.updateComponentWithUploadResults(t,e)},c.prototype.removeComponent=function(t){"use strict";return this._core.removeComponent(t)},c.prototype.moveComponent=function(t,e){"use strict";return this._core.moveComponent(t,e)},c.prototype.copyComponent=function(t,e,o,n,i){"use strict";return this._core.copyComponent(t,e,o,n,i)},c.prototype.replaceComponent=function(t,e,o,n){"use strict";return this._core.replaceComponent(t,e,o,n)},c.prototype.copy=function(){"use strict";var t=new c(JSON.parse(JSON.stringify(this._data)));if(t._core._compositeAssetId=this._core._compositeAssetId,this._core._sourceAssetInfoLookup){var e=JSON.stringify(this._core._sourceAssetInfoLookup);t._core._sourceAssetInfoLookup=JSON.parse(e)}return t},c.prototype._createElement=function(t){"use strict";var e;if(t){var o=JSON.parse(JSON.stringify(t._data));o["manifest-format-version"]=this._data["manifest-format-version"],delete o.path,e=new i(o,this,this._core._readOnly)}return e&&this._pendingElements.push(e),e},c.prototype._deleteElement=function(t){"use strict";var e=this._pendingElements.indexOf(t);if(e<0)throw new r(r.INVALID_PARAMS,"Unknown element.");this._pendingElements.splice(e,1)},c.prototype._verify=function(t){"use strict";return"string"!=typeof t.id?new r(r.INVALID_DATA,"Manifest is missing an id of type string"):"string"!=typeof t.name?new r(r.INVALID_DATA,"Manifest is missing a name of type string"):"string"!=typeof t.type?new r(r.INVALID_DATA,"Manifest is missing a type of type string"):"number"!=typeof t["manifest-format-version"]?new r(r.INVALID_DATA,"Manifest is missing a manifest-format-version of type number"):null},c.prototype._setData=function(t,e){"use strict";this.originalManifestFormatVersion=t["manifest-format-version"],h(t),t.local&&(t.local.version=2);var o=this._verify(t);if(null===o)return t["manifest-format-version"]=a,this._core=new n(t,this,e),this._data=t,this;throw o},c.prototype._reset=function(t,e){"use strict";if(this._readOnly)throw new r(r.READ_ONLY,"This object is read-only.");this._data.local&&(delete this._data.local.manifestEtag,delete this._core._compositeAssetId),t||(this._data.id=s.generateUuid()),this._data.state="modified",this._core._recursiveReset(this._data,e),this._core._setDirty()},c.prototype._resetBinding=function(t){"use strict";this._reset(!0,t)},c.prototype._resetIdentity=function(t){"use strict";this._reset(!1,t)},c.prototype._local=function(){"use strict";return this._core._local()},c.prototype._setDirty=function(t){"use strict";this._core._setDirty(t)},c.prototype._setPathOfNode=function(t,e){"use strict";this._core._setPathOfNode(t,e)},c.prototype._verifyIntegrity=function(t,e,o){"use strict";return this._core._verifyIntegrity(t,e,o)},t.exports=c},535:function(t,e,o){var n=o(59),i=o(536),r=o(363),s=o(64);function a(t,e,o){"use strict";this._readOnly=o,this._owner=e,this._setData(t)}function c(t,e,o,i,r,a,c){"use strict";var h=e._owner._core,d=t._owner._core,u=o&&t.id===e.id,l=d._getSourceAssetInfoOfComponent(t),p=h.getComponentWithId(e.id),_=i&&(!p||!p.etag)&&"unmodified"===t.state,f=!u&&!l,m=f;if(r&&!p&&(l||f)&&t.id===e.id&&(e._data.id=s.generateUuid(),e.state="modified",e.etag=void 0,e.version=void 0,e.md5=void 0,e.length=void 0),f){if(_&&t._owner.compositeAssetId)l={compositeAssetId:t._owner.compositeAssetId,componentId:t.id,componentVersion:t.version,componentPath:t.absolutePath},h._setSourceAssetInfoOfComponent(l,e);else if(m)throw new n(n.INVALID_STATE,"Could not use server-to-server copy for component "+t.id)}else h._setSourceAssetInfoOfComponent(l,e,a);l&&(e.state="modified")}Object.defineProperties(a.prototype,{rootNode:{get:function(){"use strict";return this.getChildWithAbsolutePath(i.ROOT_PATH)},set:function(t){"use strict";throw new n(n.READ_ONLY,'Property "rootNode" is read-only.')}},isDirty:{get:function(){"use strict";return this._isDirty},set:function(){"use strict";throw new n(n.READ_ONLY,"Cannot set the property isDirty.")}},changeCount:{get:function(){"use strict";return this._data.local&&this._data.local.change||0},set:function(){"use strict";throw new n(n.READ_ONLY,"Cannot set the property changeCount.")}}}),a.prototype.getChildWithId=function(t){"use strict";return this._allNodes[t]},a.prototype.getChildWithAbsolutePath=function(t){"use strict";var e=this._absolutePaths[t.toLowerCase()];return e&&e instanceof i?e:void 0},a.prototype.getChildrenOf=function(t){"use strict";if(!(t=t?this._allNodes[t.id]:this.rootNode))throw new n(n.INVALID_PARAMS,"Unknown node");var e,o=[],i=t._data.children;if(Array.isArray(i))for(e=0;e<i.length;e++){var r=i[e],s=this._allNodes[r.id];if(!s)throw new n(n.INVALID_DATA,"Node not in cache");o[o.length]=s}return o},a.prototype.addChild=function(t,e,o,r){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(e=e||s.generateUuid(),this._allNodes[e])throw new n(n.DUPLICATE_VALUE,"Node already exists in branch.");if(o&&("number"!=typeof o||o%1!=0))throw new n(n.INVALID_PARAMS,'Param "index" must be an integer.');var a=r?this._allNodes[r.id]:this.rootNode;if(!a)throw new n(n.INVALID_PARAMS,"Unknown parent node.");var c=new i;c.id=e,t&&(c.name=t),c._parentPath=a.absolutePath||a._parentPath;var h=a._data.children;return h?(o>=0&&o<=h.length||(o=h.length),o===h.length?h[o]=c._data:h.splice(o,0,c._data)):a._data.children=[c._data],this._allNodes[c.id]=c,c._owner=this._owner,this._setDirty(),c},a.prototype.removeChild=function(t){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "node".');if(t.isRoot)throw new n(n.INVALID_PARAMS,"Cannot remove the root node.");var e=t.id;if(!e)throw new n(n.INVALID_PARAMS,'Param "node" must have an id.');var o=this._nodeDataOfParentOfNode(t);if(!o)throw new n(n.INVALID_PARAMS,"Node not found in this branch.");return o.parentNodeData.children.splice(o.index,1),0===o.parentNodeData.children.length&&delete o.parentNodeData.children,t=this._allNodes[e],this._removeNodeFromCachesRecursively(t._data),this._setDirty(),t},a.prototype.moveChild=function(t,e,o){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "node".');if(t.isRoot)throw new n(n.INVALID_PARAMS,"Cannot move the root node.");if(e&&("number"!=typeof e||e%1!=0))throw new n(n.INVALID_PARAMS,'Param "index" must be an integer.');var i=t.id;if(!i)throw new n(n.INVALID_PARAMS,'Param "node" must have an id.');var r=this._nodeDataOfParentOfNode(t);if(t=this._allNodes[i],!r)throw new n(n.INVALID_PARAMS,"Node not found in this branch.");var s=o?this._allNodes[o.id]:this.rootNode;if(!s)throw new n(n.INVALID_PARAMS,"Unknown parent node.");if(this._nodeIdIsDescendantOf(s.id,t._data))throw new n(n.INVALID_PARAMS,"Must not create a cycle.");var a=r.parentNodeData.children.splice(r.index,1)[0];try{var c=s._data.children;c?(e>=0&&e<=c.length||(e=c.length),e===c.length?c[e]=a:c.splice(e,0,a)):s._data.children=[a]}catch(t){throw r.parentNodeData.children.splice(r.index,0,a),t}return 0===r.parentNodeData.children.length&&delete r.parentNodeData.children,this._setDirty(),this._allNodes[i]},a.prototype.copyChild=function(t,e,o,n,i,r){"use strict";return this._copyChild(t,e,o,n,i,!1,r)},a.prototype.replaceChild=function(t,e,o,n){"use strict";return this._copyChild(t,void 0,void 0,e,o||t.id,!0,n)},a.prototype.allComponents=function(){"use strict";var t,e=[];for(t in this._allComponents)this._allComponents.hasOwnProperty(t)&&e.push(this._allComponents[t]);return e},a.prototype.getComponentWithId=function(t){"use strict";return this._allComponents[t]},a.prototype.getComponentWithAbsolutePath=function(t){"use strict";var e=this._absolutePaths[t.toLowerCase()];return e&&e instanceof r?e:void 0},a.prototype.getComponentsOf=function(t){"use strict";if(!(t=t?this._allNodes[t.id]:this.rootNode))throw new n(n.INVALID_PARAMS,"Unknown node");var e,o=[],i=t._data.components;if(Array.isArray(i))for(e=0;e<i.length;e++){var r=i[e],s=this._allComponents[r.id];if(!s)throw new n(n.INVALID_DATA,"Component not in cache");o[o.length]=s}return o},a.prototype.addComponentWithUploadResults=function(t,e,o,i,s){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(s.compositeId!==this._owner.compositeId)throw new n(n.INVALID_PARAMS,"Param uploadResults does not appear valid to be for this composite.");var a=Object.keys(s.records);if(1!==a.length)throw new n(n.INVALID_PARAMS,"Param uploadResults must contain records of exactly one component upload.");var c=s.records[a[0]],h=c.id;if(this._allComponents[h])throw new n(n.DUPLICATE_VALUE,"Duplicate component id: "+h);var d=i?this._allNodes[i.id]:this.rootNode;if(!d)throw new n(n.INVALID_PARAMS,"Unknown parent node.");var u=new r;u.id=h,u.name=t,u.type=c.type,u.relationship=e,u.path=o,u.state="unmodified",u.etag=c.etag,u.length=c.length,u.version=c.version,u.md5=c.md5;var l=this._normalizedAbsolutePathForItem(u,d);if(this._absolutePaths[l])throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+l);u._parentPath=d.absolutePath||d._parentPath;var p=d._data.components;return p?p.push(u._data):d._data.components=[u._data],u._owner=this._owner,this._allComponents[h]=u,this._absolutePaths[l]=u,this._setDirty(),u},a.prototype.updateComponentWithUploadResults=function(t,e){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(!(t=this._allComponents[t.id]))throw new n(n.INVALID_PARAMS,"Unknown component.");if(e.compositeId!==this._owner.compositeId)throw new n(n.INVALID_PARAMS,"Param uploadResults does not appear valid to be for this composite.");var o=e.records[t.id];if(!o)throw new n(n.INVALID_PARAMS,"Param uploadResults does not contain an upload record for the given component.");return t.etag=o.etag,t.version=o.version,t.md5=o.md5,t.length=o.length,this._setSourceAssetInfoOfComponent(void 0,t),t.state="unmodified",this._setDirty(),t},a.prototype.removeComponent=function(t){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "component".');var e=t.id;if(!e)throw new n(n.INVALID_PARAMS,'Param "component" must have an id.');var o=this._nodeDataOfParentOfComponent(t);if(!o)throw new n(n.INVALID_PARAMS,"Component not found in this branch.");return o.parentNodeData.components.splice(o.index,1),0===o.parentNodeData.components.length&&delete o.parentNodeData.components,t=this._allComponents[e],delete this._allComponents[e],delete this._absolutePaths[this._normalizedAbsolutePathForItem(t)],t._owner=void 0,t._parentPath="",this._setDirty(),t},a.prototype.moveComponent=function(t,e){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "component".');var o=t.id;if(!o)throw new n(n.INVALID_PARAMS,'Param "component" must have an id.');var i=this._nodeDataOfParentOfComponent(t);if(!i)throw new n(n.INVALID_PARAMS,"Component not found in this branch.");var r=e?this._allNodes[e.id]:this.rootNode;if(!r)throw new n(n.INVALID_PARAMS,"Unknown parent node.");var s=this._normalizedAbsolutePathForItem(t,r);if(this._absolutePaths[s])throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+s);var a=i.parentNodeData.components.splice(i.index,1)[0],c=r._data.components;return c?c.push(a):r._data.components=[a],0===i.parentNodeData.components.length&&delete i.parentNodeData.components,t=this._allComponents[o],delete this._absolutePaths[this._normalizedAbsolutePathForItem(t)],t._parentPath=r.absolutePath||r._parentPath,this._absolutePaths[s]=t,this._setDirty(),t},a.prototype.copyComponent=function(t,e,o,n,i){"use strict";return this._copyComponent(t,e,o,n,!1,i)},a.prototype.replaceComponent=function(t,e,o,n){"use strict";return this._copyComponent(t,void 0,e,o||t.id,!0,n)},a.prototype._getHrefOfComponent=function(t){"use strict";var e,o=this._getBranchOf(t).compositeHref;return o&&void 0!==t.version&&(e=s.appendPathElements(o,t.id),e+=";version="+t.version),e},a.prototype._setSourceAssetInfoOfComponent=function(t,e){"use strict";var o=e.id,n=this._sourceAssetInfoLookup;n||(n=this._sourceAssetInfoLookup={}),t?n[o]=t:n[o]&&delete n[o]},a.prototype._getSourceAssetInfoOfComponent=function(t){"use strict";var e=t.id,o=this._sourceAssetInfoLookup;if(o)return o[e]},a.prototype._copySourceHrefsFrom=function(t){"use strict";var e=t._sourceAssetInfoLookup,o=this.allComponents(),n=o.length;if(n&&e){var i,r=this._sourceAssetInfoLookup;for(r||(r=this._sourceAssetInfoLookup={}),i=0;i<n;i++){var s=o[i].id;r[s]=e[s]}}},a.prototype._getBranchOf=function(t){"use strict";return t._owner?this._getBranchOf(t._owner):t},a.prototype._isSameComposite=function(t){"use strict";var e=this._getBranchOf(this),o=this._getBranchOf(t);return e._data.id===o._data.id&&e.compositeAssetId===o.compositeAssetId},a.prototype._stringify=function(t,e){"use strict";if(t){var o=this._data.local,n=null;try{delete this._data.local,n=JSON.stringify(this._data,void 0,e?2:void 0)}catch(t){throw t}finally{o&&(this._data.local=o)}return n}return JSON.stringify(this._data,void 0,e?2:void 0)},a.prototype._setData=function(t){"use strict";var e=new i(t,this._readOnly,!0);e._owner=this._owner,e._parentPath="";var o=e.id,a={},c={},h={};c[o]=e,h[i.ROOT_PATH]=e;var d=this,u=function(t,e){var o,l,p,_=t.components;if(Array.isArray(_))for(o=0;o<_.length;o++){var f=_[o],m=new r(f,d._readOnly);if(a[m.id])throw new n(n.INVALID_DATA,"Duplicate component id: "+m.id);if(m._owner=d._owner,m._parentPath=e,p=d._normalizedAbsolutePathForItem(m),h[p])throw new n(n.INVALID_DATA,"Duplicate absolute path: "+p);if(!s.isValidAbsolutePath(p))throw new n(n.INVALID_DATA,"Invalid absolute component path: "+p);a[m.id]=m,h[p]=m}var A=t.children;if(Array.isArray(A))for(o=0;o<A.length;o++){var w=A[o],y=new i(w,d._readOnly);if(c[y.id])throw new n(n.INVALID_DATA,"Duplicate node id: "+y.id);if(l=y.path,y._owner=d._owner,y._parentPath=e,l){if(p=d._normalizedAbsolutePathForItem(y),h[p])throw new n(n.INVALID_DATA,"Duplicate absolute path: "+p);if(!s.isValidAbsolutePath(p))throw new n(n.INVALID_DATA,"Invalid node absolute path: "+p);h[p]=y}c[y.id]=y,u(w,y.path?s.appendPathElements(e,y.path):e)}};return u(t,i.ROOT_PATH),this._data=t,this._allComponents=a,this._allNodes=c,this._absolutePaths=h,this._isDirty=!1,this},a.prototype._removeNodeFromCachesRecursively=function(t){"use strict";var e,o=t.components;if(Array.isArray(o))for(e=0;e<o.length;e++){var n=o[e].id,i=this._allComponents[n];delete this._allComponents[n],delete this._absolutePaths[this._normalizedAbsolutePathForItem(i)],i._owner=void 0}var r=t.children;if(Array.isArray(r))for(e=0;e<r.length;e++)this._removeNodeFromCachesRecursively(r[e]);var s=t.id,a=this._allNodes[s];delete this._allNodes[s],a.path&&delete this._absolutePaths[this._normalizedAbsolutePathForItem(a)],a._owner=void 0},a.prototype._local=function(){"use strict";return this._data.local||(this._data.local={version:2}),this._data.local},a.prototype._recursiveReset=function(t,e){"use strict";var o,n=t.components;if(n)for(o=n.length-1;o>=0;o--){var i=n[o];"committedDelete"===i.state?(delete n[o],delete this._allComponents[i.id],delete i._owner,this._setSourceAssetInfoOfComponent(void 0,i)):(delete i.etag,delete i.version,delete i.length,delete i.md5,i.state="modified",e&&e(i))}var r=t.children;if(r)for(o=0;o<r.length;o++)this._recursiveReset(r[o],e)},a.prototype._nodeIdIsDescendantOf=function(t,e){"use strict";var o,n=e.children;if(n)for(o=0;o<n.length;o++){var i=n[o];if(i.id===t||this._nodeIdIsDescendantOf(t,i))return!0}return!1},a.prototype._recursivelyGetAllComponentsOfChild=function(t,e){"use strict";e=e||[];var o,n,i=t._data||t,r=i.components;if(r)for(n=r.length,o=0;o<n;o++)e[e.length]=this._allComponents[r[o].id];var s=i.children;if(s)for(n=s.length,o=0;o<n;o++)e=this._recursivelyGetAllComponentsOfChild(s[o],e);return e},a.prototype._nodeDataOfParentOfNode=function(t,e){"use strict";e=e||this._data;var o,n=t._data.id,i=e.children;if(i)for(o=0;o<i.length;o++){var r=i[o];if(r.id===n)return{parentNodeData:e,index:o};var s=this._nodeDataOfParentOfNode(t,r);if(s)return s}return null},a.prototype._nodeDataOfParentOfComponent=function(t,e){"use strict";e=e||this._data;var o,n=t._data.id,i=e.components;if(i)for(o=0;o<i.length;o++){if(i[o].id===n)return{parentNodeData:e,index:o}}var r=e.children;if(r)for(o=0;o<r.length;o++){var s=r[o],a=this._nodeDataOfParentOfComponent(t,s);if(a)return a}return null},a.prototype._determineAbsolutePathChangesRecursively=function(t,e,o){"use strict";var n,i=t.components;if(i)for(n=0;n<i.length;n++){var r=i[n],a=this._allComponents[r.id];o.push({item:a,parentPath:e,absPath:s.appendPathElements(e,r.path)})}var c=t.children;if(c)for(n=0;n<c.length;n++){var h=c[n],d=this._allNodes[h.id],u=h.path,l=u?s.appendPathElements(e,u):e;o.push({item:d,parentPath:e,absPath:u?l:void 0}),this._determineAbsolutePathChangesRecursively(h,l,o)}},a.prototype._setPathOfNode=function(t,e){"use strict";var o=e?s.appendPathElements(t.parentPath,e):t.parentPath,i=[{item:t,absPath:e?o:void 0}];this._determineAbsolutePathChangesRecursively(t._data,o,i);var r,a,c=s.flatCopy(this._absolutePaths);for(r=0;r<i.length;r++){var h=i[r].item;h._data.path&&delete c[this._normalizedAbsolutePathForItem(h)]}for(r=0;r<i.length;r++)if((a=i[r]).absPath){var d=a.absPath.toLowerCase();if(c[d])throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+d);if(!s.isValidAbsolutePath(d))throw new n(n.INVALID_PARAMS,"Invalid absolute path: "+d);c[d]=a.item}for(r=0;r<i.length;r++)(a=i[r]).parentPath&&(a.item._parentPath=a.parentPath);t._data.path=e,this._absolutePaths=c},a.prototype._setPathOfComponent=function(t,e){"use strict";if(!this._allComponents[t.id])throw new n(n.INVALID_PARAMS,"Unknown component.");var o=s.appendPathElements(t.parentPath,e).toLowerCase();if(this._absolutePaths[o])throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path for component: "+o);if(!s.isValidAbsolutePath(o))throw new n(n.INVALID_PARAMS,"Invalid absolute path: "+o);delete this._absolutePaths[this._normalizedAbsolutePathForItem(t)],this._absolutePaths[o]=t,t._data.path=e},a.prototype._setDirty=function(t){"use strict";if(!t){if("pending"===this._local().archivalState||"archived"===this._local().archivalState)throw new n(n.INVALID_STATE,"Cannot modify an archived composite.");"pendingDelete"!==this._data.state&&"committedDelete"!==this._data.state||console.log("Modifying deleted composite")}this._isDirty=!0,this._local().change=this.changeCount+1,t||"unmodified"!==this._data.state&&this._data.state||(this._data.state="modified")},a.prototype._normalizedAbsolutePathForItem=function(t,e){"use strict";return(e?s.appendPathElements(e.absolutePath||e._parentPath,t.path):t.absolutePath).toLowerCase()},a.prototype._hasSameEndpoint=function(t){"use strict";return!0},a.prototype._copyComponent=function(t,e,o,i,r,s){"use strict";if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "component".');if(s&&"function"!=typeof s)throw new n(n.INVALID_PARAMS,"Param callback must be a function.");var a=t._owner._core,h=this._isSameComposite(a),d=h||this._hasSameEndpoint(t);a._local();if(!d)throw new n(n.INVALID_PARAMS,"Cannot copy between two different endpoints.");var u=function(t,e,o){c(t,e,h,d,!i,o)};if(!s)return this._copyComponentModel(t,e,r,o,i,u);try{s(void 0,this._copyComponentModel(t,e,r,o,i,u))}catch(t){s(t)}},a.prototype._copyComponentModel=function(t,e,o,i,a,c){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "component".');var h=t._owner,d=new r(JSON.parse(JSON.stringify(t._data)));i?(d.path=i,d.id=a||s.generateUuid()):a&&(d.id=a),d._owner=this._owner,t.id===d.id&&this._isSameComposite(h._core)||(d.state="modified",d.etag=void 0,d.version=void 0,d.md5=void 0,d.length=void 0);var u,l,p=this._allComponents[d.id];if(p&&!o)throw new n(n.DUPLICATE_VALUE,"Component already exists.");if(o&&!p)throw new n(n.INVALID_PARAMS,"Could not find existing component.");if(o){var _=this._nodeDataOfParentOfComponent(p);if(!_)throw new n(n.INVALID_PARAMS,"Parent node of existing component not found in this branch.");var f=_.parentNodeData.id;if(!(l=this._allNodes[f]))throw new n(n.INVALID_STATE,"Unknown parent node.");u=_.index}else if(!(l=e?this._allNodes[e.id]:this.rootNode))throw new n(n.INVALID_PARAMS,"Unknown parent node.");d._parentPath=l.absolutePath||l._parentPath;var m=this._normalizedAbsolutePathForItem(d),A=this._absolutePaths[m];if(A&&A!==p)throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+m);if(!s.isValidAbsolutePath(m))throw new n(n.INVALID_PARAMS,"Component path must be a valid path for a component.");var w=this._local();c&&c(t,d,w=s.deepCopy(w));var y=l._data.components;return o?y[u]=d._data:y?y.push(d._data):l._data.components=[d._data],this._data.local=w,this._allComponents[d.id]=d,this._absolutePaths[m]=d,this._setDirty(),d},a.prototype._copyChild=function(t,e,o,i,r,s,a){"use strict";if(!t)throw new n(n.INVALID_PARAMS,'Expecting param "node".');var h=t._owner._core,d=this._isSameComposite(h),u=d||this._hasSameEndpoint(t);h._local();if(h._recursivelyGetAllComponentsOfChild(t).length>0&&!u)throw new n(n.INVALID_PARAMS,"Cannot copy components between two different endpoints.");var l=function(t,e,o){c(t,e,d,u,!0,o)};if(!a)return this._copyChildModel(t,e,o,s,i,r,l);try{a(void 0,this._copyChildModel(t,e,o,s,i,r,l))}catch(t){a(t)}},a.prototype._copyChildModel=function(t,e,o,a,c,h,d){"use strict";if(this._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");var u=t._owner,l=new i(JSON.parse(JSON.stringify(t._data)));c?(l.path=c,l.id=h||s.generateUuid()):h&&(l.id=h),l._owner=this._owner,t.isRoot&&(delete l._data.local,delete l._data["manifest-format-version"]);var p,_=this._allNodes[l.id];if(_&&!a)throw new n(n.DUPLICATE_VALUE,"Child node already exists.");if(a&&!_)throw new n(n.INVALID_PARAMS,"Could not find existing node to replace.");if(a){var f=this._nodeDataOfParentOfNode(_);if(!f)throw new n(n.INVALID_PARAMS,"Parent of existing node not found in this branch.");var m=f.parentNodeData.id;if(!(p=this._allNodes[m]))throw new n(n.INVALID_STATE,"Unknown parent node.");o=f.index}else if(!(p=e?this._allNodes[e.id]:this.rootNode))throw new n(n.INVALID_PARAMS,"Unknown parent node.");if(l._parentPath=p.absolutePath||p._parentPath,l.path){var A=this._normalizedAbsolutePathForItem(l),w=this._absolutePaths[A];if(w&&w!==_)throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+A);if(!s.isValidAbsolutePath(A))throw new n(n.INVALID_PARAMS,"Node path must be a valid path for a node.")}var y=s.flatCopy(this._allNodes),v=s.flatCopy(this._allComponents),I=s.flatCopy(this._absolutePaths),g=s.deepCopy(this._local()),P=function(t,e,o,n,i,r){var s,a;delete o[t.id],t.path&&delete i[e._normalizedAbsolutePathForItem(t)];var c=t._data.children;if(c)for(a=c.length,s=0;s<a;s++)P(o[c[s].id],e,o,n,i,r);var h=t._data.components;if(h)for(a=h.length,s=0;s<a;s++){var d=n[h[s].id];delete n[d.id],delete i[e._normalizedAbsolutePathForItem(d)]}};_&&P(_,this,y,v,I,g);var C=function(t,e,o,a,c,h,l){if(o[t.id])throw new n(n.DUPLICATE_VALUE,"Duplicate node id: "+t.id);var p;if(o[t.id]=t,t.path){if(c[p=e._core._normalizedAbsolutePathForItem(t)])throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+p);c[p]=t}var _,f,m=t._data.children;if(m)for(f=m.length,_=0;_<f;_++){var A=new i(m[_]);o[A.id]&&(A.id=s.generateUuid()),A._owner=e,A._parentPath=t.absolutePath||t._parentPath,C(A,e,o,a,c,h,l)}var w=t._data.components;if(w)for(f=w.length,_=0;_<f;_++){var y=new r(w[_]),v=y.id;if(a[v]&&(y.id=s.generateUuid(),y.state="modified",y.etag=void 0,y.version=void 0,y.md5=void 0,y.length=void 0),y._owner=e,y._parentPath=t.absolutePath||t._parentPath,d&&d(u.getComponentWithId(v),y,h),a[y.id])throw new n(n.DUPLICATE_VALUE,"Duplicate component id: "+y.id);if(a[y.id]=y,c[p=e._core._normalizedAbsolutePathForItem(y)])throw new n(n.DUPLICATE_VALUE,"Duplicate absolute path: "+p);c[p]=y}};if(C(l,this._owner,y,v,I,g,u._local()),a)p._data.children[o]=l._data;else{var D=p._data.children;D?(o>=0&&o<=D.length||(o=D.length),o===D.length?D[o]=l._data:D.splice(o,0,l._data)):p._data.children=[l._data]}return this._allNodes=y,this._allComponents=v,this._absolutePaths=I,this._data.local=g,this._setDirty(),l},a.prototype._verifyIntegrity=function(t,e,o){"use strict";var r,a=this,c=[],h=!1,d=function(t){return c.push(new n(n.INVALID_STATE,t)),e&&(h||(e("Branch for composite "+a.rootNode.id+" has the following errors:"),h=!0),e("   "+t)),!1},u=function(t,e){return!!t||d(e)},l=[],p=function(t){(l.indexOf(t)<0||d("Item "+t.id+" encountered more than once"))&&l.push(t)},_=s.flatCopy(this._allComponents),f=s.flatCopy(this._allNodes),m=s.flatCopy(this._absolutePaths),A=Object.keys(m),w=A.length;for(r=0;r<w;r++){var y=A[r];u("/"===y.charAt(0),"Absolute path "+y+" does not start with a slash.")}var v=function(t,e){var o,n,i=t.children;if(i)for(o=0;o<i.length;o++){var r=i[o],c=f[r.id];(c||d("Node "+r.id+" is not in cache."))&&(p(c),u(c._data===r,"Node "+c.id+" _data property incorrect."),delete f[c.id],c.path&&c._owner&&(n=a._normalizedAbsolutePathForItem(c),(m[n]||d("Absolute path of node "+c.id+" ("+n+") is not in cache."))&&delete m[n]),u(c._parentPath===e,"Parent path of node "+c.id+" should be "+e+" but is "+c._parentPath),u(c._owner===a._owner,"Node "+c.id+" _owner property is not correct.")),v(r,r.path?s.appendPathElements(e,r.path):e)}var h=t.components;if(h)for(o=0;o<h.length;o++){var l=h[o],A=_[l.id];(A||d("Component "+l.id+" is not in cache."))&&(p(A),u(A._data===l,"Component "+A.id+" _data property incorrect."),delete _[A.id],A._owner&&(n=a._normalizedAbsolutePathForItem(A),(m[n]||d("Absolute path "+n+" is not in cache."))&&delete m[n]),u(A._parentPath===e,"Parent path of component "+A.id+" should be "+e+" but is "+A._parentPath),u(A._owner===a._owner,"Component "+A.id+" _owner property is not correct."))}},I=m[i.ROOT_PATH];u(I,"Cannot find root node via path")&&(u(I.id===this._data.id,"Root node has correct id"),u(I.path===i.ROOT_PATH,"Root node has correct path"),u(""===I._parentPath,"Root node has correct parent path"),u(I._owner===this._owner,"Root node has correct owner"),u(I._data===this._data,"Root node has correct data"),u(f[I.id]===I,"Cannot find root node via id")&&delete f[I.id],delete m[i.ROOT_PATH]),v(this._data,i.ROOT_PATH);var g=Object.keys(_);for(r=0;r<g.length;r++)d("Component "+g[r]+" is in cache but could not be found.");for(g=Object.keys(f),r=0;r<g.length;r++)d("Node "+g[r]+" is in cache but could not be found.");for(g=Object.keys(m),r=0;r<g.length;r++)d("Absolute path "+g[r]+" is in cache but could not be found.");return c.length?c:null},t.exports=a},65:function(t,e,o){var n=o(361),i=o(540),r=o(739),s=o(741),a=o(742),c=o(64),h=o(59),d=o(362),u=o(536),l=o(363),p=o(539),_=o(552),f=o(743),m=o(744),A=o(745);function w(t){"use strict";this._compositeOptions=c.merge({},t),t&&t.logCallback&&c._setLogCallback(t.logCallback)}w.COLLABORATION={PRIVATE:n.COLLABORATION.PRIVATE,SHARED_BY_USER:n.COLLABORATION.SHARED_BY_USER,SHARED_WITH_USER:n.COLLABORATION.SHARED_WITH_USER},w.AdobeDCXError=h,w.StreamProvider=i.StreamProvider,w.prototype.newEmptyComposite=function(t,e,o){"use strict";return new n(t,e,o,null,this._compositeOptions)},w.prototype.newCompositeWithAssetId=function(t,e,o,i){"use strict";return new n(e,i,o,t,this._compositeOptions)},w.prototype.newCompositeWithLinks=function(t,e,o,i){"use strict";var r=new n(e,i,o,null,this._compositeOptions);return r._links=t,r},w.prototype.newCompositeAsCopyOf=function(t,e,o,i){"use strict";return n.newCompositeAsCopyOf(t,e,o,i,this._compositeOptions)},w.prototype.createHTTPService=function(t){"use strict";return new i(t)},w.prototype.createStorageSession=function(t,e){"use strict";return new r(t,e)},w.prototype.createCommunitySession=function(t,e){"use strict";return new s(t,e)},w.prototype.createRemixData=function(){"use strict";return new f},w.prototype.createCommunityPublicationRecord=function(){"use strict";return new m},w.prototype.compositeXfer=a,w.prototype.communityPlatform=A,w._test={AdobeDCXComposite:n,AdobeDCXBranch:d,AdobeDCXElement:p,AdobeDCXNode:u,AdobeDCXComponent:l,AdobeDCXComposite:n,AdobeDCXCompositeXfer:a,AdobeDCXPushJournal:_,AdobeDCXUtil:c,AdobeRemixData:f,AdobeCommunityPublicationRecord:m,AdobeCommunityPlatform:A},t.exports=w},726:function(t,e){},728:function(t,e){},741:function(t,e,o){var n=o(550),i=o(59),r=o(64),s=i.networkError,a=i.unexpectedResponse,c=r.appendPathElements;function h(t,e){"use strict";if(n.call(this,t,e),!this._endPoint)throw new i(i.INVALID_PARAMS,"Could not determine endpoint from: "+e);this.authenticationWhitelist=["adobe.com","adobe.io","fotolia.net"]}h.prototype=Object.create(n.prototype),h.prototype.name="AdobeCommunitySession",h.StreamProvider=n.StreamProvider,h.prototype.publishCompositeAtResource=function(t,e,o){"use strict";var n="/api/v2/"+e.communityId+"/assets";n=this._resolveUrl(n);var r={resource_path:this.assetIdFromSSResourceHref(e.resourcePath),resource_type:t,metadata:this.metadataFromPubRecord(e)};this._service.invoke("POST",n,{"Content-Type":"application/json"},JSON.stringify(r),void 0,function(t,n){if(t)return o(s("Error publishing composite",t,n));var r;if(201===n.statusCode){var c=n.headers.location;if(!c)return(t=new i(i.INVALID_DATA,"Missing location header returned on response by server",void 0)).response=n,o(a("Unexpected response publishing composite",t,n));var h=(r=c.match("^.*?\\/api\\/v2\\/([^/]*)/assets\\/([^\\/]*).*$"))?r[2]:null;if(h)return e.assetId=h,o(void 0,c)}return o(a("Unexpected response publishing composite",t,n))})},h.prototype.updateCpMetadataAtResource=function(t,e,o){"use strict";var n="/api/v2/"+e.communityId+"/assets/"+e.assetId;n=this._resolveUrl(n);var i=this.metadataFromPubRecord(e);this._service.invoke("PUT",n,{"Content-Type":"application/json"},JSON.stringify(i),void 0,function(t,e){return t?o(s("Error publishing composite",t,e)):200===e.statusCode?o(void 0,n):o(a("Unexpected response publishing composite",t,e))})},h.prototype.getCpMetadata=function(t,e){"use strict";var o="/api/v2/"+t.communityId+"/assets/"+t.assetId;o=this._resolveUrl(o),this._service.invoke("GET",o,{},void 0,{responseType:"text"},function(o,n){if(o)return e(s("Error getting metadata for CP composite",o,n));if(200===n.statusCode){var r,c=n.responseText||n.response||n;try{r=JSON.parse(c),t.resourcePath=r.resource_path,t.description=r.description||null,t.title=r.title||null,t.alias=r.alias||null,t.undiscoverable=r.undiscoverable||!1,t.isPrivate=r.private||!1;var h=r.tags;h&&null!==h&&h.length>0&&(t.tags=h);var d=r._embedded;if(d&&null!==d&&(h=r.creators)&&null!==h&&h.length>0){for(var u=[],l=0;l<h.length;++l){var p=h[l];if(p&&null!==p){var _=p.id;_&&null!==_&&u.push(_)}}0!==u.length&&(t.creatorIds=u)}if((d=r.category_id)&&null!==d&&(t.categoryId=d.id||null),(h=r.sub_categories)&&null!==h&&h.length>0)for(t.subCategoryIds=[],l=0;l<h.length;++l)d=h[l],t.subCategoryIds.push(d.id);(d=r.custom)&&null!==d&&(t.custom=d)}catch(t){var f=new i(i.INVALID_DATA,"Invalid JSON returned by server",t);return f.response=n,e(f)}return e(void 0,t)}return e(a("Unexpected response while getting metadata for CP composite",o,n))})},h.prototype.updatePublicationRecordData=function(t,e){"use strict";var o=e.versionId;if(t.mainResource="manifest",o&&(t.mainResourceVersion=o),null!==t.artworkComponentId){var n=e.getComponentWithId(t.artworkComponentId);if(null===n)throw new i(i.COMPONENT_DOWNLOAD_ERROR,"Bad component ID = "+t.artworkComponentId);var r=e.compositeHref;r=this.assetIdFromSSResourceHref(r),r+="/"+n.absolutePath,t.metadata.artworkResource=r,t.metadata.artworkResourceVersion=n.version}},h.prototype.getCompositeManifestHref=function(t,e,o){"use strict";if(e)throw new i(i.INVALID_PARAMS,"AdobeCommunitySession does not support version manifests.");if(!t.assetId)throw new i(i.INVALID_PARAMS,"Composite must be bound.");if(!this.isProperAssetId(t.assetId))throw new i(i.INVALID_STATE,"Composite asset id has invalid format.");var n=this._resolveUrl(t.assetId);if(!n)throw new i(i.WRONG_ENDPOINT,"Wrong endpoint: "+t.assetId);return o(void 0,c(n,"manifest"))},h.prototype.getComponent=function(t,e,o){"use strict";var n=this,i={},r=this.getComponentHref(t,t.version,function(t,s){return t?o(t):(r=r||i,n._getAsset(s,void 0,e,r,o))});return r||i},h.prototype.getRenditionOfComponent=function(t,e,o,n,i,r){"use strict";var s=this,a={},c=this.getComponentRenditionHref(t,t.version,e,o,n,function(t,o){return t?r(t):(c=c||a,s._getAsset(o,{accept:e},i,c,r))});return c||a},h.prototype.getCompositeManifest=function(t,e,o,n){"use strict";var r=t.assetId;return r&&(r=this._resolveUrl(r)),r?(r=c(r,"manifest"),this.getAssetAsType(r,"text",o,n)):n(new i(i.WRONG_ENDPOINT,"Wrong endpoint: "+t.assetId))},h.prototype.headRequest=function(t,e){"use strict";return this._service.invoke("HEAD",t,{},void 0,void 0,function(t,o){if(t)return e(t);e(t,o)})},h.prototype.getComponentHref=function(t,e,o){"use strict";var n=t._owner;if(!n||!n.compositeAssetId)throw new i(i.INVALID_STATE,"Component must be part of a branch of a bound composite.");if(!this.isProperAssetId(n.compositeAssetId))throw new i(i.INVALID_STATE,"Composite asset id has invalid format.");if(n._core){var r=n._core._getSourceAssetInfoOfComponent(t);if(r)return o(void 0,this._constructComponentHref(r.compositeAssetId,r.componentPath,r.componentVersion))}return o(void 0,this._constructComponentHref(n.compositeAssetId,t.absolutePath,e))},h.prototype.getComponentRenditionHref=function(t,e,o,n,r,s){"use strict";var a=t._owner;if(!a||!a.compositeAssetId)throw new i(i.INVALID_STATE,"Component must be part of a branch of a bound composite.");if(!this.isProperAssetId(a.compositeAssetId))throw new i(i.INVALID_STATE,"Composite asset id has invalid format.");if(a._core&&a._core._getSourceAssetInfoOfComponent(t))throw new i(i.INVALID_STATE,"Getting a rendition of a source href not implemented.");return s(void 0,this._constructComponentRenditionHref(a.compositeAssetId,t.absolutePath,e,o,n,r))},h.prototype.isProperAssetId=function(t){"use strict";return r.ensureRelativeHrefStartsWithSlash(t)},h.prototype._constructComponentHref=function(t,e,o){"use strict";var n=e.slice(1),i=c(this._resolveUrl(t),n);return i&&void 0!==o&&(this._hrefUsesContentApis(t)?i+="/version/"+o:i+="?version="+o),i};var d=/^\/?content\/2\/[^\/]+\/[^\/]+/,u=/^\/?api\/v2\/[^\/]+\/assets\/[^\/]+/,l={"image/jpeg":"jpg","image/png":"png"};h.prototype._constructComponentRenditionHref=function(t,e,o,n,s,a){"use strict";var c,h,p=e.slice(1),_=r.parseURI(t).path;if("/content/2/"===_.slice(0,"/content/2/".length)){var f=l[n];if(!f)throw new i(i.INVALID_PARAMS,"Unsupported rendition media type: "+n);if(!((c=d.exec(_))&&c.length>0))throw new i(i.INVALID_PARAMS,"Failed to parse composite href: "+t);h=this._resolveUrl(r.appendPathElements(c[0],"rendition",p,"version",o,"format",f,"dimension",s,"size",String(a)))}else{if(!((c=u.exec(_))&&c.length>0))throw new i(i.INVALID_PARAMS,"Failed to parse composite href: "+t);h=this._resolveUrl(r.appendPathElements(c[0],"rendition",s,String(a),p)+"?version="+o)}return h},h.prototype._hrefUsesContentApis=function(t){"use strict";return"/content/2/"===r.parseURI(t).path.slice(0,"/content/2/".length)},h.prototype.assetIdFromSSResourceHref=function(t){"use strict";var e=t.match("^\\/pubs\\/([^\\/]*).*$");return e?e[1]:null},h.prototype.metadataFromPubRecord=function(t){"use strict";var e={};if(null!==t.title&&(e.title=t.title),null!==t.description&&(e.description=t.description),null!==t.alias&&(e.alias=t.alias),e.undiscoverable=t.undiscoverable,t.isPrivate&&(e.private=t.isPrivate),null!==t.tags&&t.tags.length>0){for(var o={},n=0;n<t.tags.length;n++)o.concat(t.tags[n]);e.tags=o}if(null!==t.creatorIds&&t.creatorIds.length>0){var i={};for(n=0;n<t.creatorIds.length;n++)i.concat(t.creatorIds[n]);e.creator_ids=i}if(null!==t.categoryId&&(e.category_id=t.categoryId),null!==t.subCategoryIds&&t.subCategoryIds.length>0){var r={};for(n=0;n<t.subCategoryIds.length;n++)r.concat(t.subCategoryIds[n]);e.sub_category_ids=r}if(null!==t.custom&&(e.custom=t.custom),null!==t.mainResource&&null!==t.mainResourceVersion){var s={};s.resource_path=t.mainResource,s.resource_version=t.mainResourceVersion,e.main_resource=s}if(null!==t.artworkResource&&null!==t.artworkResourceVersion){var a={};a.resource_path=t.artworkResource,a.resource_version=t.artworkResourceVersion,e.artwork=a}return e},t.exports=h},744:function(t,e){function o(){"use strict";this._communityId=null,this._artworkComponentId=null,this._assetId=null,this._resourcePath=null,this._mainResource=null,this._mainResourceVersion=null,this._artworkResource=null,this._artworkResourceVersion=null,this._title=null,this._alias=null,this._tags=[],this._description=null,this._categoryId=null,this._subCategoryIds=[],this._creatorIds=[],this._undiscoverable=!1,this._isPrivate=!1,this._custom=null}Object.defineProperties(o.prototype,{communityId:{get:function(){"use strict";return this._communityId},set:function(t){"use strict";this._communityId=t}},artworkComponentId:{get:function(){"use strict";return this._artworkComponentId},set:function(t){"use strict";this._artworkComponentId=t}},assetId:{get:function(){"use strict";return this._assetId},set:function(t){"use strict";this._assetId=t}},resourcePath:{get:function(){"use strict";return this._resourcePath},set:function(t){"use strict";this._resourcePath=t}},mainResource:{get:function(){"use strict";return this._mainResource},set:function(t){"use strict";this._mainResource=t}},mainResourceVersion:{get:function(){"use strict";return this._mainResourceVersion},set:function(t){"use strict";this._mainResourceVersion=t}},artworkResource:{get:function(){"use strict";return this._artworkResource},set:function(t){"use strict";this._artworkResource=t}},artworkResourceVersion:{get:function(){"use strict";return this._artworkResourceVersion},set:function(t){"use strict";this._artworkResourceVersion=t}},title:{get:function(){"use strict";return this._title},set:function(t){"use strict";this._title=t}},alias:{get:function(){"use strict";return this._alias},set:function(t){"use strict";this._alias=t}},tags:{get:function(){"use strict";return this._tags},set:function(t){"use strict";this._tags=this._tags.concat(t)}},description:{get:function(){"use strict";return this._description},set:function(t){"use strict";this._description=t}},categoryId:{get:function(){"use strict";return this._categoryId},set:function(t){"use strict";this._categoryId=t}},subCategoryIds:{get:function(){"use strict";return this._subCategoryIds},set:function(t){"use strict";this._subCategoryIds=this._subCategoryIds.concat(t)}},creatorIds:{get:function(){"use strict";return this._creatorIds},set:function(t){"use strict";this._creatorIds=this._creatorIds.concat(t)}},undiscoverable:{get:function(){"use strict";return this._undiscoverable},set:function(t){"use strict";this._undiscoverable=t}},isPrivate:{get:function(){"use strict";return this._isPrivate},set:function(t){"use strict";this._isPrivate=t}},custom:{get:function(){"use strict";return this._custom},set:function(t){"use strict";this._custom=t}}}),t.exports=o},745:function(t,e,o){var n=o(64),i=o(59);function r(t,e,o){"use strict";this._session=t,this._callback=e,this._cleanup=o,this._componentsPending=0,this._bytesTransfered=0,this._bytesTotal=0,this._onProgress=n.noOp;var i=this;this._reportProgress=function(t){if(t>0){i._bytesTransfered+=t;var e=i.onProgress;e&&e(i._bytesTransfered,i._bytesTotal)}}}Object.defineProperties(r.prototype,{aborted:{get:function(){"use strict";return this._aborted}},bytesTransfered:{get:function(){"use strict";return this._bytesTransfered}},bytesTotal:{get:function(){"use strict";return this._bytesTotal}},onProgress:{set:function(t){"use strict";return this._onProgress=t}}}),r.prototype._callCallback=function(t,e){"use strict";var o=this._callback;if(o)return this._callback=void 0,o(t,e)},r.prototype._xferComplete=function(t,e){"use strict";var o=this._cleanup;if(!o)return this._callCallback(t,e);this._cleanup=void 0,o(t,e)},r.prototype.abort=function(t){"use strict";return this._aborted||(this._aborted=!0,this._session._service.abortAllWithToken(this)),t||(this._callback=void 0,t=new Error("Aborted")),this._xferComplete(t)};var s={publishCompositeAlreadyPushedToPubs:function(t,e,o,n,s,a){"use strict";if(!e||null===e.resourcePath||null===e.communityId)throw new i(i.INVALID_PARAMS,"ResourcePath & communityId must be set on publication record for the composite to be published.");var c;c=new r(s,a);var h,d=null!==e.assetId;return s.updatePublicationRecordData(e,t.current),d?((h=s.updateCpMetadataAtResource(t.type,e,function(t,o){return c._xferComplete(t,t?void 0:e)}))&&(h.token=c),c):((h=s.publishCompositeAtResource(t.type,e,function(t,o){return c._xferComplete(t,t?void 0:e)}))&&(h.token=c),c)},getCpMetadata:function(t,e,o){"use strict";if(!e||null===e.assetId||null===e.communityId)throw new i(i.INVALID_PARAMS,"Asset Id & communityId must be set on publication record to fetch its CP metadata.");return t.getCpMetadata(e,o)}};t.exports=s}}]);
//# sourceMappingURL=logomaker-entry_748942c6-55f3a2f1.js.map