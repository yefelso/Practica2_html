(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{106:function(e,t,n){var i,r=t,o=n(0),a=n(1);r.FormaToPGMFactory=o.defineProtocol("FormaToPGMFactory",{childReferences:"(GroupForma) -> Array<PGMReference>"}),r.FormaToPGMMapper=(i=function(e){this.formaKind=e},o.defineClass({name:"FormaToPGMMapper",ctor:i,props:{makePGMRef:function(e,t,n){return a.CoreAssert.fail("PGMMapperForForma for "+this.formaKind+" isn't overriding makePGMRef"),null}}}),i)},107:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(9),c=n(141),l=n(74),u=n(173),d=n(258),h=n(51),p=n(55),f=n(142);r.PGMComposite=(i=function(e,t,n,i,r,a){this.children=o.clone(a),h.PGMNode.call(this,e,t,n,i,r)},o.defineClass({name:"PGMComposite",ctor:i,superName:"PGMNode",statics:{childrenHash:function(e){return"["+e.map(function(e){return"child:"+e.child.appearanceHash+", placement:"+e.placement.asString},this).join(",")+"]"},decodeNode:function(e,t,n,r,a,s){var l;if(null!=(l=e.entries.children))switch(t){case"pgm-group":if(d=i.decodeChildren(l,s))return f.PGMSimpleGroup.decodeComposite(e,n,r,a,o.clone(d));break;case"pgm-filter":if(d=i.decodeChildren(l,s))return u.PGMFilter.decodeComposite(e,n,r,a,o.clone(d));break;case"pgm-clip":var d;if(d=i.decodeChildren(l,s))return c.PGMClip.decodeComposite(e,n,r,a,o.clone(d));break;default:return null}return null},decodeChildren:function(e,t){var n;if(n=o.as(e,["Array","Any"])){for(var i=[],r=o.iter(n);!r.done;r.next()){var a,s=r.value;if(!(a=p.PGMReference.decode(l.PGMDict.fromAny(s),t)))return null;i.push(a)}return i}return null}},props:{visit:function(e){e(this);for(var t=o.iter(this.children);!t.done;t.next())t.value.child.visit(e)},visitByRef:function(e){for(var t=o.iter(this.children);!t.done;t.next())t.value.visit(e)},visitEx:function(e,t,n,i,r){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=s.Matrix2D.Identity),void 0===r&&(r=s.Matrix2D.Identity),!e(this,i,r))return this;if(null!=t&&!t(this,i,r))return null;for(var a=null,c=o.iter(this.children);!c.done;c.next()){var l=c.value;if(null!=(a=l.child.visitEx(e,t,n,l.placement,r.concat(l.placement))))break}return null!=n&&n(this),a},indexOfChild:function(e){for(var t=o.iter(o.range(0,this.children.length,!1));!t.done;t.next()){var n=t.value;if(this.children[n].child.entity==e)return n}return null},encode:function(){var e=h.PGMNode.prototype.encode.call(this),t=new d.PGMMutableArray;e.entries.children=t;for(var n=o.iter(this.children);!n.done;n.next()){var i=n.value;t.entries.push(i.encode())}return e},cloneWithChildren:function(e,t){return a.CoreAssert.fail("subclass must implement"),this}}}),i)},141:function(e,t,n){var i,r=t,o=n(0),a=n(107),s=n(81);r.PGMClip=(i=function(e,t,n,r,s){this.clipPath=s,a.PGMComposite.call(this,i.TYPE,e,"PGMClip(children:"+a.PGMComposite.childrenHash(o.clone(r))+";clipPath:"+s.appearanceHash+")",t,n,o.clone(r))},o.defineClass({name:"PGMClip",ctor:i,superName:"PGMComposite",statics:{TYPE:"pgm-clip",decodeComposite:function(e,t,n,r,a){var c;return(c=s.TheoPath.decodeJson(o.as(e.entries["clip-path"],"AnyObject")))?new i(t,n,r,o.clone(a),c):null}},props:{encode:function(){var e=a.PGMComposite.prototype.encode.call(this);return e.entries["clip-path"]=this.clipPath.encodeJson(),e},clone:function(e){return new i(e,this.meta,this.animations,o.clone(this.children),this.clipPath)},cloneWithChildren:function(e,t){return new i(e,this.meta,this.animations,o.clone(t),this.clipPath)}}}),i)},142:function(e,t,n){var i,r=t,o=n(0),a=n(107);r.PGMSimpleGroup=(i=function(e,t,n,r){a.PGMComposite.call(this,i.TYPE,e,"PGMSimpleGroup(children:"+a.PGMComposite.childrenHash(o.clone(r))+")",t,n,o.clone(r))},o.defineClass({name:"PGMSimpleGroup",ctor:i,superName:"PGMComposite",statics:{TYPE:"pgm-group",decodeComposite:function(e,t,n,r,a){return new i(t,n,r,o.clone(a))}},props:{encode:function(){var e=a.PGMComposite.prototype.encode.call(this);return e.entries.type=i.TYPE,e},clone:function(e){return new i(e,this.meta,this.animations,o.clone(this.children))},cloneWithChildren:function(e,t){return new i(e,this.meta,this.animations,o.clone(t))}}}),i)},170:function(e,t,n){var i,r=t,o=n(0),a=n(257),s=n(75),c=n(349),l=n(209);r.PGMFilterSpec=(i=function(e){this.appearanceHash=e},o.defineClass({name:"PGMFilterSpec",ctor:i,statics:{decode:function(e){var t,n;if((t=o.opt(e,function(e){return e.entries}))&&null!=(n=o.as(t.type,"String")))switch(n){case"PGMOpacityFilterSpec":return l.PGMOpacityFilterSpec.decodeSpec(e);case"PGMMaskFilterSpec":return c.PGMMaskFilterSpec.decodeSpec(e);case"PGMBlendFilterSpec":return a.PGMBlendFilterSpec.decodeSpec(e);default:return null}return null}},props:{encode:function(){return new s.PGMMutableDict}}}),i)},171:function(e,t,n){var i,r,o=t,a=n(0),s=n(1),c=n(9),l=n(41),u=n(74),d=n(75),h=n(10);o.PGMTransformedBounds=(i=function(e,t){this.placement=e,this.bounds=t},a.defineClass({name:"PGMTransformedBounds",ctor:i,statics:{decode:function(e){var t,n,r;return(t=a.opt(e,function(e){return e.entries}))?null!=(n=t.placement)&&(r=h.TheoRect.decodeJson(a.as(t.bounds,"AnyObject")))?new i(c.Matrix2D.decodeJson(a.as(n,"AnyObject")),r):(s.CoreAssert.fail("PGMTransformedBounds.decode: missing placement or bounds"),null):null}},props:{encode:function(){var e=new d.PGMMutableDict;return e.entries.placement=this.placement.encodeJson(),e.entries.bounds=this.bounds.encodeJson(),e}}}),i),o.PGMTransformAnimation=(r=function(e,t,n){this.startXBounds=t,this.endXBounds=n,l.PGMAnimation.call(this,e)},a.defineClass({name:"PGMTransformAnimation",ctor:r,superName:"PGMAnimation",statics:{TYPE:"PGMTransformAnimation",PROP_START_XBOUNDS:"start-xbounds",PROP_END_XBOUNDS:"end-xbounds",decodeAnimation:function(e,t){var n,i;return(n=o.PGMTransformedBounds.decode(u.PGMDict.fromAny(e.entries[r.PROP_START_XBOUNDS])))&&(i=o.PGMTransformedBounds.decode(u.PGMDict.fromAny(e.entries[r.PROP_END_XBOUNDS])))?new r(t,n,i):null}},props:{encode:function(){var e=l.PGMAnimation.prototype.encode.call(this);return e.entries.type=r.TYPE,e.entries[r.PROP_START_XBOUNDS]=this.startXBounds.encode(),e.entries[r.PROP_END_XBOUNDS]=this.endXBounds.encode(),e}}}),r)},172:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(74),c=n(75),l=n(263),u=n(491);r.PGMUnaryFunction=(i=function(e,t){this.domain=e,this.range=t},o.defineClass({name:"PGMUnaryFunction",ctor:i,statics:{decode:function(e){var t,n,r,c;if(!(t=o.opt(e,function(e){return e.entries})))return null;if(null==(n=o.as(t.type,"String"))||!(r=l.PGMRange.decode(s.PGMDict.fromAny(t.domain)))||!(c=l.PGMRange.decode(s.PGMDict.fromAny(t.range))))return a.CoreAssert.fail("PGMUnaryFunction.decode: missing valid type, domain, or range"),null;switch(n){case"PGMUnaryFunction":return new i(r,c);case"PGMSineEasingFunction":return u.PGMSineEasingFunction.decodeFn(e,r,c);default:return null}}},props:{apply:function(e){return this.range.applyU(this.domain.boundedU(e))},encode:function(){var e=new c.PGMMutableDict;return e.entries.type="PGMUnaryFunction",e.entries.domain=this.domain.encode(),e.entries.range=this.range.encode(),e},isEqualTo:function(e){return e.domain.isEqualTo(this.domain)&&e.range.isEqualTo(this.range)}}}),i)},173:function(e,t,n){var i,r=t,o=n(0),a=n(107),s=n(74),c=n(170);r.PGMFilter=(i=function(e,t,n,r,s){this.spec=s,a.PGMComposite.call(this,i.TYPE,e,"PGMFilter(children:"+a.PGMComposite.childrenHash(o.clone(r))+";filter:"+s.appearanceHash+")",t,n,o.clone(r))},o.defineClass({name:"PGMFilter",ctor:i,superName:"PGMComposite",statics:{TYPE:"pgm-filter",decodeComposite:function(e,t,n,r,a){var l,u;return(l=s.PGMDict.fromAny(e.entries.spec))&&(u=c.PGMFilterSpec.decode(l))?new i(t,n,r,o.clone(a),u):null}},props:{encode:function(){var e=a.PGMComposite.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.spec=this.spec.encode(),e},clone:function(e){return new i(e,this.meta,this.animations,o.clone(this.children),this.spec)},cloneWithChildren:function(e,t){return new i(e,this.meta,this.animations,o.clone(t),this.spec)}}}),i)},174:function(e,t,n){var i,r=t,o=n(0),a=n(9),s=n(498),c=n(499),l=n(55);r.PGMGraph=(i=function(e,t){this.root=e,this.rootRef=new l.PGMReference(e,a.Matrix2D.Identity),this.duration=t},o.defineClass({name:"PGMGraph",ctor:i,statics:{PROP_ROOT_ENTITY:"root-entity",PROP_ENTITIES:"entities",PROP_TEXT_STYLES:"text-styles",PROP_DURATION:"duration",decode:function(e){return new s.PGMGraphDecoder(e).decode()}},props:{visitByRef:function(e){e(this.rootRef),this.root.visitByRef(e)},findReferencesToEntity:function(e){var t=[];return this.visitByRef(function(n){n.child.entity==e&&t.push(n)}),t},encode:function(){return c.PGMGraphEncoder.encode(this.root,this.duration)}}}),i)},208:function(e,t,n){var i,r=t,o=n(0),a=n(41),s=n(74),c=n(170);r.PGMFilterAnimation=(i=function(e,t,n){this.startSpec=t,this.endSpec=n,a.PGMAnimation.call(this,e)},o.defineClass({name:"PGMFilterAnimation",ctor:i,superName:"PGMAnimation",statics:{TYPE:"PGMFilterAnimation",decodeAnimation:function(e,t){var n,r;return(n=c.PGMFilterSpec.decode(s.PGMDict.fromAny(e.entries["start-spec"])))&&(r=c.PGMFilterSpec.decode(s.PGMDict.fromAny(e.entries["end-spec"])))?new i(t,n,r):null}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries["start-spec"]=this.startSpec.encode(),e.entries["end-spec"]=this.endSpec.encode(),e}}}),i)},209:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(170);r.PGMOpacityFilterSpec=(i=function(e){this.opacity=e,s.PGMFilterSpec.call(this,"PGMOpacityFilterSpec(opacity:"+o.toString(e))},o.defineClass({name:"PGMOpacityFilterSpec",ctor:i,superName:"PGMFilterSpec",statics:{TYPE:"PGMOpacityFilterSpec",decodeSpec:function(e){var t;return null!=(t=o.as(e.entries.opacity,"Double"))?new i(t):(a.CoreAssert.fail("Missing a parameter"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.opacity=this.opacity,e}}}),i)},210:function(e,t,n){var i,r=t,o=n(0),a=n(97),s=n(22),c=n(81);r.PGMShape=(i=function(e,t,n,r,o,s){this.path=o,this.color=s,a.PGMLeaf.call(this,i.TYPE,e,"PGMShape(path:"+o.appearanceHash+";color:"+s.asString+")",t,n,r)},o.defineClass({name:"PGMShape",ctor:i,superName:"PGMLeaf",statics:{TYPE:"pgm-shape",decodeLeaf:function(e,t,n,r,a){var l,u;return(l=c.TheoPath.decodeJson(o.as(e.entries.path,"AnyObject")))&&(u=s.SolidColor.decodeJson(o.as(e.entries.color,"AnyObject")))?new i(t,n,r,a,l,u):null}},props:{encode:function(){var e=a.PGMLeaf.prototype.encode.call(this);return e.entries.path=this.path.encodeJson(),e.entries.color=this.color.encodeJson(),e},clone:function(e){return new i(e,this.meta,this.animations,this.bounds,this.path,this.color)},withAnimations:function(e){return e===this.animations?this:new i(this.entity,this.meta,e,this.bounds,this.path,this.color)}}}),i)},211:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(97),c=n(51);r.PGMText=(i=function(e,t,n,r,o,a){this.text=o,this.style=a;var c=[];c.push("bounds:"+r.asString),c.push("text:"+o),c.push("style:"+a.key),s.PGMLeaf.call(this,i.TYPE,e,"PGMText("+c.join(";")+")",t,n,r)},o.defineClass({name:"PGMText",ctor:i,superName:"PGMLeaf",statics:{TYPE:"pgm-text",PROP_TEXT:"text",PROP_STYLE_KEY:"style-key",decodeLeaf:function(e,t,n,r,s,c){var l,u,d;return null!=(l=o.as(e.entries[i.PROP_TEXT],"String"))&&null!=(u=o.as(e.entries[i.PROP_STYLE_KEY],"String"))&&(d=c.constructTextStyle(u))?new i(t,n,r,s,l,d):(a.CoreAssert.fail("PGMText.decodeLeaf: didn't get a required input."),null)}},props:{encode:function(){var e=s.PGMLeaf.prototype.encode.call(this);return e.entries[c.PGMNode.PROP_TYPE]=i.TYPE,e.entries[i.PROP_TEXT]=this.text,e.entries[i.PROP_STYLE_KEY]=this.style.key,e},getTextStylesReferenced:function(){return[this.style]},clone:function(e){return new i(e,this.meta,this.animations,this.bounds,this.text,this.style)},withAnimations:function(e){return e===this.animations?this:new i(this.entity,this.meta,e,this.bounds,this.text,this.style)},canInterpolate:function(e){return this.text==e.text&&this.style.canInterpolate(e.style)}}}),i)},257:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(170);r.PGMBlendFilterSpec=(i=function(e){this.weights=o.clone(e);var t=e.map(function(e){return o.toString(e)},this).join(",");s.PGMFilterSpec.call(this,"PGMBlendFilterSpec(weights:"+t)},o.defineClass({name:"PGMBlendFilterSpec",ctor:i,superName:"PGMFilterSpec",statics:{TYPE:"PGMBlendFilterSpec",decodeSpec:function(e){var t;return(t=o.as(e.entries.u,["Array","Double"]))?new i(o.clone(t)):(a.CoreAssert.fail("Missing a parameter"),null)}},props:{encode:function(){var e=s.PGMFilterSpec.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.weights=o.clone(this.weights),e}}}),i)},258:function(e,t,n){var i,r=t,o=n(0),a=n(259),s=n(75);r.PGMMutableArray=(i=function(){this.entries=[]},o.defineClass({name:"PGMMutableArray",ctor:i,props:{flatten:function(){for(var e=[],t=o.iter(this.entries);!t.done;t.next()){var n,r,a=t.value;(n=o.as(a,s.PGMMutableDict))?e.push(o.clone(n.flatten())):(r=o.as(a,i))?e.push(o.clone(r.flatten())):e.push(a)}return e},immutable:function(){return new a.PGMArray(o.clone(this.flatten()))}}}),i)},259:function(e,t,n){var i,r=t,o=n(0);r.PGMArray=(i=function(e){this.entries=o.clone(e)},o.defineClass({name:"PGMArray",ctor:i,statics:{fromAny:function(e){var t;return(t=o.as(e,["Array","Any"]))?new i(o.clone(t)):null}}}),i)},260:function(e,t,n){var i,r=t,o=n(0),a=n(41),s=n(22),c=n(10);r.PGMShapeAnimation=(i=function(e,t,n){this.endColor=t,this.endBounds=n,a.PGMAnimation.call(this,e)},o.defineClass({name:"PGMShapeAnimation",ctor:i,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-shape",decodeAnimation:function(e,t){var n,r;return(n=s.SolidColor.decodeJson(o.as(e.entries.endColor,"AnyObject")))&&(r=c.TheoRect.decodeJson(o.as(e.entries.endBounds,"AnyObject")))?new i(t,n,r):null}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.endColor=this.endColor.encodeJson(),e.entries.endBounds=this.endBounds.encodeJson(),e}}}),i)},261:function(e,t,n){var i,r=t,o=n(0),a=n(41),s=n(74),c=n(262),l=n(10);r.PGMTextAnimation=(i=function(e,t,n){this.endBounds=t,this.endStyle=n,a.PGMAnimation.call(this,e)},o.defineClass({name:"PGMTextAnimation",ctor:i,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-text",PROP_END_BOUNDS:"end-bounds",PROP_END_STYLE:"end-style",decodeAnimation:function(e,t){var n,r;return(n=l.TheoRect.decodeJson(o.as(e.entries[i.PROP_END_BOUNDS],"AnyObject")))&&(r=c.PGMTextStyle.decode(s.PGMDict.fromAny(e.entries[i.PROP_END_STYLE])))?new i(t,n,r):null}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e.entries[a.PGMAnimation.PROP_TYPE]=i.TYPE,e.entries[i.PROP_END_BOUNDS]=this.endBounds.encodeJson(),e.entries[i.PROP_END_STYLE]=this.endStyle.encode(),e}}}),i)},262:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(8),c=n(74),l=n(350),u=n(75),d=n(22);r.interp=function(e,t,n){return e+(t-e)*n},r.PGMTextStyle=(i=function(e,t,n,i,r,o){this.key_=null,this.font=e,this.size=t,this.fillColor=n,this.strokeColor=i,this.strokeWidth=r,this.tracking=o},o.defineClass({name:"PGMTextStyle",ctor:i,statics:{decode:function(e){var t,n,r,s,u;return(r=o.opt(e,function(e){return e.entries}))?(s=l.PGMFont.decode(c.PGMDict.fromAny(r.font)))&&null!=(u=o.as(r.size,"Double"))?new i(s,u,d.SolidColor.decodeJson(o.as(r["fill-color"],"AnyObject")),d.SolidColor.decodeJson(o.as(r["stroke-color"],"AnyObject")),(t=o.as(r["stroke-width"],"Double"))||null!=t?t:0,(n=o.as(r.tracking,"Double"))||null!=n?n:0):(a.CoreAssert.fail("PGMTextStyle.decode: missing required property"),null):null}},props:{key:{get:function(){var e;if(null==this.key_){var t,n,i=[];i.push("size:"+o.toString(this.size)),i.push("font:"+this.font.asString),(t=this.fillColor)&&i.push("fill:"+t.asString),(n=this.fillColor)&&i.push("stroke:"+n.asString),this.strokeWidth>0&&i.push("stroke-width:"+o.toString(this.strokeWidth)),0!=this.tracking&&i.push("tracking:"+o.toString(this.tracking));var r="PGMTextStyle("+i.join(";")+")";this.key_=(e=o.opt(s.Host.crypto,function(e){return e.md5(r)}))||null!=e?e:r}return this.key_}},encode:function(){var e=new u.PGMMutableDict;return e.entries.font=this.font.encode(),e.entries.size=this.size,null!=this.fillColor&&(e.entries["fill-color"]=this.fillColor.encodeJson()),null!=this.strokeColor&&(e.entries["stroke-color"]=this.strokeColor.encodeJson()),this.strokeWidth>0&&(e.entries["stroke-width"]=o.toString(this.strokeWidth)),0!=this.tracking&&(e.entries.tracking=o.toString(this.tracking)),e},interpOptionalColors:function(e,t,n){return null==e&&null==t?null:null==e?this.interpOptionalColors(new d.SolidColor(0,0,0,0),t,n):null==t?this.interpOptionalColors(e,new d.SolidColor(0,0,0,0),n):e.interpolate(t,n)},interpolate:function(e,t){return new i(t>.5?e.font:this.font,r.interp(this.size,e.size,t),this.interpOptionalColors(this.fillColor,e.fillColor,t),this.interpOptionalColors(this.strokeColor,e.strokeColor,t),r.interp(this.strokeWidth,e.strokeWidth,t),r.interp(this.tracking,e.tracking,t))},canInterpolate:function(e){return this.font.isEqualTo(e.font)}}}),i)},263:function(e,t,n){var i,r,o=t,a=n(0),s=n(75);o.PGMRange=(i=function(e,t){this.start=e,this.end=t},r={},a.defineClass({name:"PGMRange",ctor:i,statics:{UNIT:{get:function(){return void 0===r.UNIT&&(r.UNIT=new i(0,1)),r.UNIT}},decode:function(e){var t,n;return null!=(t=a.as(a.opt(e,function(e){return e.entries.start}),"Double"))&&null!=(n=a.as(a.opt(e,function(e){return e.entries.end}),"Double"))?0==t&&1==n?i.UNIT:new i(t,n):null}},props:{boundedU:function(e){return e<=this.start?0:e>=this.end?1:(e-this.start)/(this.end-this.start)},applyU:function(e){return this.start+e*(this.end-this.start)},isEqualTo:function(e){return this.start==e.start&&this.end==e.end},contains:function(e){return e>=this.start&&e<=this.end},encode:function(){var e=new s.PGMMutableDict;return e.entries.start=this.start,e.entries.end=this.end,e}}}),i)},264:function(e,t,n){var i,r=t,o=n(0),a=n(80),s=n(97);r.PGMImage=(i=function(e,t,n,r,a,c){this.contentID=a,this.style=c,s.PGMLeaf.call(this,i.TYPE,e,"PGMImage(contentID:"+a+";bounds:("+r.asString+");style:"+o.toString(c)+")",t,n,r)},o.defineClass({name:"PGMImage",ctor:i,superName:"PGMLeaf",statics:{TYPE:"pgm-image",decodeLeaf:function(e,t,n,r,s){var c;return null!=(c=o.as(e.entries["content-id"],"String"))?new i(t,n,r,s,c,a.ImageStyle.decodeJson(o.as(e.entries.style,"AnyObject"),a.ImageStyle.KIND,null)):null}},props:{encode:function(){var e=s.PGMLeaf.prototype.encode.call(this);return e.entries["content-id"]=this.contentID,null!=this.style&&(e.entries.style=this.style.encodeJson()),e},clone:function(e){return new i(e,this.meta,this.animations,this.bounds,this.contentID,this.style)}}}),i)},303:function(e,t,n){var i,r,o=t,a=n(0),s=n(4),c=n(22);o.XYZColor=(i=function(e,t,n,i){this.x=e,this.y=t,this.z=n,this.alpha=i,s.CoreObject.call(this)},r={},a.defineClass({name:"XYZColor",ctor:i,superName:"CoreObject",statics:{D50XYZ:{get:function(){return void 0===r.D50XYZ&&(r.D50XYZ=new i(.964212,1,.825188,1)),r.D50XYZ}},D65XYZ:{get:function(){return void 0===r.D65XYZ&&(r.D65XYZ=new i(.950429,1,1.0889,1)),r.D65XYZ}},fromRGB:function(e){function t(e){return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}var n=t(e.red),r=t(e.green),o=t(e.blue);return new i(.4124*n+.3576*r+.1805*o,.2126*n+.7152*r+.0722*o,.0193*n+.1192*r+.9505*o,e.alpha)}},props:{asRGB:{get:function(){return null==this.rgb_&&(this.rgb_=this.toRGB()),this.rgb_}},toRGB:function(){function e(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}var t=e(3.2406*this.x+-1.5372*this.y+-.4986*this.z),n=e(-.9689*this.x+1.8758*this.y+.0415*this.z),i=e(.0557*this.x+-.204*this.y+1.067*this.z);return new c.SolidColor(Math.min(Math.max(t,0),1),Math.min(Math.max(n,0),1),Math.min(Math.max(i,0),1),this.alpha)}}}),i)},349:function(e,t,n){var i,r=t,o=n(0),a=n(170),s=n(22);r.PGMMaskFilterSpec=(i=function(e){void 0===e&&(e=s.SolidColor.BLACK),this.matte=e,a.PGMFilterSpec.call(this,"PGMMaskFilterSpec()")},o.defineClass({name:"PGMMaskFilterSpec",ctor:i,superName:"PGMFilterSpec",statics:{TYPE:"PGMMaskFilterSpec",decodeSpec:function(e){var t;return(t=s.SolidColor.decodeJson(o.as(e.entries.matte,"AnyObject")))?new i(t):new i}},props:{encode:function(){var e=a.PGMFilterSpec.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.matte=this.matte.encodeJson(),e}}}),i)},350:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(75);r.PGMFont=(i=function(e,t,n){this.cssName=e,this.family=t,this.capRatio=n},o.defineClass({name:"PGMFont",ctor:i,statics:{decode:function(e){var t,n,r,s;return(t=o.opt(e,function(e){return e.entries}))?null!=(n=o.as(t.cssName,"String"))&&null!=(r=o.as(t.family,"String"))&&null!=(s=o.as(t.capRatio,"Double"))?new i(n,r,s):(a.CoreAssert.fail("PGMFont.decode: missing required parameter"),null):null}},props:{encode:function(){var e=new s.PGMMutableDict;return e.entries.cssName=this.cssName,e.entries.family=this.family,e.entries.capRatio=this.capRatio,e},asString:{get:function(){return"PGMFont(cssName:"+this.cssName+";family:"+this.family+";capRatio:"+o.toString(this.capRatio)+")"}},isEqualTo:function(e){return this.cssName==e.cssName&&this.family==e.family&&this.capRatio==e.capRatio}}}),i)},351:function(e,t,n){var i,r=t,o=n(0),a=n(97);r.PGMSVG=(i=function(e,t,n,r,o){this.contentID=o,a.PGMLeaf.call(this,i.TYPE,e,"PGMSVG(contentID:"+o+";bounds:("+r.asString+"))",t,n,r)},o.defineClass({name:"PGMSVG",ctor:i,superName:"PGMLeaf",statics:{TYPE:"pgm-svg",decodeLeaf:function(e,t,n,r,a){var s;return null!=(s=o.as(e.entries["content-id"],"String"))?new i(t,n,r,a,s):null}},props:{encode:function(){var e=a.PGMLeaf.prototype.encode.call(this);return e.entries["content-id"]=this.contentID,e},clone:function(e){return new i(e,this.meta,this.animations,this.bounds,this.contentID)}}}),i)},352:function(e,t,n){var i,r=t,o=n(0),a=n(97);r.PGMVideo=(i=function(e,t,n,r,o){this.contentID=o,a.PGMLeaf.call(this,i.TYPE,e,"PGMVideo(contentID:"+o+";bounds:("+r.asString+"))",t,n,r)},o.defineClass({name:"PGMVideo",ctor:i,superName:"PGMLeaf",statics:{TYPE:"pgm-video",decodeLeaf:function(e,t,n,r,a){var s;return null!=(s=o.as(e.entries["content-id"],"String"))?new i(t,n,r,a,s):null}},props:{encode:function(){var e=a.PGMLeaf.prototype.encode.call(this);return e.entries["content-id"]=this.contentID,e},clone:function(e){return new i(e,this.meta,this.animations,this.bounds,this.contentID)}}}),i)},353:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(9),c=n(141),l=n(107),u=n(97),d=n(171),h=n(10);r.PGMUtils=(i=function(){},o.defineClass({name:"PGMUtils",ctor:i,statics:{calcBounds:function(e,t){var n,r,s;return(n=o.as(e,u.PGMLeaf))?t.transformRect(n.bounds):(r=o.as(e,l.PGMComposite))?(s=o.as(e,c.PGMClip))?s.clipPath.bounds:i.calcGroupBounds(r,t):(a.CoreAssert.fail("unexpected node type"),null)},calcGroupBounds:function(e,t){var n=null;return e.children.forEach(function(e){var r;(r=i.calcBounds(e.child,t.concat(e.placement)))&&(n=null==n?r:n.unionWith(r))}),n},calcXBoundsForRef:function(e){return new d.PGMTransformedBounds(e.placement,i.calcBounds(e.child,s.Matrix2D.Identity)||h.TheoRect.Zero)}}}),i)},41:function(e,t,n){var i,r,o,a=t,s=n(0),c=n(1),l=n(74),u=n(208),d=n(258),h=n(75),p=n(490),f=n(260),P=n(261),M=n(171),m=n(172);a.PGMAnimation=(i=function(e){this.timeFn=e},s.defineClass({name:"PGMAnimation",ctor:i,statics:{PROP_TYPE:"type",PROP_TIME_FN:"time-fn",EMPTY_ARRAY:[],decode:function(e){var t,n,r;if(!(t=e))return null;if(null==(n=s.as(t.entries[i.PROP_TYPE],"String"))||!(r=m.PGMUnaryFunction.decode(l.PGMDict.fromAny(t.entries[i.PROP_TIME_FN]))))return c.CoreAssert.fail("PGMAnimation.decode: couldn't get a required dict entry"),null;switch(n){case"PGMTransformAnimation":return M.PGMTransformAnimation.decodeAnimation(t,r);case"pgm-anim-text":return P.PGMTextAnimation.decodeAnimation(t,r);case"pgm-anim-shape":return f.PGMShapeAnimation.decodeAnimation(t,r);case"PGMFilterAnimation":return u.PGMFilterAnimation.decodeAnimation(t,r);case"pgm-anim-media-play":return p.PGMMediaPlayAnimation.decodeAnimation(t,r);default:return c.CoreAssert.fail("PGMAnimation.decode: don't know how to decode a "+n),null}}},props:{encode:function(){var e=new h.PGMMutableDict;return e.entries[i.PROP_TIME_FN]=this.timeFn.encode(),e}}}),i),a.PGMAnimationList=(r=function(e){this.animations=s.clone(e),this.isEmpty=0==e.length},o={},s.defineClass({name:"PGMAnimationList",ctor:r,statics:{EMPTY:{get:function(){return void 0===o.EMPTY&&(o.EMPTY=new r([])),o.EMPTY}},decode:function(e){if(null==e||0==e.entries.length)return r.EMPTY;for(var t=[],n=s.iter(e.entries);!n.done;n.next()){var i,o=n.value;if(!(i=a.PGMAnimation.decode(l.PGMDict.fromAny(o))))return c.CoreAssert.fail("couldn't decode animation"),r.EMPTY;t.push(i)}return new r(s.clone(t))},fromArray:function(e){return 0==e.length?r.EMPTY:new r(s.clone(e))}},props:{encode:function(){if(0==this.animations.length)return null;for(var e=new d.PGMMutableArray,t=s.iter(this.animations);!t.done;t.next()){var n=t.value;e.entries.push(n.encode())}return e},merge:function(e){if(this.isEmpty)return e;if(e.isEmpty)return this;var t=this.animations.concat(e.animations);return new r(s.clone(t))}}}),r)},486:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(487);r.FormaPagePGMSource=(i=function(e){this.caches_={},this.page=e},o.defineClass({name:"FormaPagePGMSource",ctor:i,superName:"PGMSource",props:{getGraph:function(e){var t,n,i=e.asString;if(t=this.caches_[i])return t.getGraph();if(n=this.page){var r=new s.FormaPGMCache(n,e);return this.caches_[i]=r,r.getGraph()}return a.CoreAssert.fail("FormaPagePGMSource.getGraph: page is out of scope"),null}}}),i)},487:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(139),c=n(488),l=n(174);r.FormaPGMCache=(i=function(e,t){this.graph_=null,this.formaCache_={},this.mappers=c.FormaToPGMMapperFactory.instance,this.page=e,this.settings=t,e.subscribe(this,s.FormaEndUpdateMessage.TYPE)},o.defineClass({name:"FormaPGMCache",ctor:i,statics:{_implements:function(e){return"TheoMessageSubscriber"==e||"FormaToPGMFactory"==e}},props:{onMessage:function(e){var t;if(t=o.as(e,s.FormaEndUpdateMessage)){for(var n=t.event.forma;null!=n;)o.removeKey(this.formaCache_,n.formaID),n=n.parent;this.graph_=null}},getPGMReferenceForForma:function(e){var t,n,i;return(t=this.formaCache_[e.formaID])?t:(n=this.mappers.getMapper(e))&&(i=n.makePGMRef(e,this.settings,this))?(this.formaCache_[e.formaID]=i,i):null},childReferences:function(e){for(var t=[],n=o.iter(e.childrenAsArray);!n.done;n.next()){var i,r=n.value;if(!(i=this.getPGMReferenceForForma(r)))return null;t.push(i)}return t},getGraph:function(){return this.validate(),this.graph_},validate:function(){var e,t;null==this.graph_&&(e=this.page)&&((t=this.getPGMReferenceForForma(e.root))?this.graph_=new l.PGMGraph(t.child,0):a.CoreAssert.fail("failed to generate a reference for root"))}}}),i)},488:function(e,t,n){var i,r,o=t,a=n(0),s=n(489),c=n(265),l=n(494),u=n(495),d=n(354),h=n(355),p=n(496),f=n(497);o.FormaToPGMMapperFactory=(i=function(){},r={},a.defineClass({name:"FormaToPGMMapperFactory",ctor:i,statics:{instance:{get:function(){return void 0===r.instance&&(r.instance=new i),r.instance}},FORMA_KIND_TO_FN:{get:function(){return void 0===r.FORMA_KIND_TO_FN&&(r.FORMA_KIND_TO_FN={Root:function(e){return u.RootFormaToPGMMapper.createMapper(e)},Frame:function(e){return s.FrameFormaToPGMMapper.createMapper(e)},Text:function(e){return h.TextFormaToPGMMapper.createMapper(e)},Shape:function(e){return d.ShapeFormaToPGMMapper.createMapper(e)},Image:function(e){return l.ImageFormaToPGMMapper.createMapper(e)},Video:function(e){return f.VideoFormaToPGMMapper.createMapper(e)},Vector:function(e){return p.VectorFormaToPGMMapper.createMapper(e)},group:function(e){return c.GroupFormaToPGMMapper.createMapper(e)}}),r.FORMA_KIND_TO_FN}}},props:{getMapper:function(e){return a.opt(i.FORMA_KIND_TO_FN[e.kind],function(t){return t(e)})}}}),i)},489:function(e,t,n){var i,r,o=t,a=n(0),s=n(1),c=n(29),l=n(106),u=n(96),d=n(41),h=n(141),p=n(51),f=n(55),P=n(81);o.FrameFormaToPGMMapper=(i=function(){l.FormaToPGMMapper.call(this,i.FORMA_KIND)},r={},a.defineClass({name:"FrameFormaToPGMMapper",ctor:i,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===r.FORMA_KIND&&(r.FORMA_KIND=c.FrameForma.KIND),r.FORMA_KIND}},instance:{get:function(){return void 0===r.instance&&(r.instance=new i),r.instance}},createMapper:function(e){return i.instance}},props:{makePGMRef:function(e,t,n){var i,r;return(i=a.as(e,c.FrameForma))&&(r=n.childReferences(i))?u.FormaToPGMUtils.applyCommonAnimations(t,e,new f.PGMReference(new h.PGMClip(i.formaID,new p.PGMNodeMetadata(i.formaID,"frame"),d.PGMAnimationList.EMPTY,a.clone(r),new P.TheoRectanglePath(i.bounds)),i.placement)):(s.CoreAssert.fail("child reference generation failed"),null)}}}),i)},490:function(e,t,n){var i,r=t,o=n(0),a=n(41);r.PGMMediaPlayAnimation=(i=function(e){a.PGMAnimation.call(this,e)},o.defineClass({name:"PGMMediaPlayAnimation",ctor:i,superName:"PGMAnimation",statics:{TYPE:"pgm-anim-media-play",decodeAnimation:function(e,t){return new i(t)}},props:{encode:function(){var e=a.PGMAnimation.prototype.encode.call(this);return e.entries.type=i.TYPE,e}}}),i)},491:function(e,t,n){var i,r=t,o=n(0),a=n(172);r.PGMEasingType=o.defineEnum("PGMEasingType",{EaseIn:0,EaseOut:1,EaseInAndOut:2}),r.PGMSineEasingFunction=(i=function(e,t,n){this.easing=e,a.PGMUnaryFunction.call(this,t,n)},o.defineClass({name:"PGMSineEasingFunction",ctor:i,superName:"PGMUnaryFunction",statics:{TYPE:"PGMSineEasingFunction",decodeFn:function(e,t,n){var a,s;return null!=(a=o.as(e.entries.easing,"Int"))&&null!=(s=r.PGMEasingType.toCaseValue(a))?new i(s,t,n):null}},props:{apply:function(e){var t=this.domain.boundedU(e);if(0==t||1==t)return this.range.applyU(t);switch(this.easing){case 0:return this.range.applyU(1-Math.cos(t*Math.PI*.5));case 1:return this.range.applyU(Math.sin(t*Math.PI*.5));case 2:return this.range.applyU(.5-.5*Math.cos(t*Math.PI))}},isEqualTo:function(e){var t;return!!(t=o.as(e,i))&&t.easing==this.easing&&a.PGMUnaryFunction.prototype.isEqualTo.call(this,e)},encode:function(){var e=a.PGMUnaryFunction.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.easing=this.easing,e}}}),i)},498:function(e,t,n){var i,r,o=t,a=n(0),s=n(1),c=n(74),l=n(174),u=n(51),d=n(262);o.PGMGraphDecoderNodeEntry=(i=function(){this.constructing=!1,this.node=null},a.defineClass({name:"PGMGraphDecoderNodeEntry",ctor:i}),i),o.PGMGraphDecoder=(r=function(e){var t,n,i,r;this.constructedNodes={},this.constructedTextStyles={},this.dict=e,this.rootEntity=(t=a.as(e.entries[l.PGMGraph.PROP_ROOT_ENTITY],"String"))||null!=t?t:"",(i=c.PGMDict.fromAny(e.entries[l.PGMGraph.PROP_ENTITIES]))?this.entityMap=i:this.entityMap=new c.PGMDict({}),(r=c.PGMDict.fromAny(e.entries[l.PGMGraph.PROP_TEXT_STYLES]))?this.styleMap=r:this.styleMap=new c.PGMDict({}),this.duration=(n=a.as(e.entries[l.PGMGraph.PROP_DURATION],"Double"))||null!=n?n:0},a.defineClass({name:"PGMGraphDecoder",ctor:r,statics:{_implements:function(e){return"IPGMDecoderFactory"==e}},props:{decode:function(){var e;return a.isEmpty(this.rootEntity)?null:(e=this.constructNode(this.rootEntity))?new l.PGMGraph(e,this.duration):null},constructNode:function(e){var t,n;if(t=this.constructedNodes[e])return t.constructing?(s.CoreAssert.fail("You have a cycle in your graph!"),null):t.node;if(n=c.PGMDict.fromAny(this.entityMap.entries[e])){var i=new o.PGMGraphDecoderNodeEntry;return this.constructedNodes[e]=i,i.constructing=!0,i.node=u.PGMNode.decode(n,this),i.constructing=!1,i.node}return s.CoreAssert.fail("Entity "+e+" is referenced but does not exist"),null},constructTextStyle:function(e){var t,n,i;return(n=this.constructedTextStyles[e])?t=n:(i=c.PGMDict.fromAny(this.styleMap.entries[e]))?t=d.PGMTextStyle.decode(i):(s.CoreAssert.fail("Text style with hash "+e+" is referenced but does not exist"),t=null),t}}}),r)},499:function(e,t,n){var i,r=t,o=n(0),a=n(107),s=n(174),c=n(75);r.PGMGraphEncoder=(i=function(){},o.defineClass({name:"PGMGraphEncoder",ctor:i,statics:{kotlin_workaround:null,encode:function(e,t){var n=new c.PGMMutableDict,i=new c.PGMMutableDict;!function e(t){var r,s;if(n.entries[t.entity]=t.encode(),r=o.as(t,a.PGMComposite))for(var c=o.iter(r.children);!c.done;c.next()){var l=c.value;null==n.entries[l.child.entity]&&e(l.child)}if(s=t.getTextStylesReferenced())for(var u=o.iter(s);!u.done;u.next()){var d=u.value;null==i.entries[d.key]&&(i.entries[d.key]=d.encode())}}(e);var r=new c.PGMMutableDict;return r.entries[s.PGMGraph.PROP_ROOT_ENTITY]=e.entity,r.entries[s.PGMGraph.PROP_ENTITIES]=n,r.entries[s.PGMGraph.PROP_TEXT_STYLES]=i,r.entries[s.PGMGraph.PROP_DURATION]=t,r}}}),i)},51:function(e,t,n){var i,r,o,a,s=t,c=n(0),l=n(1),u=n(8),d=n(9),h=n(41),p=n(259),f=n(107),P=n(74),M=n(97),m=n(75);s.IPGMDecoderFactory=c.defineProtocol("IPGMDecoderFactory",{constructNode:"(String) -> PGMNode",constructTextStyle:"(String) -> PGMTextStyle"}),s.PGMNodeMetadata=(i=function(e,t){this.id=e,this.part=t},r={},c.defineClass({name:"PGMNodeMetadata",ctor:i,statics:{EMPTY:{get:function(){return void 0===r.EMPTY&&(r.EMPTY=new i("","")),r.EMPTY}},decode:function(e){var t,n,r;return(r=c.opt(e,function(e){return e.entries}))?new i((t=c.as(r.id,"String"))||null!=t?t:"",(n=c.as(r.part,"String"))||null!=n?n:""):i.EMPTY}},props:{isEmpty:function(){return""==this.id&&""==this.part},encode:function(){var e=new m.PGMMutableDict;return e.entries.id=this.id,e.entries.part=this.part,e}}}),i),s.PGMNode=(o=function(e,t,n,i,r){this.type=e,this.entity=t,this.appearanceHash=o.compressHash(n),this.meta=i,this.animations=r},c.defineClass({name:"PGMNode",ctor:o,statics:{PROP_ENTITY:"entity",PROP_TYPE:"type",PROP_ANIMATIONS:"animations",PROP_META:"meta",compressHash:function(e){var t;return(t=c.opt(u.Host.crypto,function(t){return t.md5(e)}))||null!=t?t:e},decode:function(e,t){var n,i,r;if(null!=(i=c.as(e.entries[o.PROP_ENTITY],"String"))&&null!=(r=c.as(e.entries[o.PROP_TYPE],"String"))){var a,u,d=s.PGMNodeMetadata.decode(P.PGMDict.fromAny(e.entries[o.PROP_META])),m=h.PGMAnimationList.decode(p.PGMArray.fromAny(e.entries[o.PROP_ANIMATIONS]));(a=M.PGMLeaf.decodeNode(e,r,i,d,m,t))?n=a:(u=f.PGMComposite.decodeNode(e,r,i,d,m,t))?n=u:(l.CoreAssert.fail("PGMNode.decode: neither PGMLeaf or PGMComposite recognize node type "+r+"."),n=null)}else l.CoreAssert.fail("PGMNode.decode: missing entity and/or type properties."),n=null;return n}},props:{encode:function(){var e=new m.PGMMutableDict;return e.entries[o.PROP_TYPE]=this.type,e.entries[o.PROP_ENTITY]=this.entity,this.animations.isEmpty||(e.entries[o.PROP_ANIMATIONS]=this.animations.encode()),this.meta.isEmpty()||(e.entries[o.PROP_META]=this.meta.encode()),e},getTextStylesReferenced:function(){return null},clone:function(e){return l.CoreAssert.fail("cloning a base PGMNode?"),new o(this.type,e,this.appearanceHash,this.meta,this.animations)},visit:function(e){e(this)},visitByRef:function(e){},countIf:function(e){var t=0;return this.visit(function(n){e(n)&&(t+=1)}),t},visitEx:function(e,t,n,i,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=d.Matrix2D.Identity),void 0===r&&(r=d.Matrix2D.Identity),e(this,i,r)?null:this}}}),o),s.PGMNullNode=(a=function(e,t){this.kind=t,s.PGMNode.call(this,"null",e,"PGMNullNode("+t+")",s.PGMNodeMetadata.EMPTY,h.PGMAnimationList.EMPTY)},c.defineClass({name:"PGMNullNode",ctor:a,superName:"PGMNode",props:{clone:function(e){return new a(e,this.kind)}}}),a)},55:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(9),c=n(41),l=n(259),u=n(75);r.PGMReference=(i=function(e,t,n){void 0===n&&(n=c.PGMAnimationList.EMPTY),this.child=e,this.placement=t,this.animations=n},o.defineClass({name:"PGMReference",ctor:i,statics:{PROP_REF_ENTITY:"entity",PROP_REF_PLACEMENT:"placement",PROP_ANIMATIONS:"animations",decode:function(e,t){var n,r;if(n=o.opt(e,function(e){return e.entries}))if(null!=(r=o.as(n[i.PROP_REF_ENTITY],"String"))){var u;if(u=t.constructNode(r)){var d,h,p=c.PGMAnimationList.decode(l.PGMArray.fromAny(n[i.PROP_ANIMATIONS]));return d=null!=(h=n[i.PROP_REF_PLACEMENT])?s.Matrix2D.decodeJson(o.as(h,"AnyObject")):s.Matrix2D.Identity,new i(u,d,p)}a.CoreAssert.fail("Failed to instantiate child for entity "+r)}else a.CoreAssert.fail("PGMReference.decode: missing id and/or entity");else a.CoreAssert.fail("PGMReference.decode: not a dictionary");return null}},props:{encode:function(){var e=new u.PGMMutableDict;return this.animations.isEmpty||(e.entries[i.PROP_ANIMATIONS]=this.animations.encode()),e.entries[i.PROP_REF_ENTITY]=this.child.entity,this.placement.isIdentity||(e.entries[i.PROP_REF_PLACEMENT]=this.placement.encodeJson()),e},visit:function(e){e(this),this.child.visitByRef(e)}}}),i)},667:function(e,t,n){var i,r=t,o=n(0),a=n(172);r.PGMPeriodicWaveform=o.defineEnum("PGMPeriodicWaveform",{Sine:0}),r.PGMPeriodicFunction=(i=function(e,t,n,i){this.waveform=n,this.period=i,a.PGMUnaryFunction.call(this,e,t)},o.defineClass({name:"PGMPeriodicFunction",ctor:i,superName:"PGMUnaryFunction",statics:{TYPE:"PGMPeriodicFunction",decodeFn:function(e,t,n){var a,s,c;return null!=(a=o.as(e.entries.waveform,"Int"))&&null!=(s=r.PGMPeriodicWaveform.toCaseValue(a))&&null!=(c=o.as(e.entries.period,"Double"))?new i(t,n,s,c):null}},props:{apply:function(e){var t=(e-this.domain.start)%this.period/this.period;switch(this.waveform){case 0:return this.range.applyU(.5+.5*Math.sin(t*Math.PI*2))}},isEqualTo:function(e){var t;return!!(t=o.as(e,i))&&t.waveform==this.waveform&&t.period==this.period&&a.PGMUnaryFunction.prototype.isEqualTo.call(this,e)},encode:function(){var e=a.PGMUnaryFunction.prototype.encode.call(this);return e.entries.type=i.TYPE,e.entries.waveform=this.waveform,e.entries.period=this.period,e}}}),i)},668:function(e,t,n){var i,r=t,o=n(0),a=n(97);r.PGMAudio=(i=function(e,t,n,r,o){this.contentID=o,a.PGMLeaf.call(this,i.TYPE,e,"PGMAudio(contentID:"+o+";bounds:("+r.asString+"))",t,n,r)},o.defineClass({name:"PGMAudio",ctor:i,superName:"PGMLeaf",statics:{TYPE:"pgm-audio",decodeLeaf:function(e,t,n,r,a){var s;return null!=(s=o.as(e.entries["content-id"],"String"))?new i(t,n,r,a,s):null}},props:{encode:function(){var e=a.PGMLeaf.prototype.encode.call(this);return e.entries["content-id"]=this.contentID,e},clone:function(e){return new i(e,this.meta,this.animations,this.bounds,this.contentID)}}}),i)},669:function(e,t,n){var i,r,o=t,a=n(0),s=n(1),c=n(56),l=n(9),u=n(41),d=n(257),h=n(141),p=n(107),f=n(173),P=n(208),M=n(174),m=n(97),G=n(51),y=n(209),v=n(55),T=n(263),g=n(210),A=n(260),S=n(142),F=n(211),w=n(261),C=n(171),E=n(353),R=n(172),D=n(10);o.EntityMap=(i=function(e){this.node=e;var t={};!function e(n){var i;null==t[n.entity]&&(t[n.entity]=n,(i=a.as(n,p.PGMComposite))&&i.children.forEach(function(t){return e(t.child)}))}(e),this.entityMap=a.clone(t)},a.defineClass({name:"EntityMap",ctor:i,props:{findEntity:function(e){return this.entityMap[e]}}}),i),o.PGMGraphDiffer=(r=function(e,t,n,i){void 0===i&&(i=null),this.graphA=e,this.graphB=t,this.duration=n,this.timeFn=i||new R.PGMUnaryFunction(new T.PGMRange(0,n),T.PGMRange.UNIT);var r=new o.EntityMap(e.root),c={};!function e(t){var n,i,o;if(i=c[t.entity])n=i;else if(o=r.findEntity(t.entity)){var l;if(o.appearanceHash==t.appearanceHash)n=o;else if(l=a.as(t,m.PGMLeaf))n=l.clone(l.entity+"-after");else if(f=a.as(t,p.PGMComposite)){for(var u=[],d=a.iter(f.children);!d.done;d.next()){var h=e((G=d.value).child);u.push(new v.PGMReference(h,G.placement))}n=f.cloneWithChildren(t.entity+"-after",a.clone(u))}else s.CoreAssert.fail("not a leaf or composite? huh?"),n=t}else{var f;if(t instanceof m.PGMLeaf)n=t;else if(f=a.as(t,p.PGMComposite)){u=[];for(var P=!1,M=a.iter(f.children);!M.done;M.next()){var G;(h=e((G=M.value).child))===G.child?u.push(G):(P=!0,u.push(new v.PGMReference(h,G.placement)))}n=P?f.cloneWithChildren(t.entity,a.clone(u)):t}else s.CoreAssert.fail("not a leaf or composite, huh?"),n=t}return c[t.entity]=n,n}(t.root),this.safeB=a.clone(c)},a.defineClass({name:"PGMGraphDiffer",ctor:r,props:{getTransitionGraph:function(){var e=this.combineRecursive(new v.PGMReference(this.graphA.root,l.Matrix2D.Identity),new v.PGMReference(this.graphB.root,l.Matrix2D.Identity));return new M.PGMGraph(e.child,this.calculateDuration(e))},calculateDuration:function(e){var t=0;return e.visit(function(e){for(var n=a.iter(e.animations.animations);!n.done;n.next()){var i=n.value;t=Math.max(t,i.timeFn.domain.end)}}),t},combineRecursive:function(e,t){var n,i;if(e.child.entity==t.child.entity)if((n=a.as(e.child,p.PGMComposite))&&(i=a.as(t.child,p.PGMComposite))){var r,o,s,c,l,u,d=null,P=a.clone(this.combineSameEntityCompositeChildren(n,i));if((r=a.as(n,S.PGMSimpleGroup))&&(o=a.as(i,S.PGMSimpleGroup))?d=this.combineSameEntitySimpleGroups(r,o,a.clone(P)):(s=a.as(n,f.PGMFilter))&&(c=a.as(i,f.PGMFilter))?d=this.combineSameEntityFilters(s,c,a.clone(P)):(l=a.as(n,h.PGMClip))&&(u=a.as(i,h.PGMClip))&&(d=this.combineSameEntityClips(l,u,a.clone(P))),null!=d)return this.combineTransforms(e,t,d)}else if(e.child instanceof m.PGMLeaf&&t.child instanceof m.PGMLeaf)return this.combineSameEntityLeaves(e,t);return this.createCrossFade(e,t)},combineSameEntityFilters:function(e,t,n){return e.spec.appearanceHash==t.spec.appearanceHash?null==n?e:e.cloneWithChildren(e.entity,a.clone(n)):null},combineSameEntityClips:function(e,t,n){return e.clipPath.appearanceHash==t.clipPath.appearanceHash?null==n?e:e.cloneWithChildren(e.entity,a.clone(n)):null},combineSameEntitySimpleGroups:function(e,t,n){return null==n?e:e.cloneWithChildren(e.entity,a.clone(n))},combineTransforms:function(e,t,n){return e.placement.equal(t.placement)?n===e.child?e:new v.PGMReference(n,e.placement):new v.PGMReference(n,e.placement,new u.PGMAnimationList([new C.PGMTransformAnimation(this.timeFn,E.PGMUtils.calcXBoundsForRef(e),E.PGMUtils.calcXBoundsForRef(t))]))},combineSameEntityCompositeChildren:function(e,t){for(var n=0,i=0,r=[],o=0;;)if(n<e.children.length&&i<t.children.length){var a=e.children[n],c=t.children[i];if(a.child.entity==c.child.entity){var l=this.combineRecursive(a,c);r.push(l),l===a&&(o+=1),n+=1,i+=1}else{var u=t.indexOfChild(a.child.entity),d=e.indexOfChild(c.child.entity);if(null!=d&&null!=u){var h=d-n,p=u-i;h<0?(r.push(new v.PGMReference(this.createFade(this.safeB[c.child.entity],!1),c.placement)),i+=1):p<0?(r.push(new v.PGMReference(this.createFade(a.child,!1),a.placement)),n+=1):p>h?(r.push(new v.PGMReference(this.createFade(a.child,!0),a.placement)),n+=1):(r.push(new v.PGMReference(this.createFade(this.safeB[c.child.entity],!0),c.placement)),i+=1)}else{var f;null==d&&((f=this.safeB[c.child.entity])?r.push(new v.PGMReference(this.createFade(f,!1),c.placement)):s.CoreAssert.fail("did not find a safe "+c.child.entity),i+=1),null==u&&(r.push(new v.PGMReference(this.createFade(a.child,!0),a.placement)),n+=1)}}}else if(n<e.children.length)a=e.children[n],r.push(new v.PGMReference(this.createFade(a.child,!0),a.placement)),n+=1;else{if(!(i<t.children.length))break;c=t.children[i],r.push(new v.PGMReference(this.createFade(this.safeB[c.child.entity],!1),c.placement)),i+=1}return o==r.length?null:r},safeBRef:function(e){var t;return(t=this.safeB[e.child.entity])?t===e.child?e:new v.PGMReference(t,e.placement):(s.CoreAssert.fail("should always have a safe reference!"),e)},combineSameEntityLeaves:function(e,t){var n,i,r,o;return e.child.appearanceHash==t.child.appearanceHash?this.combineTransforms(e,t,e.child):(n=a.as(e.child,F.PGMText))&&(i=a.as(t.child,F.PGMText))?n.canInterpolate(i)?this.combineTransforms(e,t,n.withAnimations(new u.PGMAnimationList([new w.PGMTextAnimation(this.timeFn,i.bounds,i.style)]).merge(n.animations))):this.createCrossFade(e,t):(r=a.as(e.child,g.PGMShape))&&(o=a.as(t.child,g.PGMShape))&&r.path.appearanceHash==o.path.appearanceHash?this.combineTransforms(e,t,r.withAnimations(new u.PGMAnimationList([new A.PGMShapeAnimation(this.timeFn,o.color,o.bounds)]).merge(r.animations))):this.createCrossFade(e,t)},createFade:function(e,t){var n=t?"fadeout":"fadein";return new f.PGMFilter(n+"-"+c.GUIDUtils.makeGUID(),new G.PGMNodeMetadata(e.meta.id,"fadeout"),new u.PGMAnimationList([new P.PGMFilterAnimation(this.timeFn,new y.PGMOpacityFilterSpec(t?1:0),new y.PGMOpacityFilterSpec(t?0:1))]),[new v.PGMReference(e,l.Matrix2D.Identity)],new y.PGMOpacityFilterSpec(t?1:0))},createCrossFade:function(e,t){var n,i,r=this.safeB[t.child.entity];if(e.child.entity==t.child.entity){var o=E.PGMUtils.calcBounds(e.child,l.Matrix2D.Identity),a=E.PGMUtils.calcBounds(t.child,l.Matrix2D.Identity);function s(e,t,n){if(t.width==e.width&&t.height==e.height)return new C.PGMTransformedBounds(n,t);var i=t.evalXY(0,0),r=l.Matrix2D.scalingXYfromPoint(i,t.width/e.width,t.height/e.height);return new C.PGMTransformedBounds(r.concat(n),D.TheoRect.fromXYWH(i.x,i.y,e.width,e.height))}n=new v.PGMReference(e.child,e.placement,new u.PGMAnimationList([new C.PGMTransformAnimation(this.timeFn,E.PGMUtils.calcXBoundsForRef(e),s(o,a,t.placement))])),i=new v.PGMReference(r,t.placement,new u.PGMAnimationList([new C.PGMTransformAnimation(this.timeFn,s(a,o,e.placement),E.PGMUtils.calcXBoundsForRef(t))]))}else n=e,i=t;return new v.PGMReference(new f.PGMFilter("crossfade-"+c.GUIDUtils.makeGUID(),G.PGMNodeMetadata.EMPTY,new u.PGMAnimationList([new P.PGMFilterAnimation(this.timeFn,new d.PGMBlendFilterSpec([1,0]),new d.PGMBlendFilterSpec([0,1]))]),[n,i],new d.PGMBlendFilterSpec([1,0])),l.Matrix2D.Identity)}}}),r)},670:function(e,t,n){var i,r=t,o=n(0),a=n(1),s=n(9),c=n(41),l=n(257),u=n(141),d=n(107),h=n(173),p=n(208),f=n(174),P=n(209),M=n(55),m=n(210),G=n(260),y=n(142),v=n(211),T=n(261),g=n(171);r.transformValuesToMatrix=function(e){return e.ordering==s.TransformValuesOrdering.SKRT?s.Matrix2D.Identity.scaleXY(e.xscale,e.yscale).skewTo(e.skew).rotate(e.rotCosine,e.rotSine).translateXY(e.tx,e.ty):s.Matrix2D.Identity.rotate(e.rotCosine,e.rotSine).skewTo(e.skew).scaleXY(e.xscale,e.yscale).translateXY(e.tx,e.ty)},r.interpolateBetweenXFormedBounds=function(e,t,n){if(n<=0)return e.placement;if(n>=1)return t.placement;var i=e.placement.transformValues,o=t.placement.transformValues,c=Math.atan2(i.rotSine,i.rotCosine),l=Math.atan2(o.rotSine,o.rotCosine)-c;l>Math.PI?l-=Math.PI:l<-Math.PI&&(l+=Math.PI);var u=c+n*l;a.CoreAssert.isTrue(i.ordering==o.ordering,"can't interpolate between different orderings");var d=new s.TransformValues(i.ordering,r.interp(i.xscale,o.xscale,n),r.interp(i.yscale,o.yscale,n),r.interp(i.skew,o.skew,n),Math.cos(u),Math.sin(u),0,0),h=r.transformValuesToMatrix(d),p=e.bounds.interpolate(t.bounds,n),f=e.placement.transformPoint(e.bounds.center),P=t.placement.transformPoint(t.bounds.center),M=h.transformPoint(p.center),m=f.interpolate(P,n);return h.translate(m.subtract(M))},r.interp=function(e,t,n){return e+(t-e)*n},r.bound01=function(e){return e<=0?0:e>=1?1:e},r.PGMGraphEvaluator=(i=function(e){this.graph=e},o.defineClass({name:"PGMGraphEvaluator",ctor:i,props:{evaluateAtTime:function(e){return new f.PGMGraph(this.evaluateAtTimeRecursive(this.graph.root,e),0)},evaluateAtTimeRecursive:function(e,t){var n,i,s;if(e.animations.isEmpty)return(f=o.as(e,d.PGMComposite))&&(g=this.evaluateGroupChildren(f,t))?(n=o.as(f,h.PGMFilter))?new h.PGMFilter(n.entity,n.meta,c.PGMAnimationList.EMPTY,o.clone(g),n.spec):(i=o.as(f,u.PGMClip))?new u.PGMClip(i.entity,i.meta,c.PGMAnimationList.EMPTY,o.clone(g),i.clipPath):(s=o.as(f,y.PGMSimpleGroup))?new y.PGMSimpleGroup(s.entity,s.meta,c.PGMAnimationList.EMPTY,o.clone(g)):(a.CoreAssert.fail("evaluateAtTimeRecursive: composite is not one of known types"),f):e;var f,M=e;if(f=o.as(e,d.PGMComposite)){var g,A,S;(S=this.evaluateGroupChildren(f,t))?(g=o.clone(S),A=f.cloneWithChildren(f.entity,o.clone(g))):(g=o.clone(f.children),A=f);for(var F=o.iter(e.animations.animations);!F.done;F.next()){var w,C;if((B=F.value).timeFn.domain.contains(t)&&(w=o.as(B,p.PGMFilterAnimation))&&(C=o.as(e,h.PGMFilter))){var E,R,D,N,O=C.spec,I=r.bound01(w.timeFn.apply(t));if((E=o.as(w.startSpec,P.PGMOpacityFilterSpec))&&(R=o.as(w.endSpec,P.PGMOpacityFilterSpec)))O=new P.PGMOpacityFilterSpec(r.interp(E.opacity,R.opacity,I));else if((D=o.as(C.spec,l.PGMBlendFilterSpec))&&(N=o.as(w.endSpec,l.PGMBlendFilterSpec))){for(var _=[],b=o.iter(o.range(0,D.weights.length,!1));!b.done;b.next()){var x=b.value;_.push(r.interp(D.weights[x],N.weights[x],I))}O=new l.PGMBlendFilterSpec(o.clone(_))}A=new h.PGMFilter(C.entity,C.meta,c.PGMAnimationList.EMPTY,o.clone(g),O)}}M=A}else for(var Y=o.iter(e.animations.animations);!Y.done;Y.next()){var B,k,L,U,X;if((B=Y.value).timeFn.domain.contains(t))I=r.bound01(B.timeFn.apply(t)),(k=o.as(B,T.PGMTextAnimation))&&(L=o.as(M,v.PGMText))?M=new v.PGMText(L.entity,L.meta,c.PGMAnimationList.EMPTY,L.bounds.interpolate(k.endBounds,I),L.text,L.style.interpolate(k.endStyle,I)):(U=o.as(B,G.PGMShapeAnimation))&&(X=o.as(M,m.PGMShape))&&(M=new m.PGMShape(X.entity,X.meta,c.PGMAnimationList.EMPTY,X.bounds.interpolate(U.endBounds,I),X.path,X.color.interpolate(U.endColor,I)))}return M},evaluateGroupChildren:function(e,t){var n=this,i=[],a=0;return e.children.forEach(function(e){for(var s=n.evaluateAtTimeRecursive(e.child,t),c=null,l=o.iter(e.animations.animations);!l.done;l.next()){var u,d=l.value;(u=o.as(d,g.PGMTransformAnimation))&&u.timeFn.domain.contains(t)&&(c=new M.PGMReference(s,r.interpolateBetweenXFormedBounds(u.startXBounds,u.endXBounds,r.bound01(u.timeFn.apply(t)))))}null!=c?i.push(c):s===e.child?(i.push(e),a+=1):i.push(new M.PGMReference(s,e.placement))}),a==i.length?null:i}}}),i)},671:function(e,t,n){var i,r,o,a=t,s=n(0);a.PGMExportSettings=(i=function(e){this.asDynamic=e},r={},s.defineClass({name:"PGMExportSettings",ctor:i,superName:"CoreObject",statics:{STATIC:{get:function(){return void 0===r.STATIC&&(r.STATIC=new i(!1)),r.STATIC}},DYNAMIC:{get:function(){return void 0===r.DYNAMIC&&(r.DYNAMIC=new i(!0)),r.DYNAMIC}}},props:{asString:{get:function(){return this.asDynamic}}}}),i),a.PGMSource=(o=function(){},s.defineClass({name:"PGMSource",ctor:o,props:{getGraph:function(e){return null}}}),o)},74:function(e,t,n){var i,r=t,o=n(0);r.PGMDict=(i=function(e){this.entries=o.clone(e)},o.defineClass({name:"PGMDict",ctor:i,statics:{fromAny:function(e){var t;return(t=o.as(e,["Dictionary","String","Any"]))?new i(o.clone(t)):null}}}),i)},75:function(e,t,n){var i,r=t,o=n(0),a=n(74),s=n(258);r.PGMMutableDict=(i=function(){this.entries={}},o.defineClass({name:"PGMMutableDict",ctor:i,props:{flatten:function(){for(var e={},t=o.iter(this.entries);!t.done;t.next()){var n,r,a=t.key,c=t.value;(n=o.as(c,i))?e[a]=o.clone(n.flatten()):(r=o.as(c,s.PGMMutableArray))?e[a]=o.clone(r.flatten()):e[a]=c}return e},immutable:function(){return new a.PGMDict(o.clone(this.flatten()))}}}),i)},96:function(e,t,n){var i,r=t,o=n(0),a=n(9),s=n(41),c=n(173),l=n(208),u=n(51),d=n(209),h=n(55),p=n(263),f=n(171),P=n(353),M=n(172),m=n(10);r.FormaToPGMUtils=(i=function(){},o.defineClass({name:"FormaToPGMUtils",ctor:i,statics:{applyOpacityAnimations:function(e,t,n){var i,r,f,P=t.style.opacity,m=[];if(e.asDynamic&&(P=t.style.opacity,f=t.animation))for(var G=o.iter(o.range(0,f.keyFrames.length-2,!0));!G.done;G.next()){var y=G.value,v=f.keyFrames[y],T=f.keyFrames[y+1],g=(i=o.opt(v.style,function(e){return e.opacity}))||null!=i?i:P,A=(r=o.opt(T.style,function(e){return e.opacity}))||null!=r?r:P;g!=A&&m.push(new l.PGMFilterAnimation(new M.PGMUnaryFunction(new p.PGMRange(v.time.seconds,T.time.seconds),p.PGMRange.UNIT),new d.PGMOpacityFilterSpec(g),new d.PGMOpacityFilterSpec(A)))}var S=n;return(P<1||0==!m.length)&&(S=new h.PGMReference(new c.PGMFilter(n.child.entity+"-opacity",new u.PGMNodeMetadata(t.formaID,"opacity"),s.PGMAnimationList.fromArray(m),[S],new d.PGMOpacityFilterSpec(P)),a.Matrix2D.Identity)),S},applyTransformAnimations:function(e,t,n){if(e.asDynamic){var i,r=[];if(i=t.animation)for(var c=o.iter(o.range(0,i.keyFrames.length-2,!0));!c.done;c.next()){var l,u,d=c.value,G=i.keyFrames[d],y=i.keyFrames[d+1];(l=G.placement)&&(u=y.placement)&&(l.isIdentity&&u.isIdentity||r.push(new f.PGMTransformAnimation(new M.PGMUnaryFunction(new p.PGMRange(G.time.seconds,y.time.seconds),p.PGMRange.UNIT),new f.PGMTransformedBounds(l.concat(n.placement),P.PGMUtils.calcBounds(n.child,a.Matrix2D.Identity)||m.TheoRect.Zero),new f.PGMTransformedBounds(u.concat(n.placement),P.PGMUtils.calcBounds(n.child,a.Matrix2D.Identity)||m.TheoRect.Zero))))}return 0==r.length?n:new h.PGMReference(n.child,n.placement,s.PGMAnimationList.fromArray(r))}return n},applyCommonAnimations:function(e,t,n){var r=n;return r=i.applyOpacityAnimations(e,t,r),r=i.applyTransformAnimations(e,t,r)}}}),i)},97:function(e,t,n){var i,r=t,o=n(0),a=n(264),s=n(51),c=n(210),l=n(351),u=n(211),d=n(352),h=n(10);r.PGMLeaf=(i=function(e,t,n,i,r,o){this.bounds=o,s.PGMNode.call(this,e,t,n,i,r)},o.defineClass({name:"PGMLeaf",ctor:i,superName:"PGMNode",statics:{PROP_BOUNDS:"bounds",decodeNode:function(e,t,n,r,s,p){var f;if(f=h.TheoRect.decodeJson(o.as(e.entries[i.PROP_BOUNDS],"AnyObject")))switch(t){case"pgm-image":return a.PGMImage.decodeLeaf(e,n,r,s,f);case"pgm-video":case"pgm-audio":return d.PGMVideo.decodeLeaf(e,n,r,s,f);case"pgm-svg":return l.PGMSVG.decodeLeaf(e,n,r,s,f);case"pgm-text":return u.PGMText.decodeLeaf(e,n,r,s,f,p);case"pgm-shape":return c.PGMShape.decodeLeaf(e,n,r,s,f);default:return null}return null}},props:{encode:function(){var e=s.PGMNode.prototype.encode.call(this);return e.entries[i.PROP_BOUNDS]=this.bounds.encodeJson(),e}}}),i)}}]);
//# sourceMappingURL=logomaker-entry_3ed7103a-3145d7eb.js.map