(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{361:function(t,e,r){var i=r(59),n=r(362),s=r(64),o={PRIVATE:void 0,SHARED_BY_USER:"sharedByUser",SHARED_WITH_USER:"sharedWithUser"};function a(t,e,r,i,s){"use strict";this._options=s||{},i?(this._assetId=i,t&&(this._name=t),e&&(this._type=e),r&&(this._id=r)):e&&(this._current=new n,t&&(this._current._data.name=t),this._current._data.type=e,r&&(this._current.compositeId=r),this._current._data.state="modified",this._current._setDirty(!0)),this._options.xhrBaseBranchSupport&&(this._baseBranchData=void 0,this._pushedBranchData=void 0,this._pulledBranchData=void 0),this._collaborationType=o.PRIVATE}a.newCompositeAsCopyOf=function(t,e,r,o,c){"use strict";var u=t._core;if(u||t.current&&(u=t.current._core),!u)throw new i(i.INVALID_PARAMS,"compositeBranchOrElement must be a branch, an element or a composite with a current branch.");var h=new a(void 0,void 0,void 0,void 0,c);return h._current=n._newBranchAsCopyOfCore(u),h.id=o||s.generateUuid(),e&&(h.name=e),r&&(h.type=r),h},a.COLLABORATION=o,Object.defineProperties(a.prototype,{id:{get:function(){"use strict";return this._current?this._current.compositeId:this._id},set:function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.compositeId=t),this._id=t}},name:{get:function(){"use strict";return this._current?this._current.name:this._name},set:function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.name=t),this._name=t}},type:{get:function(){"use strict";return this._current?this._current.type:this._type},set:function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.type=t),this._type=t}},assetId:{get:function(){"use strict";return this._current?this._current.compositeAssetId:this._assetId},set:function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.compositeAssetId=t),this._assetId=t}},collaborationType:{get:function(){"use strict";return this._current?this._current._collaborationType:this._collaborationType},set:function(t){"use strict";if(t!==o.PRIVATE&&t!==o.SHARED_BY_USER&&t!==o.SHARED_WITH_USER)throw new i(i.INVALID_PARAMS,"Invalid value: ."+t);this._current&&(this._current._collaborationType=t),this._collaborationType=t}},clientDataString:{get:function(){"use strict";return this._current?this._current._clientDataString:this._clientDataString},set:function(t){"use strict";if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Invalid clientDataString: must be a string or undefined.");var e=this._options.maxClientDataLength||1024;if(t&&t.length>e)throw new i(i.INVALID_PARAMS,"Invalid clientDataString: cannot be greater than 1KB");this._current&&(this._current._clientDataString=t),this._clientDataString=t}},isBound:{get:function(){"use strict";return this._current&&this._current.isBound||!this._current&&this._assetId},set:function(){"use strict";throw new i(i.READ_ONLY,"Cannot set the property isBound. Use resetIdentity or resetBinding instead.")}},current:{get:function(){"use strict";return this._current},set:function(t){"use strict";throw new i(i.READ_ONLY,'Property "current" is read-only.')}}}),a.prototype.loadBaseBranch=function(t){"use strict";if(!this._baseBranchData)throw new i(i.NO_BASE_BRANCH_DATA,"No base branch data.");var e,r;try{r=new n(void 0,!0).parse(this._baseBranchData)}catch(t){e=t}t(e,r)},a.prototype.resolvePullWithBranch=function(t,e){"use strict";if(!t)throw new i(i.INVALID_PARAMS,"Need a branch.");if(t===this._current)throw new i(i.INVALID_PARAMS,"Cannot resolve current.");var r=this;if(this._options.xhrBaseBranchSupport&&(this._baseBranchData=this._pulledBranchData,this._pulledBranchData=void 0),t.readOnly=!1,t._collaborationType=r.collaborationType,t._clientDataString=r.clientDataString,r._current=t,!e)return this._current;e(void 0,this._current)},a.prototype.acceptPush=function(t){"use strict";var e,r=this._pushJournal;if(r)try{r.applyToBranch(this._current,!0),this._options.xhrBaseBranchSupport&&(this._baseBranchData=this._pushedBranchData,this._pushedBranchData=void 0),this._pushJournal=void 0,t&&t()}catch(t){e=t}else t&&t();if(e){if(!t)throw e;t(e)}},a.prototype.resetBinding=function(t){"use strict";delete this._assetId,this._current&&this._current._resetBinding(),this._baseBranchData=void 0,this._pushedBranchData=void 0,this._pulledBranchData=void 0,t&&t()},a.prototype.resetIdentity=function(t){"use strict";delete this._assetId,this._current?(this._current._resetIdentity(),this._id=this._current.compositeId):this._id=s.generateUuid(),this._baseBranchData=void 0,this._pushedBranchData=void 0,this._pulledBranchData=void 0,t&&t()},a.prototype._setPath=function(t){"use strict";this._path=t},t.exports=a},363:function(t,e,r){var i=r(59),n=r(64);function s(t,e){"use strict";t?this._setData(t):this._data={},this._readOnly=e}var o={unmodified:"unmodified",modified:"modified",pendingDelete:"pendingDelete",committedDelete:"committedDelete"};s.STATES=o,s._UploadResults=function(t){"use strict";this.compositeId=t,this.records={}},s._UploadRecord=function(t,e,r,i,n,s){"use strict";this.id=t,this.etag=e,this.version=r,this.md5=i,this.length=n,this.type=s},Object.defineProperties(s.prototype,{id:{get:function(){"use strict";return this._data.id},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(this._owner)throw new i(i.READ_ONLY,"Cannot change the id of a component that is part of a branch or element.");if("string"!=typeof t||""===t)throw new i(i.INVALID_PARAMS,"Expecting a non-empty string.");this._data.id=t,this._setDirty()}},name:{get:function(){"use strict";return this._data.name},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.name=t,this._setDirty()}},type:{get:function(){"use strict";return this._data.type},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new i(i.INVALID_PARAMS,"Expecting a non-empty string.");this._data.type=t,this._setDirty()}},path:{get:function(){"use strict";return this._data.path},set:function(t){"use strict";if(this._data.path!==t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(!n.isValidPath(t))throw new i(i.INVALID_PARAMS,"Expecting a valid path.");this._owner?this._owner._core._setPathOfComponent(this,t):(this._data.path=t,this._parentPath=""),this._setDirty()}}},parentPath:{get:function(){"use strict";return this._parentPath},set:function(t){"use strict";throw new i(i.READ_ONLY,"parentPath is read-only.")}},absolutePath:{get:function(){"use strict";return this._data.path&&this._owner?n.appendPathElements(this._parentPath,this._data.path):void 0},set:function(t){"use strict";throw new i(i.READ_ONLY,"absolutePath is read-only.")}},relationship:{get:function(){"use strict";return this._data.rel},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.rel=t,this._setDirty()}},state:{get:function(){"use strict";return this._data.state},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");if(!o.hasOwnProperty(t))throw new i(i.INVALID_PARAMS,'State must be "modified", "unmodified", "pendingDelete", or "committedDelete".');this._data.state=t,this._setDirty()}},etag:{get:function(){"use strict";return this._data.etag},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.etag=t,this._setDirty()}},md5:{get:function(){"use strict";return this._data.md5},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.md5=t,this._setDirty()}},version:{get:function(){"use strict";return this._data.version},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(void 0!==t&&"string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.version=t,this._setDirty()}},length:{get:function(){"use strict";return this._data.length},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("number"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a number or undefined.");this._data.length=t,this._setDirty()}},width:{get:function(){"use strict";return this._data.width},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("number"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a number or undefined.");this._data.width=t,this._setDirty()}},height:{get:function(){"use strict";return this._data.height},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("number"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a number or undefined.");this._data.height=t,this._setDirty()}},assetId:{get:function(){"use strict";return this._assetId},set:function(t){"use strict";if(t!==this._assetId){if(this._assetId)throw new i(i.INVALID_STATE,"assetId property cannot be changed.");this._assetId=t}}}});var a={name:!0,id:!0,state:!0,path:!0,rel:!0,type:!0,etag:!0,length:!0,version:!0,md5:!0,width:!0,height:!0};s.prototype.getCustomKeys=function(){"use strict";var t,e=[],r=Object.keys(this._data),i=r.length;for(t=0;t<i;t++){var n=r[t];a[n]||e.push(n)}return e},s.prototype.getValue=function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');return this._data[t]},s.prototype.setValue=function(t,e){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');this._data[t]=e,this._setDirty()},s.prototype.removeValue=function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');delete this._data[t],this._setDirty()},s.prototype.getLink=function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');return this._data._links?this._data._links[t]:void 0},s.prototype.setLink=function(t,e){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("object"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "link" must be an object.');if("string"!=typeof e)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');var r=this._data._links;r||(r=this._data._links={}),r[e]=t,this._setDirty()},s.prototype.removeLink=function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');var e=this._data._links;e&&(delete e[t],Object.keys(e).length<1&&delete this._data._links,this._setDirty())},s.prototype.isEqualTo=function(t,e){"use strict";return n.objectsEqual(this._data,t._data,e)},s.prototype._setData=function(t){"use strict";var e=this._verify(t);if(null===e)return this._data=t,this;throw e},s.prototype._setDirty=function(){"use strict";this._owner&&this._owner._setDirty()},s.prototype._verify=function(t){"use strict";return"string"!=typeof t.id?new i(i.INVALID_DATA,"Component is missing an id of type string"):null},t.exports=s},536:function(t,e,r){var i=r(59),n=r(64);function s(t,e,r){"use strict";t?this._setData(t):this._data={},this._readOnly=e,this._isRoot=r}s.ROOT_PATH="/",Object.defineProperties(s.prototype,{id:{get:function(){"use strict";return this._data.id},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(this._owner)throw new i(i.READ_ONLY,"Cannot change the id of a node that is part of a branch or element.");if("string"!=typeof t||""===t)throw new i(i.INVALID_PARAMS,"Expecting a non-empty string.");this._data.id=t,this._setDirty()}},name:{get:function(){"use strict";return this._data.name},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.name=t,this._setDirty()}},type:{get:function(){"use strict";return this._data.type},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.type=t,this._setDirty()}},relationship:{get:function(){"use strict";return this._data.rel},set:function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.rel=t,this._setDirty()}},path:{get:function(){"use strict";return this._isRoot?"/":this._data.path},set:function(t){"use strict";if(t!==this.path){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(this._isRoot)throw new i(i.READ_ONLY,"Cannot change the path of the root node.");if(t&&!n.isValidPath(t))throw new i(i.INVALID_PARAMS,"Expecting a valid path or undefined.");this._owner?this._owner._setPathOfNode(this,t||void 0):(this._data.path=t||void 0,this._parentPath=""),this._setDirty()}}},parentPath:{get:function(){"use strict";return this._parentPath},set:function(t){"use strict";throw new i(i.READ_ONLY,"parentPath is read-only.")}},absolutePath:{get:function(){"use strict";var t=this.path;return this._isRoot?t:t&&this._owner?n.appendPathElements(this._parentPath,t):void 0},set:function(t){"use strict";throw new i(i.READ_ONLY,"absolutePath is read-only.")}},isRoot:{get:function(){"use strict";return this._isRoot},set:function(t){"use strict";throw new i(i.READ_ONLY,"isRoot is read-only.")}}}),s.prototype.getLink=function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');return this._data._links?this._data._links[t]:void 0},s.prototype.setLink=function(t,e){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("object"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "link" must be an object.');if("string"!=typeof e)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');var r=this._data._links;r||(r=this._data._links={}),r[e]=t,this._setDirty()},s.prototype.removeLink=function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');var e=this._data._links;e&&(delete e[t],Object.keys(e).length<1&&delete this._data._links,this._setDirty())};var o={components:!0,children:!0,"manifest-format-version":!0,id:!0,name:!0,type:!0,state:!0,local:!0},a={components:!0,children:!0,rel:!0,path:!0,id:!0,name:!0,type:!0};s.prototype.getCustomKeys=function(){"use strict";var t,e=[],r=Object.keys(this._data),i=r.length;for(t=0;t<i;t++){var n=r[t];(this._isRoot?o[n]:a[n])||e.push(n)}return e},s.prototype.getValue=function(t){"use strict";if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');if("children"===t||"components"===t)throw new i(i.INVALID_PARAMS,"Illegal key");return this._data[t]},s.prototype.setValue=function(t,e){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');if("children"===t||"components"===t)throw new i(i.INVALID_PARAMS,"Illegal key");this._data[t]=e,this._setDirty()},s.prototype.removeValue=function(t){"use strict";if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');if("children"===t||"components"===t)throw new i(i.INVALID_PARAMS,"Illegal key");delete this._data[t],this._setDirty()},s.prototype.copy=function(){"use strict";var t=null,e=this._data.children,r=this._data.components;try{e&&delete this._data.children,r&&delete this._data.components,t=new s(JSON.parse(JSON.stringify(this._data)))}finally{e&&(this._data.children=e),r&&(this._data.components=r)}return t},s.prototype.isEqualTo=function(t,e,r){"use strict";return this._isEqual(this._data,t._data,n.merge({children:!0,components:!0},e),r)},s.prototype._isEqual=function(t,e,r,i){"use strict";var s,o,a,c,u,h,_;if(!n.objectsEqual(t,e,r))return!1;if(o=t.components,a=e.components,(c=o?o.length:0)!==(a?a.length:0))return!1;if(c)for(s=0;s<c;s++){for(u=o[s],h=null,_=0;_<c;_++)if(u.id===a[_].id){h=a[_];break}if(!h)return!1;if(!n.objectsEqual(u,h,i))return!1}if(o=t.children,a=e.children,(c=o?o.length:0)!==(a?a.length:0))return!1;if(c)for(s=0;s<c;s++)if(!this._isEqual(o[s],a[s],r,i))return!1;return!0},s.prototype._setData=function(t){"use strict";var e=this._verify(t);if(null===e)return this._data=t,this;throw e},s.prototype._verify=function(t){"use strict";return"string"!=typeof t.id?new i(i.INVALID_DATA,"Node is missing an id of type string"):null},s.prototype._setDirty=function(){"use strict";this._owner&&this._owner._setDirty()},t.exports=s},539:function(t,e,r){var i=r(535),n=r(59),s=r(64);function o(t,e,r){"use strict";(this._owner=e,t)?t=this._setData(t,r):(t={id:s.generateUuid()},this._core=new i(t,this,r),this._data=t)}Object.defineProperties(o.prototype,{rootNode:{get:function(){"use strict";return this._core.rootNode},set:function(t){"use strict";this._core.rootNode=t}},name:{get:function(){"use strict";return this._core.rootNode.name},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new n(n.INVALID_PARAMS,"Expecting a string or undefined.");e.rootNode.name=t}},type:{get:function(){"use strict";return this._core.rootNode.type},set:function(t){"use strict";var e=this._core;if(e._readOnly)throw new n(n.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new n(n.INVALID_PARAMS,"Expecting a non-empty string.");e.rootNode.type=t}},compositeAssetId:{get:function(){"use strict";return this._owner.compositeAssetId},set:function(t){"use strict";throw new n(n.READ_ONLY,'Property "compositeAssetId" is read-only.')}},_isDirty:{get:function(){"use strict";return this._core._isDirty},set:function(t){"use strict";this._core._isDirty=t}},isDirty:{get:function(){"use strict";return this._isDirty},set:function(t){"use strict";this._core.isDirty=t}},changeCount:{get:function(){"use strict";return this._core.changeCount},set:function(t){"use strict";this._core.changeCount=t}}}),o.prototype.getChildWithId=function(t){"use strict";return this._core.getChildWithId(t)},o.prototype.getChildWithAbsolutePath=function(t){"use strict";return this._core.getChildWithAbsolutePath(t)},o.prototype.getChildrenOf=function(t){"use strict";return this._core.getChildrenOf(t)},o.prototype.addChild=function(t,e,r,i){"use strict";return this._core.addChild(t,e,r,i)},o.prototype.removeChild=function(t){"use strict";return this._core.removeChild(t)},o.prototype.moveChild=function(t,e,r){"use strict";return this._core.moveChild(t,e,r)},o.prototype.copyChild=function(t,e,r,i,n,s){"use strict";return this._core.copyChild(t,e,r,i,n,s)},o.prototype.allComponents=function(){"use strict";return this._core.allComponents()},o.prototype.getComponentWithId=function(t){"use strict";return this._core.getComponentWithId(t)},o.prototype.getComponentWithAbsolutePath=function(t){"use strict";return this._core.getComponentWithAbsolutePath(t)},o.prototype.getComponentsOf=function(t){"use strict";return this._core.getComponentsOf(t)},o.prototype.addComponentWithUploadResults=function(t,e,r,i,n){"use strict";return this._core.addComponentWithUploadResults(t,e,r,i,n)},o.prototype.updateComponentWithUploadResults=function(t,e){"use strict";return this._core.updateComponentWithUploadResults(t,e)},o.prototype.removeComponent=function(t){"use strict";return this._core.removeComponent(t)},o.prototype.moveComponent=function(t,e){"use strict";return this._core.moveComponent(t,e)},o.prototype.copyComponent=function(t,e,r,i,n){"use strict";return this._core.copyComponent(t,e,r,i,n)},o.prototype.parse=function(t){"use strict";if("string"!=typeof t)throw new n(n.INVALID_PARAMS,'Param "data" must be a string');var e=null;try{e=JSON.parse(t)}catch(t){throw new n(n.INVALID_JSON,"Manifest could not be parsed. Underlying error: "+t.message)}return this._setData(e,this._core._readOnly)},o.prototype.copy=function(){"use strict";return new o(JSON.parse(JSON.stringify(this._data)),this._owner)},o.prototype._verify=function(t){"use strict";return"string"!=typeof t.id?new n(n.INVALID_DATA,"Element is missing an id of type string"):"string"!=typeof t.name?new n(n.INVALID_DATA,"Element is missing a name of type string"):"string"!=typeof t.type?new n(n.INVALID_DATA,"Element is missing a type of type string"):null},o.prototype._setData=function(t,e){"use strict";var r=this._verify(t);if(null===r)return this._core=new i(t,this,e),this._data=t,this;throw r},o.prototype._local=function(){"use strict";return this._core._local()},o.prototype._setDirty=function(t){"use strict";this._core._setDirty(t)},o.prototype._setPathOfNode=function(t,e){"use strict";this._core._setPathOfNode(t,e)},o.prototype._verifyIntegrity=function(t,e,r){"use strict";return this._core._verifyIntegrity(t,e,r)},t.exports=o},552:function(t,e,r){var i=r(59);function n(t){"use strict";this._data={"composite-href":t.href,"uploaded-components":{}},this._waitingCallbacks=[],this._commitInProgress=!1,this._needAnotherCommit=!1}Object.defineProperties(n.prototype,{compositeHref:{get:function(){"use strict";return this._data["composite-href"]},set:function(t){"use strict";throw new i(i.READ_ONLY,"This property is read-only.")}},manifestEtag:{get:function(){"use strict";return this._data.etag},set:function(t){"use strict";t?this._data.etag=t:delete this._data.etag}},currentBranchEtag:{get:function(){"use strict";return this._data["current-branch-etag"]},set:function(t){"use strict";t?this._data["current-branch-etag"]=t:delete this._data["current-branch-etag"]}},changeCount:{get:function(){"use strict";return this._data.change},set:function(t){"use strict";t?this._data.change=t:delete this._data.change}},compositeHasBeenDeleted:{get:function(){"use strict";return!!this._data["composite-deleted"]},set:function(t){"use strict";t?this._data["composite-deleted"]=!0:delete this._data["composite-deleted"]}},compositeHasBeenArchived:{get:function(){"use strict";return!!this._data["composite-archived"]},set:function(t){"use strict";t?this._data["composite-archived"]=!0:delete this._data["composite-archived"]}},isEmpty:{get:function(){"use strict";return 0===Object.keys(this._data["uploaded-components"]).length&&!this.compositeHasBeenDeleted&&!this.compositeHasBeenArchived&&!this.manifestEtag},set:function(t){"use strict";throw new i(i.READ_ONLY,"This property is read-only.")}},isComplete:{get:function(){"use strict";return!!(this._data.etag&&this._data.change||this._data["composite-deleted"]||this._data["composite-archived"])},set:function(t){"use strict";throw new i(i.READ_ONLY,"This property is read-only.")}}}),n.prototype.recordUploadedComponent=function(t,e,r,i,n,s){"use strict";var o={etag:e,length:n,version:r,md5:i};s&&(o["source-asset-info"]=s),o.timestamp=(new Date).toISOString(),this._data["uploaded-components"][t]=o},n.prototype.idsOfAllUploadedComponents=function(){"use strict";return Object.keys(this._data["uploaded-components"])};n.prototype.getRecordForUploadedComponent=function(t){"use strict";var e=this._data["uploaded-components"][t];if(e&&!this.isComplete){var r=e.timestamp;if(!r)return this.removeRecordForUploadedComponent(t);if(r=new Date(r),isNaN(r.getTime()))return this.removeRecordForUploadedComponent(t);if(Date.now()-r.getTime()>=6048e5)return this.removeRecordForUploadedComponent(t)}return e},n.prototype.removeRecordForUploadedComponent=function(t){"use strict";delete this._data["uploaded-components"][t]},n.prototype.applyToBranch=function(t,e){"use strict";if(!this.isComplete)throw new i(i.INVALID_STATE,"Journal is not complete.");var r=t.isDirty;if(this.compositeHasBeenDeleted)t._data.state="committedDelete",t.manifestEtag=this.manifestEtag;else{this.compositeHasBeenArchived&&(t.compositeArchivalState="archived");var n,s="unmodified"!==t.compositeState&&this.changeCount!==t.changeCount,o=this.idsOfAllUploadedComponents(),a=o.length;for(n=0;n<a;n++){var c=o[n],u=t.getComponentWithId(c);if(u){var h=this.getRecordForUploadedComponent(u.id);if(u._data.etag=h.etag,u._data.length=h.length,u._data.version=h.version,u._data.md5=h.md5,h["source-asset-info"]){var _=t._core._getSourceAssetInfoOfComponent(u),d=h["source-asset-info"];_&&d&&_.compositeAssetId===d.compositeAssetId&&_.componentId===d.componentId&&_.componentVersion===d.componentVersion&&(u._data.state="unmodified",t._core._setSourceAssetInfoOfComponent(void 0,u))}else u._data.state="unmodified"}}t.manifestEtag=this.manifestEtag,s||(t._data.state="unmodified")}e&&(t._isDirty=r)},t.exports=n},59:function(t,e){function r(t,e,i){"use strict";if(Error.call(this),Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;n.name=this.name,this.stack=n.stack}this._code=t,this._message="["+t+"] "+e,this._underlyingError=i}r.prototype=Object.create(Error.prototype),r.prototype.name="AdobeDCXError",Object.defineProperties(r.prototype,{code:{get:function(){"use strict";return this._code}},message:{get:function(){"use strict";return this._message}},underlyingError:{get:function(){"use strict";return this._underlyingError}}}),r.INVALID_JSON="INVALID_JSON",r.READ_ONLY="READ_ONLY",r.INVALID_PARAMS="",r.INVALID_DATA="INVALID_DATA",r.DUPLICATE_VALUE="DUPLICATE_VALUE",r.NO_BASE_BRANCH_DATA="NO_BASE_BRANCH_DATA",r.INVALID_STATE="INVALID_STATE",r.DELETED_COMPOSITE="DELETED_COMPOSITE",r.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",r.NETWORK_ERROR="NETWORK_ERROR",r.COMPONENT_DOWNLOAD_ERROR="COMPONENT_DOWNLOAD_ERROR",r.COMPONENT_UPLOAD_ERROR="COMPONENT_UPLOAD_ERROR",r.COMPONENT_MODIFIED_ERROR="COMPONENT_MODIFIED_ERROR",r.UPDATE_CONFLICT="UPDATE_CONFLICT",r.NO_COMPOSITE="NO_COMPOSITE",r.ALREADY_EXISTS="ALREADY_EXISTS",r.SERVICE_IS_INACTIVE="SERVICE_IS_INACTIVE",r.EXCEEDS_QUOTA="EXCEEDS_QUOTA",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.RETRYABLE_SERVER_ERROR="RETRYABLE_SERVER_ERROR",r.TIMED_OUT="TIMED_OUT",r.UNEXPECTED="UNEXPECTED",r.TERMINATED_INPUTSTREAM="TERMINATED_INPUTSTREAM",r.WRONG_ENDPOINT="WRONG_ENDPOINT",r.OUT_OF_SPACE="ENOSPC",r.FILE_EXISTS_IN_CLOUD="FILE_EXISTS_IN_CLOUD",r.ASSET_NOT_FOUND="ASSET_NOT_FOUND",r.COMPOSITE_NOT_FOUND="COMPOSITE_NOT_FOUND";var i={};i[r.SERVICE_IS_INACTIVE]=1,i[r.NOT_IMPLEMENTED]=1,i[r.EXCEEDS_QUOTA]=1,i[r.RETRYABLE_SERVER_ERROR]=1,i[r.TIMED_OUT]=1,i[r.TERMINATED_INPUTSTREAM]=1,i[r.WRONG_ENDPOINT]=1,i[r.OUT_OF_SPACE]=1,i[r.INVALID_PARAMS]=1,i[r.INVALID_STATE]=1,r.wrapError=function(t,e,n,s){"use strict";if(!n||!i[n.code]){if(s){var o=s.statusCode;o>=500&&o<600&&(501===o?(t=r.NOT_IMPLEMENTED,e="Unimplemented request"):507===o?(t=r.EXCEEDS_QUOTA,e="Quota exceeded"):(t=r.RETRYABLE_SERVER_ERROR,e="Server error"))}n=new r(t,e,n)}return s&&(n.response=s),n},r.networkError=function(t,e,i){"use strict";return r.wrapError(r.NETWORK_ERROR,t,e,i)},r.unexpectedResponse=function(t,e,i){"use strict";return r.wrapError(r.UNEXPECTED_RESPONSE,t,e,i)},t.exports=r},64:function(t,e,r){(function(e){var i;r(718),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){"use strict";return this.substr(e||0,t.length)===t});var n={isBrowser:"browser"===e.env.APP_ENV,generateUuid:r(391),_setLogCallback:function(t){"use strict";i=t},merge:function(t){"use strict";var e,r;for(e=1;e<arguments.length;++e){var i=arguments[e];if("object"==typeof i)for(r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},appendPathElements:function(){"use strict";var t,e=[],r=arguments.length;for(t=0;t<r;t++){var i=arguments[t];"string"==typeof i&&""!==i&&(0===t&&1!==i.length||"/"===i.charAt(0)&&(i=i.slice(1)),t!==r-1&&"/"===i.charAt(i.length-1)&&(i=i.slice(0,i.length-1)),e.push(i))}return e.join("/")}},s=/^[^\u0000-\u001F\u0022\u002A\u003A\u003C\u003E\u003F\u005C\u007F]*[^\u0000-\u001F\u0022\u002A\u002E\u003A\u003C\u003E\u003F\u005C\u007F]{1}$/;n.isValidPath=function(t,e){"use strict";try{if(t.length>65535)return!1;var r=(e?t.slice(1):t).split("/");if(!r||0===r.length)return!1;var i,n=r.length;for(i=0;i<n;i++){if(r[i].length>255||!s.test(r[i]))return!1}if(e&&r.length>0){var o=r[0];if("manifest"===o||"mimetype"===o)return!1}return!0}catch(t){return!1}},n.isValidAbsolutePath=function(t){"use strict";return n.isValidPath(t,!0)};var o=n.noOp=function(){};n.consumeStream=function(t,e,r){"use strict";t.on("data",r||o),t.on("end",e||o)},n.flatCopy=function(t){"use strict";var e,r={},i=Object.keys(t),n=i.length;for(e=0;e<n;e++){var s=i[e];r[s]=t[s]}return r},n.deepCopy=function(t){"use strict";return JSON.parse(JSON.stringify(t))},n.objectsEqual=function(t,e,r){"use strict";var i,s,o={},a=Object.keys(t),c=a.length;for(s=0;s<c;s++){if(i=a[s],!r||!r[i]){var u=t[i],h=e[i],_=typeof u;if(_!==typeof h)return!1;if("object"===_){if(!n.objectsEqual(u,h,r))return!1}else if(u!==h)return!1}o[i]=!0}for(c=(a=Object.keys(e)).length,s=0;s<c;s++)if(!o[i=a[s]])return!1;return!0};var a=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");n.parseURI=function(t){"use strict";var e=t.match(a);return{scheme:e[2],authority:e[4],path:e[5],query:e[7],fragment:e[9]}},n.endPointOf=function(t){"use strict";var e,r=n.parseURI(t),i=r.scheme,s=r.authority,o="https"===i?443:"http"===i?80:-1;return i&&s&&(e=(i+"://"+s).toLowerCase(),o>=0&&s.indexOf(":")<0&&(e=e+":"+o)),e},n.ensureRelativeHrefStartsWithSlash=function(t){"use strict";if(t){var e=n.parseURI(t),r=e.scheme,i=e.authority;r||i||"/"!==t.charAt(0)&&(t="/"+t)}return t};var c="0".charCodeAt(0),u="1".charCodeAt(0),h="9".charCodeAt(0),_="a".charCodeAt(0),d="A".charCodeAt(0),p="f".charCodeAt(0),f="F".charCodeAt(0);n.isHexChar=function(t){"use strict";var e=t.charCodeAt(0);return e>=c&&e<=h||e>=_&&e<=p||e>=d&&e<=f},n.isPctEncoding=function(t){"use strict";return t.length>=3&&"%"===t.charAt(0)&&this.isHexChar(t.charAt(1))&&this.isHexChar(t.charAt(2))},n.hexVal=function(t){"use strict";var e=t.charCodeAt(0);return e>=c&&e<=h?e-c:e>=_&&e<=p?10+e-_:e>=d&&e<=f?10+e-d:0};var l=/^([^:]+):(.*)$/,m=/^\s+|\s+$/g;n.parseHeaders=function(t){"use strict";var e,r,i,n={},s=t.split(/\r?\n/);for(e=0;e<s.length;++e){var o=s[e];if(o.length>0){var a=o.charCodeAt(0);if(!r||9!==a&&32!==a){var c=l.exec(o);c&&c.length>1&&(r=c[1].toLowerCase(),i=(i=c[2]||"").replace(m,""),n[r]?n[r]=n[r]+","+i:n[r]=i)}else n[r]=n[r]+" "+o.replace(m,"")}}return n},n.timeStamp=function(t){"use strict";var e=(new Date).getTime();return t&&(e-=e%1e3),e},n.log=function(t){"use strict";if("function"==typeof i)try{i(t)}catch(t){}};var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~",A="0123456789ABCDEF";function E(t){"use strict";for(var e=[],r=0;r<128;++r)e.push(-1!==t.indexOf(String.fromCharCode(r)));return e}var y=E("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~:/?#[]@!$&'()*+,;="),w=E(g),D=E(g+"/");function I(t,e){"use strict";if(t<128&&e[t])return String.fromCharCode(t);var r="%";return r+=A.charAt(t>>4&15),r+=A.charAt(15&t)}function v(t){"use strict";for(var e=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):++r<t.length&&(i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}function O(t,e){"use strict";for(var r=v(t),i="",n=0;n<r.length;n++)i+=I(r[n],e);return i}function N(t){"use strict";return O(t=t.normalize("NFC"),w)}function C(t){"use strict";t=t.normalize("NFC");for(var e=0,r="";e<t.length;)n.isPctEncoding(t.substr(e))?(r+=t.substr(e,3),e+=3):r+=O(t.charAt(e++),y);return r}n._toUTF8Array=v,n.escapeURLPath=function(t){"use strict";return O(t=t.normalize("NFC"),D)},n.expandURITemplate=function(t,e){"use strict";for(var r,i,s=0,o="",a=!1,_=!1,d=!1,p=!0,f=!0,l=!1,m="",g="",A=",",E=-1,w=function(t){var e;(o+=p?g:l||f?A:",",_&&m&&(p||l||f)&&(o+=N(m),(!d||t.length>0)&&(o+="=")),t)&&(e=a?C(t):N(t),E>0&&(e=function(t,e){for(var r=n,i=0;i<t.length&&e>0;){if(r.isPctEncoding(t.substr(i))){var s=(r.hexVal(t.substr(i+1))<<4)+r.hexVal(t.substr(i+2));if(i+=3,192==(192&s))for(;i<t.length&&r.isPctEncoding(t.substr(i))&&(s=(r.hexVal(t.substr(i+1))<<4)+r.hexVal(t.substr(i+2)),i+=3,128==(192&s)););}else++i;--e}return t.substr(0,i)}(e,E)),o+=e);p=!1,f=!1};s<t.length;)if("{"===t.charAt(s)){if(++s<t.length){switch(a=!1,_=!1,g="",A=",",d=!1,t.charAt(s++)){case"+":a=!0;break;case"#":g="#",a=!0;break;case".":g=".",A=".";break;case"/":g="/",A="/";break;case";":g=";",A=";",_=d=!0;break;case"?":g="?",A="&",_=!0;break;case"&":g="&",A="&",_=!0;break;default:--s}for(m="",p=!0,f=!0;s<t.length;)if("}"===t.charAt(s)||","===t.charAt(s)||"*"===t.charAt(s)||":"===t.charAt(s)){if(l=!1,E=-1,"*"===t.charAt(s)){if(l=!0,++s>=t.length)break}else if(":"===t.charAt(s)){if(++s>=t.length)break;for(t.charCodeAt(s)>=u&&t.charCodeAt(s)<=h&&(E=0);s<t.length&&t.charCodeAt(s)>=c&&t.charCodeAt(s)<=h&&E<1e4;)E=10*E+(t.charCodeAt(s++)-c);if(s>=t.length)break}for(;s<t.length&&"}"!==t.charAt(s)&&","!==t.charAt(s);)++s;if(m.length>0&&"*"===m.charAt(m.length-1)&&(l=!0,m=m.substr(0,m.length-1)),m.length>0){var D=e?e[m]:void 0;if(D||""===D)if(Array.isArray(D)){E=-1;for(var I=0;I<D.length;I++)w(String(D[I]))}else if("object"==typeof D&&null!==D)for(var v in D)D.hasOwnProperty(v)&&(r=v,i=String(D[v]),o+=p?g:l||f?A:",",_&&m&&p&&!l&&(o+=N(m),(!d||i.length>0)&&(o+="=")),r&&(o+=a?C(r):N(r),o+=l?"=":",",i&&(o+=a?C(i):N(i))),p=!1,f=!1);else w(String(D))}if("}"===t.charAt(s++))break;m="",f=!0}else m+=t.charAt(s++)}}else this.isPctEncoding(t.substr(s))?(o+=t.substr(s,3),s+=3):o+=O(t.charAt(s++),y);return o},t.exports=n}).call(this,r(85))},742:function(t,e,r){var i,n,s=r(361),o=r(363),a=r(362),c=r(59),u=r(552),h=r(64),_=o.STATES;function d(t,e,r){"use strict";this._session=t,this._callback=e,this._cleanup=r,this._componentsPending=0,this._bytesTransfered=0,this._bytesTotal=0,this._onProgress=h.noOp;var i=this;this._reportProgress=function(t){if(t>0){i._bytesTransfered+=t;var e=i.onProgress;e&&e(i._bytesTransfered,i._bytesTotal)}}}Object.defineProperties(d.prototype,{aborted:{get:function(){"use strict";return this._aborted}},bytesTransfered:{get:function(){"use strict";return this._bytesTransfered}},bytesTotal:{get:function(){"use strict";return this._bytesTotal}},onProgress:{set:function(t){"use strict";return this._onProgress=t}}}),d.prototype._callCallback=function(t,e){"use strict";var r=this._callback;if(r)return this._callback=void 0,r(t,e)},d.prototype._xferComplete=function(t,e){"use strict";var r=this._cleanup;if(!r)return this._callCallback(t,e);this._cleanup=void 0,r(t,e)},d.prototype.abort=function(t){"use strict";return this._aborted||(this._aborted=!0,this._session._service.abortAllWithToken(this)),t||(this._callback=void 0,t=new Error("Aborted")),this._xferComplete(t)};var p={};p.pullCompositeManifestOnly=function(t,e,r){"use strict";return this._pullCompositeManifest(t,void 0,e,r)},p.pullCompositeVersionManifestOnly=function(t,e,r,i){"use strict";return this._pullCompositeManifest(t,e,r,i)},p.createComposite=function(t,e,r,i,n){"use strict";if(t.assetId)throw new c(c.INVALID_STATE,"composite must not already have an assigned asset id.");var s;return(s=new d(i,n,function(t,e){return s._callCallback(t,e)}))._composite=t,s._overwriteExisting=r,s._compositeIsNew=!0,s._journal=t._pushJournal||new u(t),s._callback=n,p._createCompositeAtHref(e,s),s},p.pushComposite=function(t,e,r,i){"use strict";var n,s=!t.isBound;return(n=new d(r,i,function(e,r){var i=n._journal;return t._pushJournal=i.isEmpty?void 0:i,n._callCallback(e,r)}))._composite=t,n._overwriteExisting=e,n._compositeIsNew=s,n._owner=t.current.copy(),n._journal=t._pushJournal||new u(t),p._pushComposite(t,n),n},p.remixComposite=function(t,e,r,i,n,s,o){"use strict";var a=new d(s,o),c=s.remixComposite(t,e,r,i,n,function(t,e){return a._xferComplete(t,t?void 0:e)});return c&&(c.token=a),a},p.publishComposite=function(t,e,r,i,n,s,o){"use strict";var a=new d(s,o),c=s.publishComposite(t,e,r,i,n,function(t,e){return a._xferComplete(t,t?void 0:e)});return c&&(c.token=a),a},p.uploadNewComponent=function(t,e,r,n,o,a){"use strict";return i(n||h.generateUuid(),e,!0,r.collaborationType===s.COLLABORATION.SHARED_WITH_USER,t,r.id,r.assetId,o,a)},p.uploadComponent=function(t,e,r,n,o){"use strict";return i(t.id,t.type,!1,r.collaborationType===s.COLLABORATION.SHARED_WITH_USER,e,r.id,r.assetId,n,o)},p.copyAssetForNewComponent=function(t,e,r,i,o,a){"use strict";return n(i||h.generateUuid(),e,!0,r.collaborationType===s.COLLABORATION.SHARED_WITH_USER,t,r.id,r.assetId,o,a)},p.getURLForComponent=function(t,e,r){"use strict";return e.getComponentHref(t,t.version,function(t,i){var n=i;t||(n=e._resolveUrl(n)),r(t,n)})},p._pullCompositeManifest=function(t,e,r,i){"use strict";if(t._links&&(t.assetId=r.registerLinks(t._links),t._links=void 0),"string"!=typeof t.assetId)throw new c(c.INVALID_STATE,"Composite must have an asset id.");var n;return(n=new d(r,i,function(r,i){return r?n._callCallback(r):null===i?n._callCallback(void 0,null):(i.compositeState=_.unmodified,i.readOnly=!0,t._options.xhrBaseBranchSupport&&!e&&(t._pulledBranchData=i.localData),n._callCallback(void 0,i))}))._composite=t,function(){if(!n.aborted){var i;t.current&&!e&&(i=t.current.manifestEtag,n._referenceBranch=t.current);var s=r.getCompositeManifest(t,e,i,function(r,i,s){if(!n.aborted){if(r)return r.response&&404===r.response.statusCode?n._xferComplete(new c(c.NO_COMPOSITE,"Composite missing or deleted",r.underlyingError||r)):n._xferComplete(r);if(null===i)return n._xferComplete(void 0,null);var o;try{if((o=(new a).parse(i)).compositeAssetId=t.assetId,o._collaborationType=t.collaborationType,o._clientDataString=t.clientDataString,o.manifestEtag=s,o.versionId=e,(o.compositeState===_.committedDelete||o.compositeState===_.pendingDelete)&&!e){var u=n._session.deleteComposite(t,function(t){return t?n._xferComplete(new c(c.DELETED_COMPOSITE,"Error deleting composite directory",t)):n._xferComplete(new c(c.DELETED_COMPOSITE,"Composite is deleted"))});return void(u&&(u.token=n))}}catch(t){return n._xferComplete(new c(c.INVALID_JSON,"Corrupted manifest",t))}var h,d,p=o.allComponents();for(h=0;h<p.length;++h)(d=p[h]).state===_.pendingDelete||d.state===_.committedDelete?o.removeComponent(d):d.state=_.unmodified;return n._xferComplete(void 0,o)}});s&&(s.token=n,s.progress=n._reportProgress)}}(),n},p._createCompositeAtHref=function(t,e){"use strict";var r=e._composite,i=e._overwriteExisting;function n(t){e._xferComplete(t,r.assetId)}if(r.assetId)return n();var s=e.token=e._session.createComposite(r,t,r.type,function(t,s,o){if(t){if(t.code!==c.ALREADY_EXISTS)return n(function(t,e,r){"use strict";return c.wrapError(c.UNEXPECTED_RESPONSE,t,e,r)}("Unexpected response creating a composite directory",t,s));if(i)r.assetId=o,n();else{var a=e._session._getAssetManifestHref(o,void 0,function(i,s){if(i)return n(i);s=e._session._resolveUrl(s);var a=e._session.headRequest(s,function(e,i){return e?n(e):404!==i.statusCode?n(t):(r.assetId=o,void n())});a&&(a.token=e)});a&&(a.token=e)}}else r.assetId=o,n()});s&&(s.token=e)},p._pushComposite=function(t,e){"use strict";var r=e._owner,i=e._journal,n=e._compositeIsNew,o=e._overwriteExisting,a=e._session;if(!t.assetId)throw new c(c.INVALID_STATE,"createComposite must be called before pushComposite to create a composite directory and assign an asset id.");var u=r.changeCount,h=r.remoteData.length+50;if(e._bytesTotal=h,r.compositeState===_.committedDelete)return e._xferComplete(new c(c.DELETED_COMPOSITE,"Attempt to push a deleted composite"));if("archived"===r.compositeArchivalState)return e._xferComplete(new c(c.DELETED_COMPOSITE,"Attempt to push an archived composite"));var d="pending"===r.compositeArchivalState;if(d&&t.collaborationType===s.COLLABORATION.SHARED_WITH_USER)return e._xferComplete(new c(c.INVALID_STATE,"Attempt to archive composite that is shared with this user."));if(!n&&!d&&r.compositeState===_.unmodified)return e._xferComplete();if(r.compositeState===_.pendingDelete)return n&&!o?e._xferComplete(new c(c.INVALID_STATE,"Attempt to delete unbound composite without specifying overwriteExisting.")):t.collaborationType===s.COLLABORATION.SHARED_WITH_USER?e._xferComplete(new c(c.INVALID_STATE,"Attempt to delete composite that is shared with this user.")):p._deleteComposite(e,o,function(t,r){return e._xferComplete(t,r)});function f(r,i){if(!d)return i(void 0,r);var n=a.archiveComposite(t,function(t,n){return t?i(t):(r.compositeArchivalState="archived",e._journal.compositeHasBeenArchived=!0,i(void 0,r))});n&&(n.token=e)}function l(r){if(n)return e._xferComplete(r);var i=a.getCompositeManifestHref(t,void 0,function(t,i){if(t)return e._xferComplete(t);i=a._resolveUrl(i);var n=a.headRequest(i,function(t,i){return t?e._xferComplete(t):404===i.statusCode?e._xferComplete(new c(c.NO_COMPOSITE,"Composite does not exist; may have been deleted")):e._xferComplete(r)});n&&(n.token=e)});i&&(i.token=e)}p._pushComponents(e,r,function(){if(!e.aborted){var n=e.failedComponents;if(n){var s,d=new c(c.COMPONENT_UPLOAD_ERROR,"One or more components failed to upload."),p=n.length;for(s=0;s<p;s++){var m=n[s].error;if(m.code===c.EXCEEDS_QUOTA){d=new c(m.code,m.message);break}}return d.failedComponents=n,l(d)}if(r.compositeState===_.modified){r.compositeState=_.unmodified,i.manifestEtag&&i.currentBranchEtag===r.manifestEtag&&(r.manifestEtag=i.manifestEtag);var g=r.remoteData;e._bytesTotal+=g.length,e._bytesTotal-=h;var A=a.updateManifest(r,g,o,function(n,s){if(!e.aborted){if(n)return l(n);var o=s.headers.etag;i.manifestEtag=o,i.currentBranchEtag=r.manifestEtag,i.changeCount=u,i.applyToBranch(r),r.compositeState=_.unmodified,t._options.xhrBaseBranchSupport&&(t._pushedBranchData=r.localData),f(r,function(t,r){return e._xferComplete(t,r)})}});A&&(A.progress=e._reportProgress,A.token=e)}else f(r,function(t,r){return e._xferComplete(t,r)})}})},p._deleteComposite=function(t,e,r){"use strict";var i=t._composite,n=t._owner,s=t._session;n.compositeState=_.committedDelete;var o=n.remoteData;t._bytesTotal=o.length,t._journal.manifestEtag&&t._journal.currentBranchEtag===n.manifestEtag&&(n.manifestEtag=t._journal.manifestEtag);var a=s.updateManifest(n,o,e,function(e,o){if(e)return r(e);var a=s.deleteComposite(i,function(e,i){return e?r(e):(t._journal.compositeHasBeenDeleted=!0,r(void 0,n))});a&&(a.token=t)});a&&(a.token=t)},p._pushComponents=function(t,e,r){"use strict";var i,n=e.allComponents(),o=t._composite,a={},u=t._journal;function h(i,n,s){n?a[i.id]=n:delete a[i.id],s&&(t.failedComponents=t.failedComponents||[],t.failedComponents.push({component:i,error:s})),0===Object.keys(a).length&&r(void 0,e)}function d(e,r,i){var n=u.getRecordForUploadedComponent(e.id);if(r&&n){var a=n["source-asset-info"];if(a&&a.compositeAssetId===r.compositeAssetId&&a.componentId===r.componentId&&a.componentVersion===r.componentVersion)return e.etag=n.etag,e.version=n.version,e.md5=n.md5,e.length=n.length,void(e.state=_.unmodified)}h(e,"copying");var d=function(t,i,n){if(!t){var s=i.headers.etag,o=i.headers["x-latest-version"],a=n.md5,d=n.size;s||(t=new c(c.UNEXPECTED_RESPONSE,"No etag")),o||(t=new c(c.UNEXPECTED_RESPONSE,"No version")),a||(t=new c(c.UNEXPECTED_RESPONSE,"No md5")),d||(t=new c(c.UNEXPECTED_RESPONSE,"No length")),e.etag=s,e.version=o,e.md5=a,e.length=d,e.state=_.unmodified,u.recordUploadedComponent(e.id,s,o,a,d,r)}h(e,null,t)},p=void 0;if(t._session._getComponentHref(r.compositeAssetId,r.componentId,r.componentVersion,function(e,r){e||(p=t._session._resolveUrl(r))}),!p)throw new c(c.INVALID_STATE,"Session missing cached asset info for asset id = "+r.compositeAssetId);t._session._getResourcePathFromHref(p,function(r,n){if(r)return d(r);p=t._session._resolveUrl(n);var a=t._session.copyAssetToComponentId(e.id,e.type,o.assetId,i,o.collaborationType===s.COLLABORATION.SHARED_WITH_USER,t,p,d);a&&(a.progress=t._reportProgress,a.token=t)})}for(i=0;i<n.length;++i){var p=n[i],f=p.state,l=!p.etag;if(f||(f=_.unmodified),l||f===_.modified){var m=e._core._getSourceAssetInfoOfComponent(p);if(m)d(p,m,l||t._compositeIsNew);else t.failedComponents=t.failedComponents||[],t.failedComponents.push({component:p,error:new c(c.INVALID_STATE,"Component should not be modified or new without local storage")})}else f===_.unmodified?u.removeRecordForUploadedComponent(p.id):f!==_.committedDelete&&f!==_.pendingDelete||e.removeComponent(p)}if(0===Object.keys(a).length)return r()},i=function(t,e,r,i,n,s,a,u,h){"use strict";if("function"!=typeof h)throw new c(c.INVALID_PARAMS,'Param "callback" must be a function.');var _=n.length||n.byteLength||n.size,p=new d(u,h);p._bytesTotal=_;var f=u.uploadDataForComponentId(t,e,a,r,i,p,n,function(r,i,n){var a;if(!r)try{a=new o._UploadResults(s),_=_||f.bytesSent,a.records[t]=function(t,e,r,i,n){"use strict";if("number"!=typeof e)throw new c(c.UNEXPECTED_RESPONSE,"No length");var s=i.headers.etag,a=i.headers["x-latest-version"],u=n.md5;if(!s)throw new c(c.UNEXPECTED_RESPONSE,"No etag");if(!a)throw new c(c.UNEXPECTED_RESPONSE,"No version");if(!u)throw new c(c.UNEXPECTED_RESPONSE,"No md5");return new o._UploadRecord(t,s,a,u,e,r)}(t,_,e,i,n)}catch(t){r=t,a=void 0}return p._xferComplete(r,a)});return f&&(f.progress=p._reportProgress,f.token=p),p},n=function(t,e,r,i,n,s,a,u,h){"use strict";if("function"!=typeof h)throw new c(c.INVALID_PARAMS,'Param "callback" must be a function.');var _=new d(u,h),p=u.copyAssetToComponentId(t,e,a,r,i,_,n,function(r,i,n){if(!_._aborted){var a;if(!r)try{(a=new o._UploadResults(s)).records[t]=function(t,e,r,i){"use strict";var n=i.headers.etag,s=i.headers["x-latest-version"],a=e.md5,u=e.size;if("number"!=typeof u)throw new c(c.UNEXPECTED_RESPONSE,"No length");if(!n)throw new c(c.UNEXPECTED_RESPONSE,"No etag");if(!s)throw new c(c.UNEXPECTED_RESPONSE,"No version");if(!a)throw new c(c.UNEXPECTED_RESPONSE,"No md5");return new o._UploadRecord(t,n,s,a,u,r)}(t,n,e,i)}catch(t){r=t,a=void 0}return h(r,a)}});return p&&(p.progress=_._reportProgress,p.token=_),_},t.exports=p}}]);
//# sourceMappingURL=logomaker-entry_c9796546-a8089acd.js.map